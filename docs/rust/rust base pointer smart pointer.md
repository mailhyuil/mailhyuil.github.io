# 스마트 포인터

> 참조자(&) = 포인터
>
> > 스마트 포인터 = 포인터 with 메타 데이터 and 특별한 기능
> >
> > > 스마트 포인터는 Deref, Drop trait을 구현한 구조체

## Drop

> 스마트 포인터의 인스턴스가 스코프 밖으로 벗어났을 때 실행될 코드를 정의
>
> > 즉 메모리 정리 코드 실행

## Deref

> 인스턴스가 참조자처럼 동작하도록
>
> > 즉 역참조가 가능토록 하는 trait

## Box<T>

> 값을 스택이 아닌 힙에 저장하도록 하는 구조체
>
> > 스택에 남는 것은 힙을 가리키는 포인터

### usage

1. 컴파일 타임에 크기를 알 수 없을 시
2. 구체적인 타입은 모르고 특정한 trait만 알 때
3. 소유권을 옮길 시 값이 복사되지 않게

```rs
Box::new()
```

## Rc

> 복수 소유가 가능하게 해주는 구조체
>
> > 참조 카운트를 사용
> >
> > > 참조 카운트가 0이 되면 메모리에서 해제
> > >
> > > > 단일 스레드에서만 사용 가능

```rs
Rc::new()
Rc::clone() // 참조 카운트 증가
```

## RefCell

> 내부 가변성 패턴
>
> > 불변 값을 런타임에 가변으로 바꿀 수 있는 구조체

## Rc, RefCell은 메모리 누수(순환 참조)를 가능케 할 수 있다.

## Weak

> 순환 참조를 방지하기 위한 구조체
