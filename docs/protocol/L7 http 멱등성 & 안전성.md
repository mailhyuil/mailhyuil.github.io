# L7 http 멱등성 & 안전성

> 멱등한 요청은 브라우저나 프록시 서버가 자동으로 캐시 및 재시도를 할 수 있다.
>
> > GET, HEAD, OPTIONS은 멱등하고 안전한 메소드 브라우저나 프록시 서버는 멱등한 메소드를 안전하다고 판단해 다시 시도할 수 있음
> >
> > 따라서 GET으로 서버에 쓰는건 위험함
> >
> > > Idempotency-Key를 사용하여 POST를 멱등하게 만들 수 있음

## 멱등성

> 같은 값으로 여러번 메소드를 호출해도 값이 항상 똑같은 것
>
> > 멱등성이 보장되지 않은 결제 API라면 실제로 결제가 성공했는지 수동으로 확인해야 하고, 확인해 보니 실제로 결제가 되지 않았다면 고객이 같은 결제를 다시 시도해야 해요.
> >
> > > 반면 결제 API가 멱등하다면 다시 같은 요청을 보내지 않고 전에 받지 못한 결과만 다시 받을 수 있을 때 편리할 거예요.
> > >
> > > > 또 실수로 중복 요청이 되더라도(일명 ‘따닥’) 실제로는 결제가 되지 않아서 안심하고 여러 번 요청할 수 있어요.
> > > >
> > > > > 필드를 전부 IsNotEmpty로 하거나
> > > > >
> > > > > IsOptional이라면 default value를 설정

## 안전성

> 리소스를 변경하지 않는 메소드
>
> > GET, HEAD, OPTIONS
