"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["476225"],{682358:function(e,r,n){n.r(r),n.d(r,{frontMatter:()=>i,toc:()=>l,default:()=>h,metadata:()=>t,assets:()=>a,contentTitle:()=>c});var t=JSON.parse('{"id":"protocol/L7 http headers \uBCF4\uC548 \uACF5\uACA9 CSRF","title":"http headers \uBCF4\uC548 CSRF","description":"CSRF\uB780 Cross-Site Request Forgery\uC758 \uC57D\uC790\uB85C, \uC0AC\uC6A9\uC790\uAC00 \uC758\uB3C4\uD558\uC9C0 \uC54A\uC740 \uC694\uCCAD\uC744 \uBCF4\uB0B4\uB294 \uACF5\uACA9\uC744 \uB9D0\uD55C\uB2E4.","source":"@site/docs/protocol/L7 http headers \uBCF4\uC548 \uACF5\uACA9 CSRF.md","sourceDirName":"protocol","slug":"/protocol/L7 http headers \uBCF4\uC548 \uACF5\uACA9 CSRF","permalink":"/docs/protocol/L7 http headers \uBCF4\uC548 \uACF5\uACA9 CSRF","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"http headers \uBCF4\uC548 same-origin & same-site & cross-origin","permalink":"/docs/protocol/L7 http headers \uBCF4\uC548 same-origin & same-site & cross-origin"},"next":{"title":"http headers \uBCF4\uC548 XSS (Cross-Site Scripting)","permalink":"/docs/protocol/L7 http headers \uBCF4\uC548 \uACF5\uACA9 XSS"}}'),o=n(447259),s=n(255511);let i={},c="http headers \uBCF4\uC548 CSRF",a={},l=[{value:"\uC2DC\uB098\uB9AC\uC624",id:"\uC2DC\uB098\uB9AC\uC624",level:2},{value:"ajax\uB85C CSRF\uAC00 \uC131\uACF5\uD558\uB294 \uACBD\uC6B0",id:"ajax\uB85C-csrf\uAC00-\uC131\uACF5\uD558\uB294-\uACBD\uC6B0",level:2},{value:"\uBC29\uC9C0",id:"\uBC29\uC9C0",level:2}];function d(e){let r={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.header,{children:(0,o.jsx)(r.h1,{id:"http-headers-\uBCF4\uC548-csrf",children:"http headers \uBCF4\uC548 CSRF"})}),"\n",(0,o.jsxs)(r.blockquote,{children:["\n",(0,o.jsx)(r.p,{children:"CSRF\uB780 Cross-Site Request Forgery\uC758 \uC57D\uC790\uB85C, \uC0AC\uC6A9\uC790\uAC00 \uC758\uB3C4\uD558\uC9C0 \uC54A\uC740 \uC694\uCCAD\uC744 \uBCF4\uB0B4\uB294 \uACF5\uACA9\uC744 \uB9D0\uD55C\uB2E4."}),"\n",(0,o.jsx)(r.p,{children:"XSS\uC640 \uB2EC\uB9AC \uC0AC\uC6A9\uC790\uAC00 \uD604\uC7AC \uB4E4\uC5B4\uC640 \uC788\uB294 \uD398\uC774\uC9C0\uC758 \uC815\uC0C1\uC801\uC778 \uC138\uC158\uC744 \uC774\uC6A9\uD558\uC5EC \uACF5\uACA9\uD55C\uB2E4. (redirect, same-origin request \uB4F1)"}),"\n",(0,o.jsx)(r.p,{children:"\uC774\uB85C \uC778\uD574 \uC758\uB3C4\uD558\uC9C0 \uC54A\uC740 \uD074\uB77C\uC774\uC5B8\uD2B8 \uB610\uB294 \uC11C\uBC84 \uB370\uC774\uD130 \uC720\uCD9C, \uC138\uC158 \uC0C1\uD0DC \uBCC0\uACBD \uB610\uB294 \uCD5C\uC885 \uC0AC\uC6A9\uC790 \uACC4\uC815 \uC870\uC791\uC744 \uD3EC\uD568\uD560 \uC218 \uC788\uB294 \uC791\uC5C5\uC774 \uC6F9 \uC0AC\uC774\uD2B8\uC5D0\uC11C \uC218\uD589\uB420 \uC218 \uC788\uB2E4."}),"\n",(0,o.jsx)(r.p,{children:"e.g. \uC0AC\uC6A9\uC790\uB294 \uC740\uD589\uC5D0 \uB85C\uADF8\uC778 \uB418\uC5B4 \uC788\uACE0, \uACF5\uACA9\uC790\uAC00 \uB9CC\uB4E0 \uBAA8\uBC29 \uD398\uC774\uC9C0\uC5D0 \uBC29\uBB38\uD558\uAC8C\uD558\uC5EC \uC740\uD589\uC5D0 \uB3C8\uC744 \uC774\uCCB4\uD558\uB294 \uC694\uCCAD\uC744 \uBCF4\uB0B4\uB294 \uAC83"}),"\n",(0,o.jsxs)(r.blockquote,{children:["\n",(0,o.jsx)(r.p,{children:"\uBC29\uC9C0 \uBC29\uBC95: \uC11C\uBC84\uC5D0\uC11C Referer, Origin, X-CSRF-Token \uD5E4\uB354\uB97C \uAC80\uC99D\uD55C\uB2E4."}),"\n",(0,o.jsxs)(r.blockquote,{children:["\n",(0,o.jsx)(r.p,{children:"X-CSRF-Token\uC740 Custom Header\uC774\uB2E4 \uB2E4\uB978 \uC774\uB984\uC73C\uB85C \uC0AC\uC6A9 \uAC00\uB2A5"}),"\n",(0,o.jsxs)(r.blockquote,{children:["\n",(0,o.jsx)(r.p,{children:"Cookie \uC0AC\uC6A9 \uC2DC SameSite \uC18D\uC131\uC744 Strict, Lax\uB85C \uC124\uC815\uD55C\uB2E4."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(r.h2,{id:"\uC2DC\uB098\uB9AC\uC624",children:"\uC2DC\uB098\uB9AC\uC624"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-txt",children:'1. \uC0AC\uC6A9\uC790\uAC00 bank.com(\uC740\uD589 \uC0AC\uC774\uD2B8)\uC5D0\uC11C \uB85C\uADF8\uC778 \uC778\uC99D \uC815\uBCF4\uB97C \uB2F4\uC740 \uCFE0\uD0A4\uAC00 SameSite=Lax\uB610\uB294 None\uC73C\uB85C \uC124\uC815\uB418\uC5B4 \uC788\uB294 \uC0C1\uD0DC\r\n\r\n2. \uACF5\uACA9\uC790\uAC00 bank.com \uD398\uC774\uC9C0 \uB0B4\uC5D0\uC11C \uC774\uBA54\uC77C, \uB9C1\uD06C, \uAD11\uACE0, \uB313\uAE00 \uB4F1\uC744 \uC774\uC6A9 evil.com(\uC545\uC758\uC801\uC778 \uC0AC\uC774\uD2B8)\uB85C \uC694\uCCAD\uC744 \uBCF4\uB0B4\uAC8C \uD55C\uB2E4.\r\n\r\n3. evil.com Get\uC694\uCCAD\uC744 \uC0AC\uC6A9\uD574\uC11C \uC0AC\uC6A9\uC790\uB97C bank.com\uB85C \uB9AC\uB2E4\uC774\uB809\uD2B8 \uC2DC\uCF1C \uB3C8\uC744 \uC774\uCCB4\uD558\uB294 \uC694\uCCAD\uC744 \uBCF4\uB0B4\uAC8C \uD55C\uB2E4.\r\n   (form\uC744 \uC774\uC6A9\uD558\uC5EC \uC694\uCCAD\uC744 \uBCF4\uB0BC \uC218 \uC788\uB2E4.)\r\n   (ajax\uB85C\uB294 \uAC70\uC758 \uBD88\uAC00\uB2A5\uD558\uB2E4. \uC774\uC720\uB294 SOP \uC815\uCC45 \uB54C\uBB38)\r\n\r\ne.g. (in evil.com)\r\n\r\n\x3c!-- Get \uC694\uCCAD\uC73C\uB85C \uC774\uCCB4\uAC00 \uAC00\uB2A5\uD55C \uACBD\uC6B0 --\x3e\r\n<img src="https://bank.com/transfer?to=hacker&amount=10000">\r\n\r\n\x3c!-- or --\x3e\r\n\r\n\x3c!-- Post \uC694\uCCAD\uC73C\uB85C \uC774\uCCB4\uAC00 \uAC00\uB2A5\uD55C \uACBD\uC6B0 --\x3e\r\n\x3c!-- \uC811\uC18D\uD55C \uD398\uC774\uC9C0 evil.com\uC5D0\uC11C action\uC744 bank.com\uB85C \uC124\uC815\uD558\uC5EC redirect\uB97C \uC2DC\uD0A4\uBA74 bank.com\uC758 \uCFE0\uD0A4\uB97C \uD3EC\uD568\uD574\uC11C \uC804\uC1A1\uD55C\uB2E4. --\x3e\r\n<form action="https://bank.com/transfer" method="POST">\r\n    <input type="hidden" name="to" value="hacker">\r\n    <input type="hidden" name="amount" value="10000">\r\n</form>\r\n<script>\r\n    document.forms[0].submit();  \x3c!-- \uC790\uB3D9\uC73C\uB85C \uC804\uC1A1\uB428 --\x3e\r\n<\/script>\r\n\r\n4. \uBE0C\uB77C\uC6B0\uC800\uAC00 bank.com\uC5D0 \uCFE0\uD0A4\uB97C \uC790\uB3D9\uC73C\uB85C \uC804\uC1A1\r\n\r\n5. CSRF \uACF5\uACA9 \uC131\uACF5\n'})}),"\n",(0,o.jsx)(r.h2,{id:"ajax\uB85C-csrf\uAC00-\uC131\uACF5\uD558\uB294-\uACBD\uC6B0",children:"ajax\uB85C CSRF\uAC00 \uC131\uACF5\uD558\uB294 \uACBD\uC6B0"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-txt",children:"CORS\uAC00 Access-Control-Allow-Origin: * + Access-Control-Allow-Credentials: true \uB85C \uC124\uC815\uB41C \uACBD\uC6B0\r\n\r\nPreflight \uC694\uCCAD \uC5C6\uC774 \uB2E8\uC21C \uC694\uCCAD(Simple Request)\uC73C\uB85C \uC694\uCCAD\uD560 \uACBD\uC6B0\r\n- Method: GET, HEAD, POST \uC911 \uD558\uB098\uB85C \uC124\uC815\r\n- Content-Type\uC774 application/x-www-form-urlencoded, multipart/form-data, text/plain \uC911 \uD558\uB098\uB85C \uC124\uC815\r\n- \uC694\uCCAD \uD5E4\uB354\uC5D0 \uCEE4\uC2A4\uD140 \uD5E4\uB354\uAC00 \uC5C6\uB294 \uACBD\uC6B0\r\n- XMLHttpRequest\uC758 \uACBD\uC6B0 XMLHttpRequest.withCredentials = true;\n"})}),"\n",(0,o.jsx)(r.h2,{id:"\uBC29\uC9C0",children:"\uBC29\uC9C0"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-txt",children:"1. Origin \uD5E4\uB354 \uAC80\uC99D\r\n2. Referrer \uD5E4\uB354 \uAC80\uC99D\r\n3. X-CSRF-Token \uD5E4\uB354 \uAC80\uC99D\r\n4. SameSite Cookie \uC18D\uC131 \uC124\uC815 (Strict, Lax)\r\n5. CORS \uC124\uC815\n"})})]})}function h(e={}){let{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,o.jsx)(r,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},255511:function(e,r,n){n.d(r,{R:()=>i,x:()=>c});var t=n(596363);let o={},s=t.createContext(o);function i(e){let r=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),t.createElement(s.Provider,{value:r},e.children)}}}]);