"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["399337"],{102117:function(e,n,r){r.r(n),r.d(n,{frontMatter:()=>s,toc:()=>l,default:()=>u,metadata:()=>t,assets:()=>c,contentTitle:()=>a});var t=JSON.parse('{"id":"x algorithm/algorithm Distribution \uBD84\uBC30","title":"\uBD84\uBC30 \uAE30\uBC95","description":"Weighted Distribution","source":"@site/docs/x algorithm/algorithm Distribution \uBD84\uBC30.md","sourceDirName":"x algorithm","slug":"/x algorithm/algorithm Distribution \uBD84\uBC30","permalink":"/docs/x algorithm/algorithm Distribution \uBD84\uBC30","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\uAC10\uC9C0","permalink":"/docs/x algorithm/algorithm Detection \uAC10\uC9C0"},"next":{"title":"Dynamic Programming (\uB3D9\uC801 \uACC4\uD68D\uBC95)","permalink":"/docs/x algorithm/algorithm Dynamic Programming - \uB3D9\uC801 \uACC4\uD68D\uBC95"}}'),i=r(447259),o=r(255511);let s={},a="\uBD84\uBC30 \uAE30\uBC95",c={},l=[{value:"Weighted Distribution",id:"weighted-distribution",level:2},{value:"latency Distribution",id:"latency-distribution",level:2}];function d(e){let n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"\uBD84\uBC30-\uAE30\uBC95",children:"\uBD84\uBC30 \uAE30\uBC95"})}),"\n",(0,i.jsx)(n.h2,{id:"weighted-distribution",children:"Weighted Distribution"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"\uB09C\uC218\uB97C \uC774\uC6A9\uD574\uC11C \uC120\uD0DD\uC744 \uACB0\uC815\uD55C\uB2E4."}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"weight\uB300\uC2E0 \uB2E4\uB978 \uAC12\uC744 \uC0AC\uC6A9\uAC00\uB2A5 (e.g. latency...)"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'const servers = [\r\n  { name: "Server1", weight: 0.5 },\r\n  { name: "Server2", weight: 0.5 },\r\n  { name: "Server3", weight: 0.5 },\r\n];\r\n\r\nfunction getWeightedServer() {\r\n  const totalWeight = servers.reduce((a, b) => a + b.weight, 0);\r\n  const random = Math.random() * totalWeight;\r\n  let cumulativeWeight = 0;\r\n\r\n  for (const server of servers) {\r\n    cumulativeWeight += server.weight;\r\n    console.log("cumulativeWeight:", cumulativeWeight);\r\n    console.log("random:", random);\r\n    if (random < cumulativeWeight) {\r\n      return server.name;\r\n    }\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nconst selectedServer = getWeightedServer();\r\nconsole.log("Selected Server:", selectedServer);\n'})}),"\n",(0,i.jsx)(n.h2,{id:"latency-distribution",children:"latency Distribution"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"\uB09C\uC218\uB97C \uC774\uC6A9\uD574\uC11C \uC120\uD0DD\uC744 \uACB0\uC815\uD55C\uB2E4."}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"\uD655\uB960 \uACC4\uC0B0! = \uC120\uD0DD\uD55C \uB300\uC0C1 / (\uBE44\uAD50\uB300\uC0C1 + \uBE44\uAD50\uB300\uC0C1 + \uBE44\uAD50\uB300\uC0C1)"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'// \uC11C\uBC84 \uC751\uB2F5 \uC9C0\uC5F0 \uC2DC\uAC04\r\nconst currentVersion = {\r\n  name: "CurrentVersion",\r\n  latency: 100, // \uD604\uC7AC \uBC84\uC804\uC758 \uC751\uB2F5 \uC9C0\uC5F0 \uC2DC\uAC04 (\uC608: \uBC00\uB9AC\uCD08 \uB2E8\uC704)\r\n};\r\n\r\nconst canaryVersion = {\r\n  name: "CanaryVersion",\r\n  latency: 50, // \uCE74\uB098\uB9AC \uBC84\uC804\uC758 \uC751\uB2F5 \uC9C0\uC5F0 \uC2DC\uAC04 (\uC608: \uBC00\uB9AC\uCD08 \uB2E8\uC704)\r\n};\r\n\r\n// \uC11C\uBC84 \uC120\uD0DD\r\nfunction getServer() {\r\n  const random = Math.random(); // 0 \uC774\uC0C1 1 \uBBF8\uB9CC\uC758 \uB09C\uC218 \uC0DD\uC131\r\n\r\n  // \uCE74\uB098\uB9AC \uC11C\uBC84 \uC120\uD0DD *\uD655\uB960 \uACC4\uC0B0*\r\n  const canaryProbability = canaryVersion.latency / (currentVersion.latency + canaryVersion.latency);\r\n\r\n  if (random < canaryProbability) {\r\n    return canaryVersion.name; // \uCE74\uB098\uB9AC \uC11C\uBC84 \uC120\uD0DD\r\n  } else {\r\n    return currentVersion.name; // \uD604\uC7AC \uBC84\uC804 \uC11C\uBC84 \uC120\uD0DD\r\n  }\r\n}\r\n\r\n// \uD14C\uC2A4\uD2B8\r\nconst selectedServer = getServer();\r\nconsole.log("Selected Server:", selectedServer);\n'})})]})}function u(e={}){let{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},255511:function(e,n,r){r.d(n,{R:()=>s,x:()=>a});var t=r(596363);let i={},o=t.createContext(i);function s(e){let n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);