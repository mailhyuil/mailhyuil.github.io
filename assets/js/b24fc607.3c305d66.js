"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[997469],{529087:(r,e,n)=>{n.d(e,{R:()=>i,x:()=>o});var t=n(596363);const c={},a=t.createContext(c);function i(r){const e=t.useContext(a);return t.useMemo(function(){return"function"==typeof r?r(e):{...e,...r}},[e,r])}function o(r){let e;return e=r.disableParentContext?"function"==typeof r.components?r.components(c):r.components||c:i(r.components),t.createElement(a.Provider,{value:e},r.children)}},926818:(r,e,n)=>{n.r(e),n.d(e,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"angular/angular base provider abstract service","title":"angular base provider abstract service","description":"abstract service","source":"@site/docs/angular/angular base provider abstract service.md","sourceDirName":"angular","slug":"/angular/angular base provider abstract service","permalink":"/docs/angular/angular base provider abstract service","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"angular dynamic title","permalink":"/docs/angular/angular base provider Title"},"next":{"title":"angular providers & viewProviders","permalink":"/docs/angular/angular base provider providers & viewProviders"}}');var c=n(447259),a=n(529087);const i={},o="angular base provider abstract service",s={},l=[{value:"abstract service",id:"abstract-service",level:2},{value:"extended service",id:"extended-service",level:2},{value:"useFactory",id:"usefactory",level:2}];function d(r){const e={code:"code",h1:"h1",h2:"h2",header:"header",pre:"pre",...(0,a.R)(),...r.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(e.header,{children:(0,c.jsx)(e.h1,{id:"angular-base-provider-abstract-service",children:"angular base provider abstract service"})}),"\n",(0,c.jsx)(e.h2,{id:"abstract-service",children:"abstract service"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-ts",children:'export const DEVICE_SERVICE = new InjectionToken<string>("DeviceService");\r\n\r\nexport abstract class AbstractDeviceService {\r\n  protected http = inject(HttpClient);\r\n  protected router = inject(Router);\r\n  public update$ = new Subject<void>(); // public \uc548\ubd99\uc5ec\ub3c4 \uae30\ubcf8\uc774 public\r\n\r\n  public abstract abstractPublicFunction(): Promise<void>;\r\n  protected abstract abstractPrivateFunction(): Promise<void>;\r\n\r\n  async templateFunction() {\r\n    await this.commonPrivateFunction();\r\n    await this.abstractFunction();\r\n    this.commonPublicFucntion();\r\n    this.update$.next();\r\n  }\r\n\r\n  protected async commonPrivateFunction() {\r\n    // logic\r\n  }\r\n\r\n  public commonPublicFucntion() {\r\n    // logic...\r\n  }\r\n}\n'})}),"\n",(0,c.jsx)(e.h2,{id:"extended-service",children:"extended service"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-ts",children:'@Injectable({\r\n  providedIn: "root",\r\n})\r\nexport class ElectronService extends AbstractDeviceService implements OnDestroy {\r\n  electron = "electron" in window ? (window.electron as any) : null;\r\n\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.update$.complete();\r\n  }\r\n\r\n  async abstractPublicFunction() {\r\n    // ... logic\r\n  }\r\n\r\n  async abstractPrivateFunction() {\r\n    // ... logic\r\n  }\r\n}\r\n\r\n@Injectable({\r\n  providedIn: "root",\r\n})\r\nexport class AndroidService extends AbstractDeviceService implements OnDestroy {\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.update$.complete();\r\n  }\r\n\r\n  async abstractPublicFunction() {\r\n    // ... logic\r\n  }\r\n\r\n  async abstractPrivateFunction() {\r\n    // ... logic\r\n  }\r\n}\n'})}),"\n",(0,c.jsx)(e.h2,{id:"usefactory",children:"useFactory"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-ts",children:"{\r\n  provide: DEVICE_SERVICE,\r\n  useFactory: () => {\r\n    if (isPlatform('electron')) {\r\n      console.log('Electron Platform');\r\n      const electronService = inject(ElectronService);\r\n      return electronService;\r\n    }\r\n    if (isPlatform('android')) {\r\n      console.log('Android Platform');\r\n      const androidService = inject(AndroidService);\r\n      return androidService;\r\n    }\r\n    throw new Error('\uc0ac\uc6a9\ud560 \uc218 \uc5c6\ub294 \ud50c\ub7ab\ud3fc\uc785\ub2c8\ub2e4.');\r\n  },\r\n},\n"})})]})}function u(r={}){const{wrapper:e}={...(0,a.R)(),...r.components};return e?(0,c.jsx)(e,{...r,children:(0,c.jsx)(d,{...r})}):d(r)}}}]);