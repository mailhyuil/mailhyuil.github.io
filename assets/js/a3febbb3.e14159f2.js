"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[965093],{529087:(t,e,s)=>{s.d(e,{R:()=>a,x:()=>p});var n=s(596363);const r={},o=n.createContext(r);function a(t){const e=n.useContext(o);return n.useMemo(function(){return"function"==typeof t?t(e):{...e,...t}},[e,t])}function p(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(r):t.components||r:a(t.components),n.createElement(o.Provider,{value:e},t.children)}},751560:(t,e,s)=>{s.r(e),s.d(e,{assets:()=>l,contentTitle:()=>p,default:()=>u,frontMatter:()=>a,metadata:()=>n,toc:()=>i});const n=JSON.parse('{"id":"nestjs/nest passport jwt","title":"nest oauth passport","description":"https \ud658\uacbd\uc5d0\uc11c\ub9cc \uc815\uc0c1\uc801\uc73c\ub85c \ud14c\uc2a4\ud2b8\uac00 \uac00\ub2a5\ud558\ub2e4","source":"@site/docs/nestjs/nest passport jwt.md","sourceDirName":"nestjs","slug":"/nestjs/nest passport jwt","permalink":"/docs/nestjs/nest passport jwt","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"nest pagination offset","permalink":"/docs/nestjs/nest pagination offset"},"next":{"title":"nest oauth passport","permalink":"/docs/nestjs/nest passport oauth"}}');var r=s(447259),o=s(529087);const a={},p="nest oauth passport",l={},i=[{value:"install",id:"install",level:2},{value:"strategy \uc0dd\uc131",id:"strategy-\uc0dd\uc131",level:2},{value:"guard \uc0ac\uc6a9",id:"guard-\uc0ac\uc6a9",level:2}];function c(t){const e={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...t.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"nest-oauth-passport",children:"nest oauth passport"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"https \ud658\uacbd\uc5d0\uc11c\ub9cc \uc815\uc0c1\uc801\uc73c\ub85c \ud14c\uc2a4\ud2b8\uac00 \uac00\ub2a5\ud558\ub2e4"}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"https \ud658\uacbd\uc774 \uc544\ub2c8\ub77c\uba74 ngrok \uc744 \uc0ac\uc6a9\ud574\uc11c (http\ub97c https\ud658\uacbd\uc73c\ub85c \ubc14\uafbc url\uc744 \uc900\ub2e4) \ud14c\uc2a4\ud2b8 \ud558\uc790!"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"install",children:"install"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sh",children:"npm i passport\r\nnpm i @nestjs/passport\r\n\r\n# jwt\r\nnpm i @nestjs/jwt\r\nnpm i passport-jwt\r\nnpm i -D @types/passport-jwt\n"})}),"\n",(0,r.jsx)(e.h2,{id:"strategy-\uc0dd\uc131",children:"strategy \uc0dd\uc131"}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"\uc0dd\uc131\ub41c strategy\ub97c module\uc758 providers\uc5d0 \ub4f1\ub85d"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:'import { ExtractJwt, Strategy } from "passport-jwt";\r\nimport { PassportStrategy } from "@nestjs/passport";\r\nimport { Injectable } from "@nestjs/common";\r\nimport { jwtConstants } from "./constants";\r\n\r\n@Injectable()\r\nexport class JwtStrategy extends PassportStrategy(Strategy) {\r\n  constructor() {\r\n    super({\r\n      jwtFromRequest: ExtractJwt.fromAuthHeaderAsBearerToken(),\r\n      ignoreExpiration: false,\r\n      secretOrKey: jwtConstants.secret,\r\n    });\r\n  }\r\n\r\n  async validate(payload: any) {\r\n    return { userId: payload.sub, username: payload.username };\r\n  }\r\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"guard-\uc0ac\uc6a9",children:"guard \uc0ac\uc6a9"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ts",children:'import { Controller, Request, Post, UseGuards } from "@nestjs/common";\r\nimport { AuthGuard } from "@nestjs/passport";\r\n\r\n@Controller()\r\nexport class AppController {\r\n  @UseGuards(AuthGuard("jwt"))\r\n  @Post("auth/login")\r\n  async login(@Request() req) {\r\n    return req.user;\r\n  }\r\n}\n'})})]})}function u(t={}){const{wrapper:e}={...(0,o.R)(),...t.components};return e?(0,r.jsx)(e,{...t,children:(0,r.jsx)(c,{...t})}):c(t)}}}]);