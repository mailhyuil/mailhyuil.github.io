"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["198479"],{749334:function(n,e,r){r.r(e),r.d(e,{frontMatter:()=>t,toc:()=>m,default:()=>i,metadata:()=>a,assets:()=>l,contentTitle:()=>s});var a=JSON.parse('{"id":"x design pattern/Behavioral command bus","title":"command bus","description":"command\uB97C handler\uC5D0\uAC8C \uC804\uB2EC\uD558\uB294 \uC5ED\uD560\uC744 \uD558\uB294 \uAC1D\uCCB4\uB97C \uC815\uC758\uD558\uC5EC","source":"@site/docs/x design pattern/Behavioral command bus.md","sourceDirName":"x design pattern","slug":"/x design pattern/Behavioral command bus","permalink":"/docs/x design pattern/Behavioral command bus","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"chain of responsibility (\uCC45\uC784 \uC5F0\uC1C4 \uD328\uD134)","permalink":"/docs/x design pattern/Behavioral Chain of Responsibility - CoR"},"next":{"title":"design pattern Command Pattern With Receiver","permalink":"/docs/x design pattern/Behavioral command with receiver"}}'),o=r(447259),d=r(255511);let t={},s="command bus",l={},m=[{value:"command",id:"command",level:2},{value:"handler",id:"handler",level:2},{value:"command bus",id:"command-bus-1",level:2}];function c(n){let e={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,d.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"command-bus",children:"command bus"})}),"\n",(0,o.jsxs)(e.blockquote,{children:["\n",(0,o.jsx)(e.p,{children:"command\uB97C handler\uC5D0\uAC8C \uC804\uB2EC\uD558\uB294 \uC5ED\uD560\uC744 \uD558\uB294 \uAC1D\uCCB4\uB97C \uC815\uC758\uD558\uC5EC"}),"\n",(0,o.jsxs)(e.blockquote,{children:["\n",(0,o.jsx)(e.p,{children:"command\uB97C \uC815\uC758\uC640 \uC2E4\uD589\uC744 \uBD84\uB9AC\uD558\uB294 \uD328\uD134"}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"command",children:"command"}),"\n",(0,o.jsxs)(e.blockquote,{children:["\n",(0,o.jsx)(e.p,{children:"\uC791\uC5C5\uC744 \uC815\uC758\uD55C \uAC1D\uCCB4"}),"\n"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-ts",children:"export class KillDragonCommand {\r\n  constructor(public readonly heroId: string, public readonly dragonId: string) {}\r\n}\n"})}),"\n",(0,o.jsx)(e.h2,{id:"handler",children:"handler"}),"\n",(0,o.jsxs)(e.blockquote,{children:["\n",(0,o.jsx)(e.p,{children:"command\uB97C \uCC98\uB9AC\uD558\uB294 \uAC1D\uCCB4"}),"\n"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-ts",children:"@CommandHandler(KillDragonCommand)\r\nexport class KillDragonHandler implements ICommandHandler<KillDragonCommand> {\r\n  constructor(private repository: HeroRepository) {}\r\n\r\n  async execute(command: KillDragonCommand) {\r\n    const { heroId, dragonId } = command;\r\n    const hero = this.repository.findOneById(+heroId);\r\n\r\n    hero.killEnemy(dragonId);\r\n    await this.repository.persist(hero);\r\n  }\r\n}\n"})}),"\n",(0,o.jsx)(e.h2,{id:"command-bus-1",children:"command bus"}),"\n",(0,o.jsxs)(e.blockquote,{children:["\n",(0,o.jsx)(e.p,{children:"command\uB97C handler\uC5D0\uAC8C \uC804\uB2EC\uD558\uB294 \uAC1D\uCCB4"}),"\n"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-ts",children:'class SimpleCommandBus {\r\n    private Map<Class<?>, CommandHandler<?>> handlers = new HashMap<>();\r\n\r\n    public <C> void registerHandler(Class<C> commandType, CommandHandler<C> handler) {\r\n        handlers.put(commandType, handler);\r\n    }\r\n\r\n    public void dispatch(Object command) {\r\n        CommandHandler handler = handlers.get(command.getClass());\r\n        if (handler != null) {\r\n            handler.handle(command);\r\n        } else {\r\n            throw new IllegalArgumentException("No handler found for " + command.getClass());\r\n        }\r\n    }\r\n}\r\n\r\nclass CommandBus {\r\n    private handlers = new Map<string, ICommandHandler<CommandBase>>();\r\n    execute(command: Command) {\r\n    const commandId = this.getCommandId(command);\r\n    const handler = this.handlers.get(commandId);\r\n    if (!handler) {\r\n      const commandName = this.getCommandName(command);\r\n      throw new CommandHandlerNotFoundException(commandName);\r\n    }\r\n    this._publisher.publish(command);\r\n    return handler.execute(command);\r\n  }\r\n}\n'})})]})}function i(n={}){let{wrapper:e}={...(0,d.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(c,{...n})}):c(n)}},255511:function(n,e,r){r.d(e,{R:()=>t,x:()=>s});var a=r(596363);let o={},d=a.createContext(o);function t(n){let e=a.useContext(d);return a.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:t(n.components),a.createElement(d.Provider,{value:e},n.children)}}}]);