"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["256460"],{785262:function(e,n,r){r.r(n),r.d(n,{frontMatter:()=>d,toc:()=>c,default:()=>g,metadata:()=>s,assets:()=>l,contentTitle:()=>o});var s=JSON.parse('{"id":"db-postgres/pgvector","title":"pgvector","description":"postgres settings","source":"@site/docs/db-postgres/pgvector.md","sourceDirName":"db-postgres","slug":"/db-postgres/pgvector","permalink":"/docs/db-postgres/pgvector","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"DB PostgreSQL","permalink":"/docs/category/db-postgresql"},"next":{"title":"postgres FTS (Full Text Search)","permalink":"/docs/db-postgres/postgres FTS - Full Text Search"}}'),t=r(447259),i=r(255511);let d={},o="pgvector",l={},c=[{value:"postgres settings",id:"postgres-settings",level:2},{value:"init.sql",id:"initsql",level:2},{value:"INSERT",id:"insert",level:2},{value:"SELECT",id:"select",level:2},{value:"INDEX",id:"index",level:2}];function a(e){let n={code:"code",h1:"h1",h2:"h2",header:"header",pre:"pre",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"pgvector",children:"pgvector"})}),"\n",(0,t.jsx)(n.h2,{id:"postgres-settings",children:"postgres settings"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"services:\r\n  db:\r\n    image: pgvector/pgvector:pg16\r\n    container_name: postgres\r\n    ports:\r\n      - 5432:5432\r\n    restart: always\r\n    environment:\r\n      - POSTGRES_DB=mydb\r\n      - POSTGRES_USER=postgres\r\n      - POSTGRES_PASSWORD=postgres\r\n    volumes:\r\n      - pgdata:/var/lib/postgresql/data\r\n      - ./postgres/init.sql:/docker-entrypoint-initdb.d/init.sql\n"})}),"\n",(0,t.jsx)(n.h2,{id:"initsql",children:"init.sql"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE chatbot_vector (\r\n    id SERIAL PRIMARY KEY,\r\n    content TEXT, -- \uD14D\uC2A4\uD2B8 \uB370\uC774\uD130 \uC800\uC7A5\r\n    metadata JSONB, -- \uBA54\uD0C0\uB370\uC774\uD130 \uC800\uC7A5\r\n    embedding vector(1536)  -- vector \uB370\uC774\uD130 \uC800\uC7A5, OpenAI\uC758 text-embedding-ada-002 \uBAA8\uB378 \uAE30\uC900\r\n    --------------------------------\r\n    -- \uCD94\uAC00\uC801\uC778 \uB370\uC774\uD130 \uC800\uC7A5 (RDBMS \uC6A9)\r\n    -- username TEXT,\r\n    -- created_at TIMESTAMP DEFAULT NOW()\r\n);\n"})}),"\n",(0,t.jsx)(n.h2,{id:"insert",children:"INSERT"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"INSERT INTO users (embedding) VALUES ('[0.1, 0.2, 0.3, ..., 0.9]');\n"})}),"\n",(0,t.jsx)(n.h2,{id:"select",children:"SELECT"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"-- <-> (L2(\uC720\uD074\uB9AC\uB4DC) \uAC70\uB9AC): \uAC12\uC774 \uC791\uC744\uC218\uB85D \uC720\uC0AC (\uB450 \uBCA1\uD130 \uC0AC\uC774\uC758 \uC9C1\uC120 \uAC70\uB9AC)\r\n-- \uC774\uBBF8\uC9C0 \uAC80\uC0C9, \uACF5\uAC04 \uAE30\uBC18 \uCD94\uCC9C, \uBCA1\uD130 \uD06C\uAE30\uC640 \uBC29\uD5A5 \uBAA8\uB450 \uACE0\uB824\r\nSELECT * FROM users ORDER BY embedding <-> '[0.1, 0.2, 0.3, ..., 0.9]' LIMIT 5;\r\n-- <=> (\uCF54\uC0AC\uC778 \uAC70\uB9AC): \uAC12\uC774 \uC791\uC744\uC218\uB85D \uC720\uC0AC (\uB450 \uBCA1\uD130\uC758 \uBC29\uD5A5(\uAC01\uB3C4)\uC744 \uAE30\uBC18\uC73C\uB85C \uC720\uC0AC\uB3C4\uB97C \uCE21\uC815)\r\n-- \uBB38\uC11C \uAC80\uC0C9, NLP, \uCD94\uCC9C \uC2DC\uC2A4\uD15C (\uBCA1\uD130 \uBC29\uD5A5\uC774 \uC911\uC694\uD55C \uACBD\uC6B0)\r\nSELECT * FROM users ORDER BY embedding <=> '[0.1, 0.2, 0.3, ..., 0.9]' LIMIT 5;\r\n-- <#> (\uB0B4\uC801): \uAC12\uC774 \uD074\uC218\uB85D \uC720\uC0AC (\uB450 \uBCA1\uD130\uC758 \uD06C\uAE30\uC640 \uBC29\uD5A5\uC744 \uACE0\uB824\uD558\uC5EC \uACC4\uC0B0\uD558\uB294 \uAC12.)\r\n-- \uAC80\uC0C9 \uB7AD\uD0B9, \uCD94\uCC9C \uC2DC\uC2A4\uD15C, \uBCA1\uD130 \uD06C\uAE30\uAC00 \uC911\uC694\uD55C \uACBD\uC6B0\r\nSELECT * FROM users ORDER BY embedding <#> '[0.1, 0.2, 0.3, ..., 0.9]' LIMIT 5;\n"})}),"\n",(0,t.jsx)(n.h2,{id:"index",children:"INDEX"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"-- HNSW(\uACC4\uCE35\uC801 \uD0D0\uC0C9 \uAC00\uB2A5\uD55C \uC791\uC740 \uC138\uACC4)\r\nCREATE INDEX ON users USING hnsw (embedding);\r\n-- DiskANN(DiskANN) \uADFC\uC0AC\uD55C \uC778\uC811 \uB514\uC2A4\uD06C\r\nCREATE INDEX ON users USING diskann (embedding);\n"})})]})}function g(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},255511:function(e,n,r){r.d(n,{R:()=>d,x:()=>o});var s=r(596363);let t={},i=s.createContext(t);function d(e){let n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);