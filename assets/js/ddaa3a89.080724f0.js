"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["486501"],{839533:function(e,n,c){c.r(n),c.d(n,{frontMatter:()=>s,toc:()=>a,default:()=>k,metadata:()=>o,assets:()=>i,contentTitle:()=>t});var o=JSON.parse('{"id":"db/db \uB3D9\uC2DC\uC131 \uC81C\uC5B4 lock shared lock vs exclusive lock","title":"db transaction lock shared lock vs exclusive lock","description":"\uC8FC\uC758","source":"@site/docs/db/db \uB3D9\uC2DC\uC131 \uC81C\uC5B4 lock shared lock vs exclusive lock.md","sourceDirName":"db","slug":"/db/db \uB3D9\uC2DC\uC131 \uC81C\uC5B4 lock shared lock vs exclusive lock","permalink":"/docs/db/db \uB3D9\uC2DC\uC131 \uC81C\uC5B4 lock shared lock vs exclusive lock","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"db transaction lock Dead lock (\uB370\uB4DC \uB77D)","permalink":"/docs/db/db \uB3D9\uC2DC\uC131 \uC81C\uC5B4 lock deadlock"},"next":{"title":"prisma lock usecase \uC0AC\uC6A9 \uC608\uC2DC","permalink":"/docs/db/db \uB3D9\uC2DC\uC131 \uC81C\uC5B4 lock usecase \uC0AC\uC6A9 \uC608\uC2DC"}}'),l=c(447259),r=c(255511);let s={},t="db transaction lock shared lock vs exclusive lock",i={},a=[{value:"Shared Lock (\uACF5\uC720 \uB77D, S Lock, Read Lock)",id:"shared-lock-\uACF5\uC720-\uB77D-s-lock-read-lock",level:2},{value:"Exclusive Lock (\uBC30\uD0C0 \uB77D, X Lock, Write Lock)",id:"exclusive-lock-\uBC30\uD0C0-\uB77D-x-lock-write-lock",level:2}];function d(e){let n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"db-transaction-lock-shared-lock-vs-exclusive-lock",children:"db transaction lock shared lock vs exclusive lock"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"\uC8FC\uC758"}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"lock\uC774 \uAC78\uB824\uC788\uC5B4\uB3C4 insert\uB294 \uAC00\uB2A5\uD558\uB2E4. (lock\uC740 \uAE30\uC874 \uB370\uC774\uD130\uB4E4\uC5D0\uAC8C\uB9CC \uAC78\uB9AC\uAE30 \uB54C\uBB38\uC5D0 \uC0C8\uB85C \uCD94\uAC00\uB418\uB294 \uAC12\uC5D0\uB294 \uC758\uBBF8\uAC00 \uC5C6\uAE30 \uB54C\uBB38\uC774\uB2E4)"}),"\n",(0,l.jsx)(n.p,{children:"exclusive lock\uC774 \uAC78\uB824\uC788\uC5B4\uB3C4 insert\uB418\uB294 \uB370\uC774\uD130\uAC00 \uAE30\uC874 \uB370\uC774\uD130\uC640 \uAD00\uB828\uC774 \uC5C6\uB2E4\uBA74 insert\uB294 \uAC00\uB2A5\uD558\uB2E4."}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"shared-lock-\uACF5\uC720-\uB77D-s-lock-read-lock",children:"Shared Lock (\uACF5\uC720 \uB77D, S Lock, Read Lock)"}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"\uAC8C\uC784\uC744 \uC608\uB85C \uB4E4\uBA74 \uC5EC\uB7EC \uD50C\uB808\uC774\uC5B4\uAC00 \uB3D9\uC2DC\uC5D0 \uC0AC\uC6A9\uD560 \uC218 \uC788\uB294 \uBC29\uC5B4 \uAE30\uC220\uC774\uB2E4."}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"\uC0C1\uB300\uBC29\uC774 \uD50C\uB808\uC774\uC5B4\uB97C \uBCFC \uC218 \uC788\uC9C0\uB9CC (read o), \uACF5\uACA9\uD560 \uC218 \uC5C6\uB2E4. (write x)"}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Shared lock\uC744 \uD68D\uB4DD\uD558\uAE30 \uC704\uD574\uC11C\uB294 \uD574\uB2F9 \uAC12\uC5D0 \uB2E4\uB978 \uBC30\uD0C0\uB77D\uC774 \uC788\uC5B4\uB3C4 \uB41C\uB2E4."}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"FOR SHARE \uB85C \uD68D\uB4DD"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"-- transaction 1\r\nBEGIN;\r\nSELECT * FROM table_name FOR SHARE;\r\nCOMMIT;\r\n-- transaction 2\r\nBEGIN;\r\nSELECT * FROM table_name FOR SHARE; -- \uAC00\uB2A5\r\nCOMMIT;\r\n-- transaction 3\r\nBEGIN;\r\nUPDATE users SET name='test' where name='sb'; -- transaction 1\uC774 commit\uB418\uAE30 \uC804\uAE4C\uC9C0 \uB300\uAE30\r\nCOMMIT;\n"})}),"\n",(0,l.jsx)(n.h2,{id:"exclusive-lock-\uBC30\uD0C0-\uB77D-x-lock-write-lock",children:"Exclusive Lock (\uBC30\uD0C0 \uB77D, X Lock, Write Lock)"}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"\uC624\uC9C1 \uD55C \uD50C\uB808\uC774\uC5B4\uB9CC \uC0AC\uC6A9\uD560 \uC218 \uC788\uB294 \uC740\uC2E0 \uAE30\uC220"}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"\uB2E4\uB978 \uD50C\uB808\uC774\uC5B4\uAC00 \uBCFC \uC218\uB3C4 \uC5C6\uACE0 \uACF5\uACA9\uD560 \uC218\uB3C4 \uC5C6\uB2E4. (read x, write x)"}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Exclusive lock\uC744 \uD68D\uB4DD\uD558\uAE30 \uC704\uD574\uC11C\uB294 \uD574\uB2F9 \uAC12\uC5D0 \uC5B4\uB5A4\uD55C \uACF5\uC720\uB77D\uB3C4 \uC5C6\uC5B4\uC57C\uD55C\uB2E4."}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"FOR UPDATE \uB85C \uD68D\uB4DD (row-level lock)"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"-- transaction 1\r\nBEGIN;\r\nSELECT * FROM table_name FOR UPDATE;\r\nCOMMIT;\r\n-- transaction 2\r\nBEGIN;\r\nSELECT * FROM table_name FOR UPDATE; -- transaction 1\uC774 commit\uB418\uAE30 \uC804\uAE4C\uC9C0 \uB300\uAE30\r\nCOMMIT;\r\n-- transaction 3\r\nBEGIN;\r\nUPDATE users SET name='test' where name='sb'; -- transaction 1\uC774 commit\uB418\uAE30 \uC804\uAE4C\uC9C0 \uB300\uAE30\r\nCOMMIT;\n"})})]})}function k(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},255511:function(e,n,c){c.d(n,{R:()=>s,x:()=>t});var o=c(596363);let l={},r=o.createContext(l);function s(e){let n=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:s(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);