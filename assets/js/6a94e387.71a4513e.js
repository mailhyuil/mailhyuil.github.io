"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[597092],{529087:(n,r,e)=>{e.d(r,{R:()=>l,x:()=>o});var a=e(596363);const t={},i=a.createContext(t);function l(n){const r=a.useContext(i);return a.useMemo(function(){return"function"==typeof n?n(r):{...r,...n}},[r,n])}function o(n){let r;return r=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:l(n.components),a.createElement(i.Provider,{value:r},n.children)}},596909:(n,r,e)=>{e.r(r),e.d(r,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>l,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"spring/spring Pagination - \ud398\uc774\uc9d5 \ucc98\ub9ac","title":"Pagination (\ud398\uc774\uc9d5 \ucc98\ub9ac)","description":"pagination \ucc98\ub9ac\uc6a9 \uac1d\uccb4","source":"@site/docs/spring/spring Pagination - \ud398\uc774\uc9d5 \ucc98\ub9ac.md","sourceDirName":"spring","slug":"/spring/spring Pagination - \ud398\uc774\uc9d5 \ucc98\ub9ac","permalink":"/docs/spring/spring Pagination - \ud398\uc774\uc9d5 \ucc98\ub9ac","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Spring Mybatis \uc138\ud305 \uc21c\uc11c!","permalink":"/docs/spring/spring Mybatis"},"next":{"title":"Resources","permalink":"/docs/spring/spring Resources"}}');var t=e(447259),i=e(529087);const l={},o="Pagination (\ud398\uc774\uc9d5 \ucc98\ub9ac)",s={},c=[{value:"pagination \ucc98\ub9ac\uc6a9 \uac1d\uccb4",id:"pagination-\ucc98\ub9ac\uc6a9-\uac1d\uccb4",level:2},{value:"mySQL pagination query",id:"mysql-pagination-query",level:2},{value:"controller",id:"controller",level:2},{value:"view",id:"view",level:2},{value:"pagination \ucc98\ub9ac\uc6a9 \uac1d\uccb4 + search \ud544\ub4dc",id:"pagination-\ucc98\ub9ac\uc6a9-\uac1d\uccb4--search-\ud544\ub4dc",level:2},{value:"mySQL pagination query + search query",id:"mysql-pagination-query--search-query",level:2},{value:"view + search",id:"view--search",level:2},{value:"QueryDsl",id:"querydsl",level:2}];function g(n){const r={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",pre:"pre",ul:"ul",...(0,i.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.header,{children:(0,t.jsx)(r.h1,{id:"pagination-\ud398\uc774\uc9d5-\ucc98\ub9ac",children:"Pagination (\ud398\uc774\uc9d5 \ucc98\ub9ac)"})}),"\n",(0,t.jsx)(r.h2,{id:"pagination-\ucc98\ub9ac\uc6a9-\uac1d\uccb4",children:"pagination \ucc98\ub9ac\uc6a9 \uac1d\uccb4"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:"public class Pagination {\r\n    private int PAGE_SIZE; // \ud55c\ubc88\uc5d0 \ubcf4\uc5ec\uc904 \ud398\uc774\uc9c0 \uc218\r\n    private int LIST_SIZE; // \ud55c\ubc88\uc5d0 \ubcf4\uc5ec\uc904 \ub9ac\uc2a4\ud2b8 \uc218\r\n    private int startPage; // \ud55c\ubc88\uc5d0 \ubcf4\uc774\ub294 \ud398\uc774\uc9c0 \uc911 \uccab\ubc88\uc9f8 \ubc88\ud638\r\n    private int endPage; //\ud55c\ubc88\uc5d0 \ubcf4\uc774\ub294 \ud398\uc774\uc9c0 \uc911 \ub9c8\uc9c0\ub9c9 \ubc88\ud638\r\n    private int theLastPage; // \ub9c8\uc9c0\ub9c9 \ud398\uc774\uc9c0 \ubc88\ud638\r\n    private int currentPage; // \ud604\uc7ac \ud398\uc774\uc9c0\r\n    private int cri; // criterion or cursor // \uc870\ud68c\uc2dc \uc0ac\uc6a9\ud560 \uae30\uc900(\ucee4\uc11c) \uc5ed\ud560\r\n\r\n    private boolean prev;\r\n    private boolean next;\r\n\r\n    public void paginate(int currentPage, int totalListSize, int PAGE_SIZE, int LIST_SIZE) {\r\n        this.PAGE_SIZE = PAGE_SIZE;\r\n        this.LIST_SIZE = LIST_SIZE;\r\n\r\n        this.theLastPage = (int) Math.ceil(totalListSize / (double) LIST_SIZE); // * int\uac12\uc73c\ub85c\ub9cc \ub098\ub204\uba74 \uc790\ub3d9 \ud615\ubcc0\ud658 \ub3fc\ubc84\ub9b0\ub2e4\r\n\r\n        this.currentPage = currentPage;\r\n\r\n        this.endPage = (int) (Math.ceil(currentPage / (double) PAGE_SIZE)) * PAGE_SIZE;\r\n        this.endPage = endPage > theLastPage ? theLastPage : endPage; // \ub9c8\uc9c0\ub9c9 \ubc88\ud638\uac00 \ucd5c\uc885 \ud398\uc774\uc9c0 \ubc88\ud638\ubcf4\ub2e4 \ud06c\uba74 \ucd5c\uc885 \ud398\uc774\uc9c0 \ubc88\ud638 \ubc18\ud658\r\n\r\n        this.startPage = this.endPage - (PAGE_SIZE - 1);\r\n        this.startPage = startPage < 1 ? 1 : startPage; // \uc2dc\uc791\ubc88\ud638\uac00 1\ubcf4\ub2e4 \uc791\uc73c\uba74 1\uc744 \ubc18\ud658\r\n\r\n        this.cri = (currentPage - 1) * LIST_SIZE;\r\n\r\n        //\uc774\uc804 \ubc84\ud2bc \uc0c1\ud0dc\r\n        this.prev = startPage == 1 ? false : true;\r\n\r\n        //\ub2e4\uc74c \ubc84\ud2bc \uc0c1\ud0dc\r\n        this.next = currentPage >= theLastPage ? false : true;\r\n    }\r\n}\n"})}),"\n",(0,t.jsx)(r.h2,{id:"mysql-pagination-query",children:"mySQL pagination query"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-xml",children:'<select id="getTotalListSize" resultType="int">\r\n    select count(*) as listCnt from bbs\r\n</select>\r\n\r\n<select id="getBoardList" resultType="Bbs">\r\n    SELECT * from bbs limit #{cri}, #{LIST_SIZE}\r\n</select>\n'})}),"\n",(0,t.jsx)(r.h2,{id:"controller",children:"controller"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'@GetMapping("/board")\r\npublic String board(Model model,\r\n                    @RequestParam(required = false, defaultValue = "1") int page){\r\n    int totalListCount = bbsDao.getBoardListCnt();\r\n\r\n    Pagination pagination = new Pagination(); // \ud398\uc774\uc9c0\ub124\uc774\uc158 \uac1d\uccb4 \uc0dd\uc131\r\n\r\n    pagination.paginate(page, totalListCount); // \ud398\uc774\uc9c0\ub124\uc774\uc158 \ucd08\uae30\ud654\r\n\r\n    model.addAttribute("pagination", pagination);\r\n    model.addAttribute("BBS_LIST", bbsDao.getBoardList(pagination));\r\n    return null;\r\n}\n'})}),"\n",(0,t.jsx)(r.h2,{id:"view",children:"view"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-html",children:'<ul style="list-style:none; display: flex">\r\n  <li\r\n    style="padding:.5rem 1rem;margin:2px;background-color:skyblue;color:white;">\r\n    <a th:onclick="|location.href = \'/bbs/board?page=1\'|">&#60;&#60;</a>\r\n  </li>\r\n  <th:block th:if="${pagination.prev}">\r\n    <li\r\n      style="padding:.5rem 1rem;margin:2px;background-color:skyblue;color:white;">\r\n      <a th:onclick="|fn_prev(${pagination.currentPage})|">&#60;</a>\r\n    </li>\r\n  </th:block>\r\n  <th:block\r\n    th:each="index:${#numbers.sequence(pagination.startPage, pagination.endPage)}">\r\n    <li\r\n      th:style="|padding:.5rem 1rem;margin:2px;color:white;${pagination.currentPage==index?\'background-color:red\':\'background-color:skyblue\'}|">\r\n      <a\r\n        th:onclick="|fn_pagination(${index})|"\r\n        th:text="${index}"></a>\r\n    </li>\r\n  </th:block>\r\n  <th:block th:if="${pagination.next}">\r\n    <li\r\n      style="padding:.5rem 1rem;margin:2px;background-color:skyblue;color:white;">\r\n      <a th:onclick="|fn_next(${pagination.currentPage})|">&#62;</a>\r\n    </li>\r\n  </th:block>\r\n  <li\r\n    style="padding:.5rem 1rem;margin:2px;background-color:skyblue;color:white;">\r\n    <a\r\n      th:onclick="|location.href = \'/bbs/board?page=${pagination.theLastPage}\'|"\r\n      >&#62;&#62;</a\r\n    >\r\n  </li>\r\n</ul>\r\n\r\n<script>\r\n  function fn_prev(currentPage) {\r\n    var page = currentPage - 1;\r\n    var url = "/bbs/board";\r\n    url = url + "?page=" + page;\r\n    location.href = url;\r\n  }\r\n\r\n  function fn_pagination(page) {\r\n    var url = "/bbs/board";\r\n    url = url + "?page=" + page;\r\n    location.href = url;\r\n  }\r\n\r\n  function fn_next(currentPage) {\r\n    var page = currentPage + 1;\r\n    var url = "/bbs/board";\r\n    url = url + "?page=" + page;\r\n    location.href = url;\r\n  }\r\n<\/script>\n'})}),"\n",(0,t.jsx)(r.h1,{id:"\ud398\uc774\uc9d5-\ucc98\ub9ac--\uac80\uc0c9",children:"\ud398\uc774\uc9d5 \ucc98\ub9ac + \uac80\uc0c9"}),"\n",(0,t.jsx)(r.h2,{id:"pagination-\ucc98\ub9ac\uc6a9-\uac1d\uccb4--search-\ud544\ub4dc",children:"pagination \ucc98\ub9ac\uc6a9 \uac1d\uccb4 + search \ud544\ub4dc"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'public class Pagination {\r\n    private String search = "";\r\n    private int PAGE_SIZE; // \ud55c\ubc88\uc5d0 \ubcf4\uc5ec\uc904 \ud398\uc774\uc9c0 \uc218\r\n    private int LIST_SIZE; // \ud55c\ubc88\uc5d0 \ubcf4\uc5ec\uc904 \ub9ac\uc2a4\ud2b8 \uc218\r\n    private int startPage; // \ud55c\ubc88\uc5d0 \ubcf4\uc774\ub294 \ud398\uc774\uc9c0 \uc911 \uccab\ubc88\uc9f8 \ubc88\ud638\r\n    private int endPage; //\ud55c\ubc88\uc5d0 \ubcf4\uc774\ub294 \ud398\uc774\uc9c0 \uc911 \ub9c8\uc9c0\ub9c9 \ubc88\ud638\r\n    private int theLastPage; // \ub9c8\uc9c0\ub9c9 \ud398\uc774\uc9c0 \ubc88\ud638\r\n    private int currentPage; // \ud604\uc7ac \ud398\uc774\uc9c0\r\n    private int cri; // criterion or cursor // \uc870\ud68c\uc2dc \uc0ac\uc6a9\ud560 \uae30\uc900(\ucee4\uc11c) \uc5ed\ud560\r\n\r\n    private boolean prev;\r\n    private boolean next;\r\n\r\n    public void paginate(int currentPage, int totalListSize) {\r\n        this.search = this.search == null ? "" : this.search;\r\n\r\n        this.PAGE_SIZE = 3;\r\n        this.LIST_SIZE = 5;\r\n\r\n        this.theLastPage = (int) Math.ceil((float)totalListSize / LIST_SIZE); // * int\uac12\uc73c\ub85c\ub9cc \ub098\ub204\uba74 \uc790\ub3d9 \ud615\ubcc0\ud658 \ub3fc\ubc84\ub9b0\ub2e4\r\n\r\n        this.currentPage = currentPage;\r\n\r\n        this.startPage = currentPage - (currentPage - 1) % PAGE_SIZE;\r\n        this.startPage = startPage < 1 ? 1 : startPage; // \uc2dc\uc791\ubc88\ud638\uac00 1\ubcf4\ub2e4 \uc791\uc73c\uba74 1\uc744 \ubc18\ud658\r\n\r\n        this.endPage = startPage+(PAGE_SIZE-1);\r\n        this.endPage = endPage > theLastPage ? theLastPage : endPage; // \ub9c8\uc9c0\ub9c9 \ubc88\ud638\uac00 \ucd5c\uc885 \ud398\uc774\uc9c0 \ubc88\ud638\ubcf4\ub2e4 \ud06c\uba74 \ucd5c\uc885 \ud398\uc774\uc9c0 \ubc88\ud638 \ubc18\ud658\r\n\r\n        this.cri = (currentPage-1) * LIST_SIZE;\r\n\r\n        //\uc774\uc804 \ubc84\ud2bc \uc0c1\ud0dc\r\n        this.prev = startPage == 1 ? false : true;\r\n\r\n        //\ub2e4\uc74c \ubc84\ud2bc \uc0c1\ud0dc\r\n        this.next = currentPage >= theLastPage ? false : true;\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(r.h2,{id:"mysql-pagination-query--search-query",children:"mySQL pagination query + search query"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-xml",children:"<select id=\"getBoardListCnt\" resultType=\"int\">\r\n    select count(*) as listCnt\r\n    FROM (SELECT *\r\n            FROM bbs\r\n            WHERE username LIKE CONCAT('%', #{search}, '%')\r\n                OR content LIKE CONCAT('%', #{search}, '%')\r\n                OR title LIKE CONCAT('%', #{search}, '%')) AS SUB\r\n</select>\r\n\r\n<select id=\"getBoardList\" resultType=\"Bbs\">\r\n    SELECT *\r\n    FROM (SELECT *\r\n            FROM bbs\r\n            WHERE username LIKE CONCAT('%', #{search}, '%')\r\n                OR content LIKE CONCAT('%', #{search}, '%')\r\n                OR title LIKE CONCAT('%', #{search}, '%')) AS SUB\r\n        LIMIT #{cri}, #{LIST_SIZE}\r\n</select>\n"})}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"controller + search"}),"\n"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'@GetMapping("/board")\r\npublic String board(Model model,\r\n                    @RequestParam(required = false, defaultValue = "1") int page,\r\n                    Pagination pagination){\r\n\r\n    int totalListCount = bbsDao.getBoardListCnt(pagination.getSearch());\r\n    pagination.paginate(page, totalListCount); // \ud398\uc774\uc9c0\ub124\uc774\uc158 \ucd08\uae30\ud654\r\n\r\n    model.addAttribute("pagination", pagination);\r\n    model.addAttribute("BBS_LIST", bbsDao.getBoardList(pagination));\r\n    return null;\r\n}\n'})}),"\n",(0,t.jsx)(r.h2,{id:"view--search",children:"view + search"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-html",children:'<form>\r\n  <input\r\n    type="text"\r\n    name="search"\r\n    th:value="${pagination.search}" />\r\n  // \uac80\uc0c9\uc5b4\ub97c \uc720\uc9c0\uc2dc\ud0a4\uae30 \uc704\ud574 value \uac12\uc5d0 \ub123\uc5b4\ub450\uae30\r\n  <button>\uac80\uc0c9</button>\r\n</form>\r\n\r\n<ul style="list-style:none; display: flex">\r\n  <li\r\n    style="padding:.5rem 1rem;margin:2px;background-color:skyblue;color:white;">\r\n    <a th:onclick="|location.href = \'/bbs/board?page=1\'|">&#60;&#60;</a>\r\n  </li>\r\n  <th:block th:if="${pagination.prev}">\r\n    <li\r\n      style="padding:.5rem 1rem;margin:2px;background-color:skyblue;color:white;">\r\n      <a th:onclick="|fn_prev(${pagination.currentPage})|">&#60;</a>\r\n    </li>\r\n  </th:block>\r\n  <th:block\r\n    th:each="index:${#numbers.sequence(pagination.startPage, pagination.endPage)}">\r\n    <li\r\n      th:style="|padding:.5rem 1rem;margin:2px;color:white;${pagination.currentPage==index?\'background-color:red\':\'background-color:skyblue\'}|">\r\n      <a\r\n        th:onclick="|fn_pagination(${index})|"\r\n        th:text="${index}"></a>\r\n    </li>\r\n  </th:block>\r\n  <th:block th:if="${pagination.next}">\r\n    <li\r\n      style="padding:.5rem 1rem;margin:2px;background-color:skyblue;color:white;">\r\n      <a th:onclick="|fn_next(${pagination.currentPage})|">&#62;</a>\r\n    </li>\r\n  </th:block>\r\n  <li\r\n    style="padding:.5rem 1rem;margin:2px;background-color:skyblue;color:white;">\r\n    <a\r\n      th:onclick="|location.href = \'/bbs/board?page=${pagination.theLastPage}\'|"\r\n      >&#62;&#62;</a\r\n    >\r\n  </li>\r\n</ul>\r\n\r\n/* \ud604\uc7ac \ud398\uc774\uc9c0\ub97c \ubc14\uafd4\ub3c4 \uac80\uc0c9\uc5b4 \uc720\uc9c0\ub418\uac8c */\r\n<script th:inline="javascript">\r\n  /*<![CDATA[*/\r\n  function fn_prev(currentPage) {\r\n      var page = currentPage - 1;\r\n      var url = "/bbs/board";\r\n      url = url + "?page=" + page;\r\n      url = url + "&search="+ [[${pagination.search}]];\r\n      location.href = url;\r\n  }\r\n\r\n  function fn_pagination(page) {\r\n      var url = "/bbs/board";\r\n      url = url + "?page=" + page;\r\n      url = url + "&search="+ [[${pagination.search}]];\r\n      location.href = url;\r\n  }\r\n\r\n  function fn_next(currentPage) {\r\n      var page = currentPage + 1;\r\n      var url = "/bbs/board";\r\n      url = url + "?page=" + page;\r\n      url = url + "&search="+ [[${pagination.search}]];\r\n      location.href = url;\r\n  }\r\n  /*]]>*/\r\n<\/script>\n'})}),"\n",(0,t.jsx)(r.h2,{id:"querydsl",children:"QueryDsl"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:"QueryModifiers queryModifiers = new QueryModifiers(20L, 10L); //limit, offset\r\nList<Item> list = query\r\n                    .from(item)\r\n                    .restrict(queryModifiers)\r\n                    .fetch(item);\n"})})]})}function u(n={}){const{wrapper:r}={...(0,i.R)(),...n.components};return r?(0,t.jsx)(r,{...n,children:(0,t.jsx)(g,{...n})}):g(n)}}}]);