"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[880416],{433179:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>i,contentTitle:()=>d,default:()=>f,frontMatter:()=>s,metadata:()=>o,toc:()=>a});const o=JSON.parse('{"id":"frontend/webapi MediaSource","title":"MediaSource","description":"video, audio \ud0dc\uadf8\uc758 src\uc5d0 \uc9c1\uc811 url\uc744 \ub123\ub294 \ub300\uc2e0 \ub354 \uc138\ubc00\ud55c \uc81c\uc5b4\ub97c \uc704\ud55c \ubc29\ubc95","source":"@site/docs/frontend/webapi MediaSource.md","sourceDirName":"frontend","slug":"/frontend/webapi MediaSource","permalink":"/docs/frontend/webapi MediaSource","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"FontFace","permalink":"/docs/frontend/webapi FontFace"},"next":{"title":"WebAPI IntersectionObserver","permalink":"/docs/frontend/webapi Observer IntersectionObserver"}}');var t=n(447259),c=n(529087);const s={},d="MediaSource",i={},a=[];function u(e){const r={blockquote:"blockquote",code:"code",h1:"h1",header:"header",p:"p",pre:"pre",...(0,c.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.header,{children:(0,t.jsx)(r.h1,{id:"mediasource",children:"MediaSource"})}),"\n",(0,t.jsxs)(r.blockquote,{children:["\n",(0,t.jsx)(r.p,{children:"video, audio \ud0dc\uadf8\uc758 src\uc5d0 \uc9c1\uc811 url\uc744 \ub123\ub294 \ub300\uc2e0 \ub354 \uc138\ubc00\ud55c \uc81c\uc5b4\ub97c \uc704\ud55c \ubc29\ubc95"}),"\n",(0,t.jsx)(r.p,{children:"HTMLMediaElement\uac00 MediaSource\ub97c \uc0ac\uc6a9"}),"\n",(0,t.jsxs)(r.blockquote,{children:["\n",(0,t.jsx)(r.p,{children:"MediaSource\ub294 SourceBuffer\ub97c \uc18c\uc720\ud558\uace0 \uc0ac\uc6a9\ud55c\ub2e4."}),"\n",(0,t.jsxs)(r.blockquote,{children:["\n",(0,t.jsx)(r.p,{children:"SourceBuffer\ub97c \uc774\uc6a9\ud574 MediaSource\uc5d0 \ubbf8\ub514\uc5b4 \uc138\uadf8\uba3c\ud2b8\ub97c \uc804\ub2ec\ud574\uc8fc\uace0"}),"\n",(0,t.jsx)(r.p,{children:"HTMLMediaElement(Video)\ub294 \ud50c\ub808\uc774\ud558\uba74\uc11c \ud544\uc694\ud55c \ub370\uc774\ud130\ub97c MediaSource\ub85c \ubd80\ud130\uaebc\ub0b4\uc640 \uc0ac\uc6a9\ud55c\ub2e4."}),"\n",(0,t.jsxs)(r.blockquote,{children:["\n",(0,t.jsx)(r.p,{children:"mp4 \ud30c\uc77c\uc740 fragmented mp4\ub85c \ubcf4\ub0b4\uc57c\ud55c\ub2e4."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-js",children:'this.mediaSource = new MediaSource(); // \uc0dd\uc131\ud558\uba74 sourceopen \uc774\ubca4\ud2b8\uac00 \ubc1c\uc0dd\ud568\r\nvideo.src = URL.createObjectURL(this.mediaSource); // mediaSource\uc758 url\uc744 video src\uc5d0 \ucee4\ub125\ud2b8\r\n\r\nthis.mediaSource.addEventListener("sourceopen", () => {\r\n  // sourceopen \uc2dc sourceBuffer\ub97c \uc0dd\uc131\ud558\uc5ec arrayBuffer\ub97c add\r\n  const sourceBuffer = this.mediaSource.addSourceBuffer(this.mimeCodec);\r\n  // arrayBuffer\ub97c fetch\ud558\uc5ec sourceBuffer\uc5d0 add\r\n  this.http\r\n    .get("videos/:id", {\r\n      responseType: "arrayBuffer",\r\n      header: {\r\n        Range: `bytes=${this.start}-${this.end}`,\r\n      },\r\n    })\r\n    .subscribe(arrayBuffer => {\r\n      sourceBuffer.addEventListener("updateend", () => {\r\n        // arrayBuffer add\uac00 \ub05d\ub098\uba74 endOfStream\uc744 \ud638\ucd9c\uc2dc\ucf1c \ube44\ub514\uc624 \uc2e4\ud589 \uc900\ube44 \uc644\ub8cc\r\n        this.mediaSource.endOfStream();\r\n        video.play();\r\n      });\r\n      sourceBuffer.appendBuffer(arrayBuffer);\r\n    });\r\n});\n'})})]})}function f(e={}){const{wrapper:r}={...(0,c.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}},529087:(e,r,n)=>{n.d(r,{R:()=>s,x:()=>d});var o=n(596363);const t={},c=o.createContext(t);function s(e){const r=o.useContext(c);return o.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function d(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),o.createElement(c.Provider,{value:r},e.children)}}}]);