"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[986807],{529087:(n,t,r)=>{r.d(t,{R:()=>i,x:()=>l});var e=r(596363);const s={},o=e.createContext(s);function i(n){const t=e.useContext(o);return e.useMemo(function(){return"function"==typeof n?n(t):{...t,...n}},[t,n])}function l(n){let t;return t=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:i(n.components),e.createElement(o.Provider,{value:t},n.children)}},738293:(n,t,r)=>{r.r(t),r.d(t,{assets:()=>a,contentTitle:()=>l,default:()=>u,frontMatter:()=>i,metadata:()=>e,toc:()=>c});const e=JSON.parse('{"id":"testing/load testing k6","title":"load testing k6","description":"grafana\uc5d0\uc11c \uac1c\ubc1c\ud55c \uc624\ud508\uc18c\uc2a4 \ubd80\ud558\ud14c\uc2a4\ud2b8 \ub3c4\uad6c","source":"@site/docs/testing/load testing k6.md","sourceDirName":"testing","slug":"/testing/load testing k6","permalink":"/docs/testing/load testing k6","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"load testing k6 grafana + influxdb","permalink":"/docs/testing/load testing k6 grafana + influxdb"},"next":{"title":"load testing pgbench","permalink":"/docs/testing/load testing pgbench"}}');var s=r(447259),o=r(529087);const i={},l="load testing k6",a={},c=[{value:"install",id:"install",level:2},{value:"script.ts",id:"scriptts",level:2}];function d(n){const t={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"load-testing-k6",children:"load testing k6"})}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsx)(t.p,{children:"grafana\uc5d0\uc11c \uac1c\ubc1c\ud55c \uc624\ud508\uc18c\uc2a4 \ubd80\ud558\ud14c\uc2a4\ud2b8 \ub3c4\uad6c"}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsx)(t.p,{children:"jmeter\ubcf4\ub2e4 \ub354 \uacbd\ub7c9\ud654 \ubc0f \ucd5c\uc801\ud654 \ub418\uc5b4\uc788\uc74c"}),"\n",(0,s.jsx)(t.p,{children:"\ub2e8 GUI\uac00 \uc5c6\uc74c"}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsx)(t.p,{children:"\uc2a4\ud06c\ub9bd\ud2b8\ub97c js\ub85c \uc791\uc131"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"install",children:"install"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-sh",children:"# mac\r\nbrew install k6\r\n# window\r\nchoco install k6\r\n# linux\r\napt install k6\r\n# docker\r\ndocker pull grafana/k6\r\n# vscode \uc790\ub3d9\uc644\uc131\uc6a9\r\nnpm i -D @types/k6\r\n\r\n# run\r\nk6 run script.ts\r\n\r\n# report \uc0dd\uc131\r\n## json\uc73c\ub85c \ucd9c\ub825\r\nk6 run --out json=result.json script.ts\r\n## csv\ub85c \ucd9c\ub825\r\nk6 run --out csv=result.csv script.ts\r\n## influxdb\ub85c \ucd9c\ub825\r\nk6 run --out influxdb=http://localhost:8086/k6 script.ts\n"})}),"\n",(0,s.jsx)(t.h2,{id:"scriptts",children:"script.ts"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:'//@ts-ignore\r\nimport { htmlReport } from "https://raw.githubusercontent.com/benc-uk/k6-reporter/main/dist/bundle.js";\r\n//@ts-ignore\r\nimport { textSummary } from "https://jslib.k6.io/k6-summary/0.0.1/index.js";\r\nimport { check, sleep } from "k6";\r\nimport http from "k6/http";\r\nimport { Options } from "k6/options";\r\n\r\nexport const options: Options = {\r\n  vus: 6,\r\n  duration: "30s",\r\n};\r\n\r\nexport default function () {\r\n  const url = "https://www.dep.team/api/v1";\r\n\r\n  const res = http.get(url);\r\n\r\n  check(res, {\r\n    "status is 200": r => r.status === 200,\r\n    "response time < 200ms": r => r.timings.duration < 200,\r\n  });\r\n\r\n  sleep(1); // 1\ucd08 \ub300\uae30 \ud6c4 \ub2e4\uc74c \uc694\uccad\r\n}\r\n\r\n// report html \uc0dd\uc131 \uc6a9\r\nexport function handleSummary(data) {\r\n  return {\r\n    "result.html": htmlReport(data),\r\n    stdout: textSummary(data, { indent: " ", enableColors: true }),\r\n  };\r\n}\n'})})]})}function u(n={}){const{wrapper:t}={...(0,o.R)(),...n.components};return t?(0,s.jsx)(t,{...n,children:(0,s.jsx)(d,{...n})}):d(n)}}}]);