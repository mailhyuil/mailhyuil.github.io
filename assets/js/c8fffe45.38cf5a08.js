"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["743161"],{176232:function(e,r,n){n.r(r),n.d(r,{frontMatter:()=>d,toc:()=>s,default:()=>f,metadata:()=>t,assets:()=>a,contentTitle:()=>i});var t=JSON.parse('{"id":"frontend/webapi MediaSource","title":"MediaSource","description":"video, audio \uD0DC\uADF8\uC758 src\uC5D0 \uC9C1\uC811 url\uC744 \uB123\uB294 \uB300\uC2E0 \uB354 \uC138\uBC00\uD55C \uC81C\uC5B4\uB97C \uC704\uD55C \uBC29\uBC95","source":"@site/docs/frontend/webapi MediaSource.md","sourceDirName":"frontend","slug":"/frontend/webapi MediaSource","permalink":"/docs/frontend/webapi MediaSource","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"FontFace","permalink":"/docs/frontend/webapi FontFace"},"next":{"title":"WebAPI IntersectionObserver","permalink":"/docs/frontend/webapi Observer IntersectionObserver"}}'),o=n(447259),c=n(255511);let d={},i="MediaSource",a={},s=[];function u(e){let r={blockquote:"blockquote",code:"code",h1:"h1",header:"header",p:"p",pre:"pre",...(0,c.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.header,{children:(0,o.jsx)(r.h1,{id:"mediasource",children:"MediaSource"})}),"\n",(0,o.jsxs)(r.blockquote,{children:["\n",(0,o.jsx)(r.p,{children:"video, audio \uD0DC\uADF8\uC758 src\uC5D0 \uC9C1\uC811 url\uC744 \uB123\uB294 \uB300\uC2E0 \uB354 \uC138\uBC00\uD55C \uC81C\uC5B4\uB97C \uC704\uD55C \uBC29\uBC95"}),"\n",(0,o.jsx)(r.p,{children:"HTMLMediaElement\uAC00 MediaSource\uB97C \uC0AC\uC6A9"}),"\n",(0,o.jsxs)(r.blockquote,{children:["\n",(0,o.jsx)(r.p,{children:"MediaSource\uB294 SourceBuffer\uB97C \uC18C\uC720\uD558\uACE0 \uC0AC\uC6A9\uD55C\uB2E4."}),"\n",(0,o.jsxs)(r.blockquote,{children:["\n",(0,o.jsx)(r.p,{children:"SourceBuffer\uB97C \uC774\uC6A9\uD574 MediaSource\uC5D0 \uBBF8\uB514\uC5B4 \uC138\uADF8\uBA3C\uD2B8\uB97C \uC804\uB2EC\uD574\uC8FC\uACE0"}),"\n",(0,o.jsx)(r.p,{children:"HTMLMediaElement(Video)\uB294 \uD50C\uB808\uC774\uD558\uBA74\uC11C \uD544\uC694\uD55C \uB370\uC774\uD130\uB97C MediaSource\uB85C \uBD80\uD130\uAEBC\uB0B4\uC640 \uC0AC\uC6A9\uD55C\uB2E4."}),"\n",(0,o.jsxs)(r.blockquote,{children:["\n",(0,o.jsx)(r.p,{children:"mp4 \uD30C\uC77C\uC740 fragmented mp4\uB85C \uBCF4\uB0B4\uC57C\uD55C\uB2E4."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-js",children:'this.mediaSource = new MediaSource(); // \uC0DD\uC131\uD558\uBA74 sourceopen \uC774\uBCA4\uD2B8\uAC00 \uBC1C\uC0DD\uD568\r\nvideo.src = URL.createObjectURL(this.mediaSource); // mediaSource\uC758 url\uC744 video src\uC5D0 \uCEE4\uB125\uD2B8\r\n\r\nthis.mediaSource.addEventListener("sourceopen", () => {\r\n  // sourceopen \uC2DC sourceBuffer\uB97C \uC0DD\uC131\uD558\uC5EC arrayBuffer\uB97C add\r\n  const sourceBuffer = this.mediaSource.addSourceBuffer(this.mimeCodec);\r\n  // arrayBuffer\uB97C fetch\uD558\uC5EC sourceBuffer\uC5D0 add\r\n  this.http\r\n    .get("videos/:id", {\r\n      responseType: "arrayBuffer",\r\n      header: {\r\n        Range: `bytes=${this.start}-${this.end}`,\r\n      },\r\n    })\r\n    .subscribe(arrayBuffer => {\r\n      sourceBuffer.addEventListener("updateend", () => {\r\n        // arrayBuffer add\uAC00 \uB05D\uB098\uBA74 endOfStream\uC744 \uD638\uCD9C\uC2DC\uCF1C \uBE44\uB514\uC624 \uC2E4\uD589 \uC900\uBE44 \uC644\uB8CC\r\n        this.mediaSource.endOfStream();\r\n        video.play();\r\n      });\r\n      sourceBuffer.appendBuffer(arrayBuffer);\r\n    });\r\n});\n'})})]})}function f(e={}){let{wrapper:r}={...(0,c.R)(),...e.components};return r?(0,o.jsx)(r,{...e,children:(0,o.jsx)(u,{...e})}):u(e)}},255511:function(e,r,n){n.d(r,{R:()=>d,x:()=>i});var t=n(596363);let o={},c=t.createContext(o);function d(e){let r=t.useContext(c);return t.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function i(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:d(e.components),t.createElement(c.Provider,{value:r},e.children)}}}]);