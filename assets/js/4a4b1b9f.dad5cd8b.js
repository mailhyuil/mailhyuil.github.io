"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["769365"],{735778:function(e,r,n){n.r(r),n.d(r,{frontMatter:()=>t,toc:()=>d,default:()=>p,metadata:()=>o,assets:()=>i,contentTitle:()=>a});var o=JSON.parse('{"id":"docker/docker-compose","title":"docker-compose","description":"Docker-compose\uB97C \uC0AC\uC6A9\uD558\uC5EC \uBD84\uC0B0 \uC560\uD50C\uB9AC\uCF00\uC774\uC158\uC744 \uC2E4\uD589\uC2DC\uD0AC \uC218 \uC788\uB2E4.","source":"@site/docs/docker/docker-compose.md","sourceDirName":"docker","slug":"/docker/docker-compose","permalink":"/docs/docker/docker-compose","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"docker-compose \uD658\uACBD\uBCC0\uC218","permalink":"/docs/docker/docker-compose \uD658\uACBD\uBCC0\uC218"},"next":{"title":"docker-entrypoint-initdb.d","permalink":"/docs/docker/docker-entrypoint-initdb.d"}}'),c=n(447259),s=n(255511);let t={},a="docker-compose",i={},d=[{value:"install",id:"install",level:2},{value:"\uBA85\uB839\uC5B4",id:"\uBA85\uB839\uC5B4",level:2},{value:"docker-compose.yml",id:"docker-composeyml",level:2}];function l(e){let r={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(r.header,{children:(0,c.jsx)(r.h1,{id:"docker-compose",children:"docker-compose"})}),"\n",(0,c.jsxs)(r.blockquote,{children:["\n",(0,c.jsx)(r.p,{children:"Docker-compose\uB97C \uC0AC\uC6A9\uD558\uC5EC \uBD84\uC0B0 \uC560\uD50C\uB9AC\uCF00\uC774\uC158\uC744 \uC2E4\uD589\uC2DC\uD0AC \uC218 \uC788\uB2E4."}),"\n",(0,c.jsxs)(r.blockquote,{children:["\n",(0,c.jsx)(r.p,{children:"Dockerfile -> images -> docker-compose.yml -> containers"}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(r.h2,{id:"install",children:"install"}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-sh",children:"apt install docker-compose-plugin -y\n"})}),"\n",(0,c.jsx)(r.h2,{id:"\uBA85\uB839\uC5B4",children:"\uBA85\uB839\uC5B4"}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-bash",children:"# docker compose or docker-compose\uB85C \uC0AC\uC6A9 \uAC00\uB2A5\r\n\r\ndocker compose up # \uC774 \uBA85\uB839\uC744 \uC2E4\uD589\uD558\uBA74 \uD604\uC7AC \uB514\uB809\uD1A0\uB9AC\uC5D0 \uC788\uB294 docker-compose.yml \uD30C\uC77C\uC744 \uCC3E\uB294\uB2E4\r\ndocker compose up -d # \uBC31\uADF8\uB77C\uC6B4\uB4DC\uC5D0\uC11C \uC2E4\uD589\r\n\r\ndocker compose down # \uBAA8\uB4E0 \uCEE8\uD14C\uC774\uB108\uC640 \uB124\uD2B8\uC6CC\uD06C\uB97C \uC911\uB2E8 \uBC0F \uC0AD\uC81C\r\n\r\ndocker compose logs\r\ndocker compose stop\r\ndocker compose start\n"})}),"\n",(0,c.jsx)(r.h2,{id:"docker-composeyml",children:"docker-compose.yml"}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-yaml",children:'version: "3.8"\r\nservices:\r\n  db:\r\n    container_name: postgres\r\n    image: postgres:14-alpine\r\n    ports:\r\n      - "5432:5432"\r\n    restart: always\r\n    volumes:\r\n      - postgres-data:/var/lib/postgresql/data\r\n      - /mnt/server/archivedir:/mnt/server/archivedir\r\n    environment:\r\n      POSTGRES_USER: postgres\r\n      POSTGRES_PASSWORD: 1234\r\n      POSTGRES_DB: mydb\r\n    logging:\r\n      driver: "json-file"\r\n      options:\r\n        max-size: "8m"\r\n        max-file: "10"\r\n    networks:\r\n      - private\r\n    command: |\r\n      postgres \r\n      -c wal_level=replica \r\n      -c archive_mode=on\r\n      -c archive_command=\'test ! -f /mnt/server/archivedir/%f && cp %p /mnt/server/archivedir/%f\'\r\n      -c archive_timeout=1\r\n      -c autovacuum=on\r\n      -c autovacuum_vacuum_scale_factor=0.1\r\n      -c autovacuum_analyze_scale_factor=0.3\r\n\r\n  server:\r\n    container_name: server\r\n    image: hyuil/server:0.0.1\r\n    ports:\r\n      - "3000:3000"\r\n    restart: always\r\n    networks:\r\n      - private\r\n\r\n  nginx:\r\n    container_name: nginx\r\n    image: hyuil/nginx:0.0.1\r\n    ports:\r\n      - "80:80"\r\n      - "443:443"\r\n    restart: always\r\n    networks:\r\n      - public\r\n      - private\r\n\r\n  redis:\r\n    container_name: redis\r\n    image: redis:latest\r\n    ports:\r\n      - "6379:6379"\r\n    restart: always\r\n    networks:\r\n      - private\r\n\r\nvolumes:\r\n  postgres-data: {}\r\n\r\nnetworks:\r\n  public:\r\n    driver: bridge\r\n  private:\r\n    driver: bridge\r\n    internal: true\n'})})]})}function p(e={}){let{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,c.jsx)(r,{...e,children:(0,c.jsx)(l,{...e})}):l(e)}},255511:function(e,r,n){n.d(r,{R:()=>t,x:()=>a});var o=n(596363);let c={},s=o.createContext(c);function t(e){let r=o.useContext(s);return o.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:t(e.components),o.createElement(s.Provider,{value:r},e.children)}}}]);