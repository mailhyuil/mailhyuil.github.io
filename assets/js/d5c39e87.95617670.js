"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[533369],{529087:(t,e,r)=>{r.d(e,{R:()=>a,x:()=>p});var s=r(596363);const n={},o=s.createContext(n);function a(t){const e=s.useContext(o);return s.useMemo(function(){return"function"==typeof t?t(e):{...e,...t}},[e,t])}function p(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(n):t.components||n:a(t.components),s.createElement(o.Provider,{value:e},t.children)}},877184:(t,e,r)=>{r.r(e),r.d(e,{assets:()=>l,contentTitle:()=>p,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>i});const s=JSON.parse('{"id":"nestjs/nest passport oauth","title":"nest oauth passport","description":"https \ud658\uacbd\uc5d0\uc11c\ub9cc \uc815\uc0c1\uc801\uc73c\ub85c \ud14c\uc2a4\ud2b8\uac00 \uac00\ub2a5\ud558\ub2e4","source":"@site/docs/nestjs/nest passport oauth.md","sourceDirName":"nestjs","slug":"/nestjs/nest passport oauth","permalink":"/docs/nestjs/nest passport oauth","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"nest oauth passport","permalink":"/docs/nestjs/nest passport jwt"},"next":{"title":"nest platform","permalink":"/docs/nestjs/nest platform"}}');var n=r(447259),o=r(529087);const a={},p="nest oauth passport",l={},i=[{value:"install",id:"install",level:2},{value:"strategy \uc0dd\uc131",id:"strategy-\uc0dd\uc131",level:2},{value:"guard \uc0ac\uc6a9",id:"guard-\uc0ac\uc6a9",level:2}];function c(t){const e={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...t.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.header,{children:(0,n.jsx)(e.h1,{id:"nest-oauth-passport",children:"nest oauth passport"})}),"\n",(0,n.jsxs)(e.blockquote,{children:["\n",(0,n.jsx)(e.p,{children:"https \ud658\uacbd\uc5d0\uc11c\ub9cc \uc815\uc0c1\uc801\uc73c\ub85c \ud14c\uc2a4\ud2b8\uac00 \uac00\ub2a5\ud558\ub2e4"}),"\n",(0,n.jsxs)(e.blockquote,{children:["\n",(0,n.jsx)(e.p,{children:"https \ud658\uacbd\uc774 \uc544\ub2c8\ub77c\uba74 ngrok \uc744 \uc0ac\uc6a9\ud574\uc11c (http\ub97c https\ud658\uacbd\uc73c\ub85c \ubc14\uafbc url\uc744 \uc900\ub2e4) \ud14c\uc2a4\ud2b8 \ud558\uc790!"}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(e.h2,{id:"install",children:"install"}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-sh",children:"npm i passport\r\nnpm i @nestjs/passport\r\n\r\n# local\r\nnpm i passport-local\r\nnpm i -D @types/passport-local\r\n\r\n# kakao\r\nnpm i passport-kakao\r\nnpm i -D @types/passport-kakao\r\n\r\n# google\r\nnpm i passport-google-oauth\r\nnpm i -D @types/passport-google-oauth\r\n\r\n# facebook\r\nnpm i passport-facebook\r\nnpm i -D @types/passport-facebook\r\n# etc\n"})}),"\n",(0,n.jsx)(e.h2,{id:"strategy-\uc0dd\uc131",children:"strategy \uc0dd\uc131"}),"\n",(0,n.jsxs)(e.blockquote,{children:["\n",(0,n.jsx)(e.p,{children:"\uc0dd\uc131\ub41c strategy\ub97c module\uc758 providers\uc5d0 \ub4f1\ub85d"}),"\n"]}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-ts",children:'import { Strategy } from "passport-local";\r\nimport { PassportStrategy } from "@nestjs/passport";\r\nimport { Injectable, UnauthorizedException } from "@nestjs/common";\r\nimport { AuthService } from "./auth.service";\r\n\r\n@Injectable()\r\nexport class LocalStrategy extends PassportStrategy(Strategy) {\r\n  constructor(private authService: AuthService) {\r\n    super();\r\n  }\r\n\r\n  async validate(username: string, password: string): Promise<any> {\r\n    const user = await this.authService.validateUser(username, password);\r\n    if (!user) {\r\n      throw new UnauthorizedException();\r\n    }\r\n    return user;\r\n  }\r\n}\n'})}),"\n",(0,n.jsx)(e.h2,{id:"guard-\uc0ac\uc6a9",children:"guard \uc0ac\uc6a9"}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-ts",children:'import { Controller, Request, Post, UseGuards } from "@nestjs/common";\r\nimport { AuthGuard } from "@nestjs/passport";\r\n\r\n@Controller()\r\nexport class AppController {\r\n  @UseGuards(AuthGuard("local"))\r\n  @Post("auth/login")\r\n  async login(@Request() req) {\r\n    return req.user;\r\n  }\r\n}\n'})})]})}function u(t={}){const{wrapper:e}={...(0,o.R)(),...t.components};return e?(0,n.jsx)(e,{...t,children:(0,n.jsx)(c,{...t})}):c(t)}}}]);