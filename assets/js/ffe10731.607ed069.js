"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["168815"],{401123:function(e,t,r){r.r(t),r.d(t,{frontMatter:()=>s,toc:()=>i,default:()=>d,metadata:()=>n,assets:()=>c,contentTitle:()=>a});var n=JSON.parse('{"id":"angular/angular state management ScrollStore","title":"ScrollStore","description":"scroll.store.ts","source":"@site/docs/angular/angular state management ScrollStore.md","sourceDirName":"angular","slug":"/angular/angular state management ScrollStore","permalink":"/docs/angular/angular state management ScrollStore","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"angular state management SSOT","permalink":"/docs/angular/angular state management SSOT"},"next":{"title":"store \uC0C8\uB85C\uACE0\uCE68 \uC2DC state \uC720\uC9C0","permalink":"/docs/angular/angular state management localStorage"}}'),o=r(447259),l=r(255511);let s={},a="ScrollStore",c={},i=[{value:"scroll.store.ts",id:"scrollstorets",level:2},{value:"layout.component.ts",id:"layoutcomponentts",level:2},{value:"layout.component.html",id:"layoutcomponenthtml",level:2}];function u(e){let t={code:"code",h1:"h1",h2:"h2",header:"header",pre:"pre",...(0,l.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.header,{children:(0,o.jsx)(t.h1,{id:"scrollstore",children:"ScrollStore"})}),"\n",(0,o.jsx)(t.h2,{id:"scrollstorets",children:"scroll.store.ts"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-ts",children:"export class ScrollStore {\r\n  private _scrollPositionState = [0, 0];\r\n  get$ = new Subject<void>();\r\n  set$ = new Subject<void>();\r\n\r\n  setScroll(scroll: [number, number]) {\r\n    this._scrollPositionState = scroll;\r\n  }\r\n\r\n  getScroll() {\r\n    return this._scrollPositionState;\r\n  }\r\n}\r\n\r\nexport function PreserveScrollPosition() {\r\n  return function (target: any, propertyKey: string, descriptor: PropertyDescriptor) {\r\n    const originalMethod = descriptor.value;\r\n    descriptor.value = async function (...args: any[]) {\r\n      const scrollStore = AppComponent.getScrollStore();\r\n      scrollStore.set$.next();\r\n      const result = await originalMethod.apply(this, args);\r\n      scrollStore.get$.next();\r\n      return result;\r\n    };\r\n    return descriptor;\r\n  };\r\n}\n"})}),"\n",(0,o.jsx)(t.h2,{id:"layoutcomponentts",children:"layout.component.ts"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-ts",children:'export class LayoutComponent implements OnInit {\r\n  @ViewChild("outlet") outlet: ElementRef<HTMLDivElement>;\r\n  constructor(private readonly router: Router, private readonly scrollStore: ScrollStore) {}\r\n\r\n  ngOnInit(): void {\r\n    this.scrollStore.set$.subscribe(() => {\r\n      this.scrollStore.setScroll([0, this.outlet.nativeElement.scrollTop]);\r\n    });\r\n\r\n    this.scrollStore.get$.subscribe(() => {\r\n      this.outlet.nativeElement.scrollTop = this.scrollStore.getScroll()[1];\r\n    });\r\n  }\r\n}\n'})}),"\n",(0,o.jsx)(t.h2,{id:"layoutcomponenthtml",children:"layout.component.html"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-html",children:'<div #outlet class="flex-1 overflow-y-auto" (scroll)="onScroll($event)">\r\n  <router-outlet />\r\n</div>\n'})})]})}function d(e={}){let{wrapper:t}={...(0,l.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(u,{...e})}):u(e)}},255511:function(e,t,r){r.d(t,{R:()=>s,x:()=>a});var n=r(596363);let o={},l=n.createContext(o);function s(e){let t=n.useContext(l);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),n.createElement(l.Provider,{value:t},e.children)}}}]);