"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[837018],{143817:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>i,contentTitle:()=>s,default:()=>u,frontMatter:()=>c,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"nx/nx webpack angular","title":"nx webpack angular","description":"project.json","source":"@site/docs/nx/nx webpack angular.md","sourceDirName":"nx","slug":"/nx/nx webpack angular","permalink":"/docs/nx/nx webpack angular","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"nx bundle analyze","permalink":"/docs/nx/nx webpack analyze --stats-json"},"next":{"title":"nx budgets","permalink":"/docs/nx/nx webpack budgets"}}');var o=r(447259),a=r(529087);const c={},s="nx webpack angular",i={},l=[{value:"project.json",id:"projectjson",level:2},{value:"webpack.config.js",id:"webpackconfigjs",level:2}];function p(n){const e={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,a.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"nx-webpack-angular",children:"nx webpack angular"})}),"\n",(0,o.jsx)(e.h2,{id:"projectjson",children:"project.json"}),"\n",(0,o.jsxs)(e.blockquote,{children:["\n",(0,o.jsx)(e.p,{children:"executor\ub97c \ubcc0\uacbd"}),"\n"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-json",children:'"build": {\r\n    "executor": "@nx/angular:webpack-browser",\r\n    "options": {\r\n        "main": "apps/admin/src/main.ts", // "browser": "apps/admin/src/main.ts" \ub97c main\uc73c\ub85c \ubcc0\uacbd\r\n        "buildLibsFromSource": false,\r\n        "customWebpackConfig": {\r\n          "path": "apps/client/webpack.config.js"\r\n        }\r\n    }\r\n},\r\n"serve": {\r\n    "executor": "@nx/angular:dev-server",\r\n}\n'})}),"\n",(0,o.jsx)(e.h2,{id:"webpackconfigjs",children:"webpack.config.js"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"const webpack = require(\"webpack\");\r\n\r\nfunction getClientEnvironment() {\r\n  // Grab NX_* environment variables and prepare them to be injected\r\n  // into the application via DefinePlugin in webpack configuration.\r\n  const NX_APP = /^NX_/i;\r\n\r\n  const raw = Object.keys(process.env)\r\n    .filter((key) => NX_APP.test(key))\r\n    .reduce((env, key) => {\r\n      env[key] = process.env[key];\r\n      return env;\r\n    }, {});\r\n\r\n  // Stringify all values so we can feed into webpack DefinePlugin\r\n  return {\r\n    \"process.env\": Object.keys(raw).reduce((env, key) => {\r\n      env[key] = JSON.stringify(raw[key]);\r\n      return env;\r\n    }, {}),\r\n  };\r\n}\r\n\r\n/**\r\n * @param {import('webpack').Configuration} config\r\n * @param {*} options\r\n * @param {*} context\r\n * @returns {import('webpack').Configuration}\r\n */\r\nmodule.exports = (config, options, context) => {\r\n  // Overwrite the mode set by Angular if the NODE_ENV is set\r\n  config.mode = config.mode;\r\n  config.plugins = config.plugins || [];\r\n  config.plugins.push(new webpack.DefinePlugin(getClientEnvironment()));\r\n  return config;\r\n};\n"})})]})}function u(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(p,{...n})}):p(n)}},529087:(n,e,r)=>{r.d(e,{R:()=>c,x:()=>s});var t=r(596363);const o={},a=t.createContext(o);function c(n){const e=t.useContext(a);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:c(n.components),t.createElement(a.Provider,{value:e},n.children)}}}]);