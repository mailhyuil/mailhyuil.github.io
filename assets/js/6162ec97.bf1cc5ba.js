"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["433329"],{486582:function(e,r,s){s.r(r),s.d(r,{frontMatter:()=>l,toc:()=>d,default:()=>u,metadata:()=>n,assets:()=>o,contentTitle:()=>c});var n=JSON.parse('{"id":"redis/redis base cluster","title":"redis cluster","description":"redis.conf","source":"@site/docs/redis/redis base cluster.md","sourceDirName":"redis","slug":"/redis/redis base cluster","permalink":"/docs/redis/redis base cluster","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"redis-cli","permalink":"/docs/redis/redis base cli"},"next":{"title":"redis collection atomic","permalink":"/docs/redis/redis base collection atomic"}}'),t=s(447259),i=s(255511);let l={},c="redis cluster",o={},d=[{value:"redis.conf",id:"redisconf",level:2},{value:"\uD074\uB7EC\uC2A4\uD130 \uC0DD\uC131",id:"\uD074\uB7EC\uC2A4\uD130-\uC0DD\uC131",level:2}];function a(e){let r={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.header,{children:(0,t.jsx)(r.h1,{id:"redis-cluster",children:"redis cluster"})}),"\n",(0,t.jsx)(r.h2,{id:"redisconf",children:"redis.conf"}),"\n",(0,t.jsxs)(r.blockquote,{children:["\n",(0,t.jsx)(r.p,{children:"replication \uBCC4\uB85C \uC124\uC815"}),"\n"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-conf",children:"port 7000 # \uD3EC\uD2B8\uBC88\uD638\r\n\r\ncluster-enabled yes # cluster \uBAA8\uB4DC \uD65C\uC131\uD654\r\ncluster-config-file /path/to/redis/redis-cluster/7000/nodes-7000.conf # cluster \uC815\uBCF4\uB97C \uC800\uC7A5\uD560 \uD30C\uC77C\r\ncluster-node-timeout 5000 # failover \uC0C1\uD0DC\uB85C \uC778\uC2DD\uD558\uB294 \uC2DC\uAC04 # 5\uCD08\uB0B4\uC5D0 ping\uC774 \uC624\uC9C0 \uC54A\uC73C\uBA74 failover\r\n\r\ncluster-require-full-coverage yes # cluster \uC77C\uBD80\uAC00 down\uB418\uC5C8\uC744 \uB54C \uC804\uB7B5\uC744 \uC124\uC815\r\ncluster-migration-barrier 1       # master\uC5D0 \uC5F0\uACB0\uB418\uC5B4 \uC788\uC5B4\uC57C\uD558\uB294 \uCD5C\uC18C slave \uC218\r\ncluster-slave-validity-factor 10  # master\uAC00 failover \uB418\uC5C8\uC744 \uB54C slave\uAC00 master\uB85C \uC778\uC2DD\uB418\uB294 \uC2DC\uAC04 # 10 * 3\uCD08 = 30\uCD08\r\n\r\n# yes : slave\uAC00 \uC5C6\uB294 master\uAC00 \uB2E4\uC6B4\uB418\uBA74 cluster \uC804\uCCB4\uAC00 \uC911\uC9C0\r\n# no : slave\uAC00 \uC5C6\uB294 master\uAC00 \uB2E4\uC6B4\uB418\uB354\uB77C\uB3C4 cluster\uB294 \uC720\uC9C0\uD569\uB2C8\uB2E4. \uB2E4\uC6B4\uB41C master\uC758 \uC2AC\uB86F\uC5D0\uC11C\uB9CC \uC5D0\uB7EC\uAC00 \uBC1C\uC0DD\uD569\uB2C8\uB2E4.\r\n# \uC77C\uBD80 \uB370\uC774\uD130\uAC00 \uC720\uC2E4\uB3FC\uB3C4 \uAD1C\uCC2E\uC73C\uBA74 no, \uB370\uC774\uD130\uC758 \uC815\uD569\uC131\uC774 \uC911\uC694\uD558\uB2E4\uBA74 yes\uB97C \uC120\uD0DD\uD558\uBA74 \uB429\uB2C8\uB2E4.\r\n# no\uB85C \uC124\uC815\uD558\uB354\uB77C\uB3C4 \uC808\uBC18 \uC774\uC0C1\uC758 node\uAC00 down \uB418\uBA74 cluster\uB294 \uC911\uC9C0\uB429\uB2C8\uB2E4.\r\n\r\ndir /path/to/redis/redis-cluster/7000 # \uB370\uC774\uD130 \uC800\uC7A5 \uACBD\uB85C\r\ndaemonize yes # \uBC31\uADF8\uB77C\uC6B4\uB4DC \uC2E4\uD589\r\nappendonly yes # AOF \uBAA8\uB4DC \uD65C\uC131\uD654\r\n#logfile /var/logs/redis/redis.log # \uB85C\uADF8\uD30C\uC77C \uACBD\uB85C\r\n#dbfilename dump.rdb # \uB370\uC774\uD130 \uD30C\uC77C \uC774\uB984\n"})}),"\n",(0,t.jsx)(r.h2,{id:"\uD074\uB7EC\uC2A4\uD130-\uC0DD\uC131",children:"\uD074\uB7EC\uC2A4\uD130 \uC0DD\uC131"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-sh",children:"## dir \uC0DD\uC131\r\nmkdir 7000 7001 7002\r\n## redos-server\r\nredis-server redis.conf\r\n## cluster \uBAA8\uB4DC\uB85C \uC2E4\uD589\r\nredis-cli --cluster create 127.0.0.1:7000 127.0.0.1:7001 127.0.0.1:7002 --cluster-replicas 1\n"})})]})}function u(e={}){let{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},255511:function(e,r,s){s.d(r,{R:()=>l,x:()=>c});var n=s(596363);let t={},i=n.createContext(t);function l(e){let r=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),n.createElement(i.Provider,{value:r},e.children)}}}]);