"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["18308"],{865822:function(e,t,n){n.r(t),n.d(t,{frontMatter:()=>u,toc:()=>d,default:()=>i,metadata:()=>s,assets:()=>c,contentTitle:()=>r});var s=JSON.parse('{"id":"nuxtjs/nuxt useNuxtData - cache","title":"nuxt useNuxtData","description":"useAsyncData, useLazyAsyncData, useFetch, useLazyFetch\uB294 \uB370\uC774\uD130\uB97C \uCE90\uC2DC\uD55C\uB2E4","source":"@site/docs/nuxtjs/nuxt useNuxtData - cache.md","sourceDirName":"nuxtjs","slug":"/nuxtjs/nuxt useNuxtData - cache","permalink":"/docs/nuxtjs/nuxt useNuxtData - cache","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"nuxt useFetch","permalink":"/docs/nuxtjs/nuxt useFetch"},"next":{"title":"nuxt useSlots","permalink":"/docs/nuxtjs/nuxt useSlots"}}'),a=n(447259),o=n(255511);let u={},r="nuxt useNuxtData",c={},d=[{value:"refreshNuxtData",id:"refreshnuxtdata",level:2},{value:"usage",id:"usage",level:2},{value:"useFetch cache option",id:"usefetch-cache-option",level:2}];function l(e){let t={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"nuxt-usenuxtdata",children:"nuxt useNuxtData"})}),"\n",(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsx)(t.p,{children:"useAsyncData, useLazyAsyncData, useFetch, useLazyFetch\uB294 \uB370\uC774\uD130\uB97C \uCE90\uC2DC\uD55C\uB2E4"}),"\n",(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsx)(t.p,{children:"useNuxtData\uB294 \uCE90\uC2DC\uB370\uC774\uD130\uC5D0 \uC811\uADFC \uD560 \uC218 \uC788\uB294 api"}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"refreshnuxtdata",children:"refreshNuxtData"}),"\n",(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsx)(t.p,{children:"\uCE90\uC2DC\uB97C \uCD08\uAE30\uD654"}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"usage",children:"usage"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:'// useFetch \uC0AC\uC6A9\uC2DC \uC635\uC158\uC5D0 key\uB97C \uC9C0\uC815 \uCE90\uC2DC\r\nconst { data } = await useFetch("/api/posts", { key: "posts" });\r\n// posts\uB77C\uB294 \uD0A4 \uC774\uB984\uC73C\uB85C \uCE90\uC2DC \uB370\uC774\uD130 \uBC1B\uC544\uC624\uAE30\r\nconst { data: posts } = useNuxtData("posts");\n'})}),"\n",(0,a.jsx)(t.h2,{id:"usefetch-cache-option",children:"useFetch cache option"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:'const newTodo = ref("");\r\nconst previousTodos = ref([]);\r\n\r\n// Access to the cached value of useFetch in todos.vue\r\nconst { data: todos } = useNuxtData("todos");\r\nconst { data } = await useFetch("/api/addTodo", {\r\n  key: "addTodo",\r\n  method: "post",\r\n  body: {\r\n    todo: newTodo.value,\r\n  },\r\n  onRequest() {\r\n    previousTodos.value = todos.value; // Store the previously cached value to restore if fetch fails.\r\n    todos.value.push(newTodo.value); // Optimistically update the todos.\r\n  },\r\n  onRequestError() {\r\n    todos.value = previousTodos.value; // Rollback the data if the request failed.\r\n  },\r\n  async onResponse() {\r\n    await refreshNuxtData("todos"); // Invalidate todos in the background if the request succeeded.\r\n  },\r\n});\n'})})]})}function i(e={}){let{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},255511:function(e,t,n){n.d(t,{R:()=>u,x:()=>r});var s=n(596363);let a={},o=s.createContext(a);function u(e){let t=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:u(e.components),s.createElement(o.Provider,{value:t},e.children)}}}]);