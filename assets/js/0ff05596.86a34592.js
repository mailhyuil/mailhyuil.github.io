"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[171508],{529087:(n,e,s)=>{s.d(e,{R:()=>i,x:()=>o});var t=s(596363);const r={},a=t.createContext(r);function i(n){const e=t.useContext(a);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:i(n.components),t.createElement(a.Provider,{value:e},n.children)}},817909:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>h,contentTitle:()=>o,default:()=>l,frontMatter:()=>i,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"db/db \ubd84\uc0b0 \uc2dc\uc2a4\ud15c sharding consistent-hash","title":"db sharding consistent-hash","description":"\ub178\ub4dc\uc758 \uc218\uac00 3\uac1c\uc778 \uacbd\uc6b0 hashFunc(key) % 3 \uc73c\ub85c \ub178\ub4dc\ub97c \uc120\ud0dd\ud558\uc5ec \uc694\uccad","source":"@site/docs/db/db \ubd84\uc0b0 \uc2dc\uc2a4\ud15c sharding consistent-hash.md","sourceDirName":"db","slug":"/db/db \ubd84\uc0b0 \uc2dc\uc2a4\ud15c sharding consistent-hash","permalink":"/docs/db/db \ubd84\uc0b0 \uc2dc\uc2a4\ud15c sharding consistent-hash","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"db \ubd84\uc0b0 \uc2dc\uc2a4\ud15c postgres + mongodb","permalink":"/docs/db/db \ubd84\uc0b0 \uc2dc\uc2a4\ud15c postgres + mongodb"},"next":{"title":"db sharding (\uc0e4\ub529)","permalink":"/docs/db/db \ubd84\uc0b0 \uc2dc\uc2a4\ud15c sharding"}}');var r=s(447259),a=s(529087);const i={},o="db sharding consistent-hash",h={},c=[{value:"install",id:"install",level:2},{value:"usage",id:"usage",level:2}];function d(n){const e={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,a.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"db-sharding-consistent-hash",children:"db sharding consistent-hash"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"\ub178\ub4dc\uc758 \uc218\uac00 3\uac1c\uc778 \uacbd\uc6b0 hashFunc(key) % 3 \uc73c\ub85c \ub178\ub4dc\ub97c \uc120\ud0dd\ud558\uc5ec \uc694\uccad"}),"\n",(0,r.jsx)(e.p,{children:"\ub9cc\uc57d \ub178\ub4dc\uc758 \uc218\uac00 \ub298\uc5b4\ub098\uba74 hashFunc(key) % 4\ub85c \uae30\uc874\uc5d0 \uc120\ud0dd\ud558\ub358 \ub178\ub4dc\uac00 \ubc14\ub014 \uc218 \uc788\uc74c"}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"\uc774\ub97c \ubc29\uc9c0\ud558\uae30 \uc704\ud574 consistent-hash\ub294 hash ring\uc774\ub77c\ub294 \uac1c\ub150\uc744 \uc0ac\uc6a9\ud558\uc5ec \ub178\ub4dc\ub97c \uc120\ud0dd"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"install",children:"install"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sh",children:"npm i consistent-hash\n"})}),"\n",(0,r.jsx)(e.h2,{id:"usage",children:"usage"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:'const ConsistentHash = require("consistent-hash");\r\nconst hashRing = new ConsistentHash(["5432", "5433", "5434"]);\r\n\r\nconst entityId = "1234"; // sharding key\r\nconst hash = crypto.createHash("md5").update(entityId).digest("hex");\r\nconst server = hashRing.get(hash.slice(0, 5));\n'})})]})}function l(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(d,{...n})}):d(n)}}}]);