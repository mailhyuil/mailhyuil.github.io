"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["525538"],{385665:function(e,t,r){r.r(t),r.d(t,{frontMatter:()=>a,toc:()=>i,default:()=>u,metadata:()=>n,assets:()=>l,contentTitle:()=>p});var n=JSON.parse('{"id":"nestjs/nest passport oauth","title":"nest oauth passport","description":"https \uD658\uACBD\uC5D0\uC11C\uB9CC \uC815\uC0C1\uC801\uC73C\uB85C \uD14C\uC2A4\uD2B8\uAC00 \uAC00\uB2A5\uD558\uB2E4","source":"@site/docs/nestjs/nest passport oauth.md","sourceDirName":"nestjs","slug":"/nestjs/nest passport oauth","permalink":"/docs/nestjs/nest passport oauth","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"nest oauth passport","permalink":"/docs/nestjs/nest passport jwt"},"next":{"title":"nest platform","permalink":"/docs/nestjs/nest platform"}}'),s=r(447259),o=r(255511);let a={},p="nest oauth passport",l={},i=[{value:"install",id:"install",level:2},{value:"strategy \uC0DD\uC131",id:"strategy-\uC0DD\uC131",level:2},{value:"guard \uC0AC\uC6A9",id:"guard-\uC0AC\uC6A9",level:2}];function c(e){let t={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"nest-oauth-passport",children:"nest oauth passport"})}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsx)(t.p,{children:"https \uD658\uACBD\uC5D0\uC11C\uB9CC \uC815\uC0C1\uC801\uC73C\uB85C \uD14C\uC2A4\uD2B8\uAC00 \uAC00\uB2A5\uD558\uB2E4"}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsx)(t.p,{children:"https \uD658\uACBD\uC774 \uC544\uB2C8\uB77C\uBA74 ngrok \uC744 \uC0AC\uC6A9\uD574\uC11C (http\uB97C https\uD658\uACBD\uC73C\uB85C \uBC14\uAFBC url\uC744 \uC900\uB2E4) \uD14C\uC2A4\uD2B8 \uD558\uC790!"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"install",children:"install"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-sh",children:"npm i passport\r\nnpm i @nestjs/passport\r\n\r\n# local\r\nnpm i passport-local\r\nnpm i -D @types/passport-local\r\n\r\n# kakao\r\nnpm i passport-kakao\r\nnpm i -D @types/passport-kakao\r\n\r\n# google\r\nnpm i passport-google-oauth\r\nnpm i -D @types/passport-google-oauth\r\n\r\n# facebook\r\nnpm i passport-facebook\r\nnpm i -D @types/passport-facebook\r\n# etc\n"})}),"\n",(0,s.jsx)(t.h2,{id:"strategy-\uC0DD\uC131",children:"strategy \uC0DD\uC131"}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsx)(t.p,{children:"\uC0DD\uC131\uB41C strategy\uB97C module\uC758 providers\uC5D0 \uB4F1\uB85D"}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:'import { Strategy } from "passport-local";\r\nimport { PassportStrategy } from "@nestjs/passport";\r\nimport { Injectable, UnauthorizedException } from "@nestjs/common";\r\nimport { AuthService } from "./auth.service";\r\n\r\n@Injectable()\r\nexport class LocalStrategy extends PassportStrategy(Strategy) {\r\n  constructor(private authService: AuthService) {\r\n    super();\r\n  }\r\n\r\n  async validate(username: string, password: string): Promise<any> {\r\n    const user = await this.authService.validateUser(username, password);\r\n    if (!user) {\r\n      throw new UnauthorizedException();\r\n    }\r\n    return user;\r\n  }\r\n}\n'})}),"\n",(0,s.jsx)(t.h2,{id:"guard-\uC0AC\uC6A9",children:"guard \uC0AC\uC6A9"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:'import { Controller, Request, Post, UseGuards } from "@nestjs/common";\r\nimport { AuthGuard } from "@nestjs/passport";\r\n\r\n@Controller()\r\nexport class AppController {\r\n  @UseGuards(AuthGuard("local"))\r\n  @Post("auth/login")\r\n  async login(@Request() req) {\r\n    return req.user;\r\n  }\r\n}\n'})})]})}function u(e={}){let{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},255511:function(e,t,r){r.d(t,{R:()=>a,x:()=>p});var n=r(596363);let s={},o=n.createContext(s);function a(e){let t=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function p(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),n.createElement(o.Provider,{value:t},e.children)}}}]);