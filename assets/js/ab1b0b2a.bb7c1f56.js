"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[64730],{184079:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>c,metadata:()=>r,toc:()=>i});const r=JSON.parse('{"id":"javascript/js Mutex \ubba4\ud14d\uc2a4","title":"js Mutex \ubba4\ud14d\uc2a4","description":"\ube44\uad00\uc801 \ub77d","source":"@site/docs/javascript/js Mutex \ubba4\ud14d\uc2a4.md","sourceDirName":"javascript","slug":"/javascript/js Mutex \ubba4\ud14d\uc2a4","permalink":"/docs/javascript/js Mutex \ubba4\ud14d\uc2a4","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Math","permalink":"/docs/javascript/js Math"},"next":{"title":"js Object.assign()","permalink":"/docs/javascript/js Object.assign"}}');var s=t(447259),a=t(529087);const c={},o="js Mutex \ubba4\ud14d\uc2a4",l={},i=[{value:"mutex.js",id:"mutexjs",level:2},{value:"usage",id:"usage",level:2}];function u(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"js-mutex-\ubba4\ud14d\uc2a4",children:"js Mutex \ubba4\ud14d\uc2a4"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"\ube44\uad00\uc801 \ub77d"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"mutexjs",children:"mutex.js"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"const _awaitUnlock = async (mutex) => {\r\n  if (mutex._locked) {\r\n    // \uc7a0\uae08 \uc0c1\ud0dc 0.1\ucd08 \ud6c4\uc5d0 \ub2e4\uc2dc \ud655\uc778\r\n    return new Promise((resolve) => {\r\n      setTimeout(() => {\r\n        _awaitUnlock(mutex).then(() => resolve());\r\n      }, 100);\r\n    });\r\n  }\r\n  return Promise.resolve();\r\n};\r\n\r\nclass Mutex {\r\n  constructor() {\r\n    this._locked = false;\r\n  }\r\n\r\n  async lock() {\r\n    // \uc7a0\uae08 \uc0c1\ud0dc\uac00 \ud480\ub9b4 \ub54c \uae4c\uc9c0 \ub300\uae30\r\n    await _awaitUnlock(this);\r\n    this._locked = true;\r\n  }\r\n\r\n  // \uc7a0\uae08 \ud574\uc81c\ub294 \ubcc4\ub3c4\uc758 \uc81c\uc57d\uc744 \uc8fc\uc9c0 \uc54a\uc74c.\r\n  release() {\r\n    this._locked = false;\r\n  }\r\n}\r\n\r\nexport default Mutex;\n"})}),"\n",(0,s.jsx)(n.h2,{id:"usage",children:"usage"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"const mutex = new Mutex();\r\n\r\nconst parallelLogic = async () => {\r\n  await mutex.lock(); // \uc5ec\uae30\uc11c mutex\uac00 \uc720\ud734 \uc0c1\ud0dc\uc77c \ub54c \uae4c\uc9c0 \ub300\uae30\ud558\uba70, \uc720\ud734 \uc0c1\ud0dc\uac00 \ub418\uba74 \uc7a0\uae08\uc744 \uac78\uace0 \uc9c4\ud589\ud55c\ub2e4.\r\n  try {\r\n    // ..\ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1..\r\n  } finally {\r\n    mutex.release(); // \ubc18\ub4dc\uc2dc \uc2e4\ud589\ud55c\ub2e4. \uadf8\ub807\uc9c0 \uc54a\uc73c\uba74 Dead-lock \ubc1c\uc0dd\ud568.\r\n  }\r\n};\n"})})]})}function d(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},529087:(e,n,t)=>{t.d(n,{R:()=>c,x:()=>o});var r=t(596363);const s={},a=r.createContext(s);function c(e){const n=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);