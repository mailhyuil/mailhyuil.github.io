"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["17109"],{288952:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>a,toc:()=>v,default:()=>u,metadata:()=>r,assets:()=>o,contentTitle:()=>c});var r=JSON.parse('{"id":"x design pattern/Behavioral event bus","title":"event bus (Event Channel)","description":"broker, message broker, event bus, event channel \uB4F1 \uB2E4\uC591\uD55C \uC774\uB984\uC73C\uB85C \uBD88\uB9B0\uB2E4.","source":"@site/docs/x design pattern/Behavioral event bus.md","sourceDirName":"x design pattern","slug":"/x design pattern/Behavioral event bus","permalink":"/docs/x design pattern/Behavioral event bus","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"design pattern Command Pattern","permalink":"/docs/x design pattern/Behavioral command"},"next":{"title":"interpreter","permalink":"/docs/x design pattern/Behavioral interpreter"}}'),s=t(447259),i=t(255511);let a={},c="event bus (Event Channel)",o={},v=[{value:"sticky event",id:"sticky-event",level:2}];function l(e){let n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"event-bus-event-channel",children:"event bus (Event Channel)"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"broker, message broker, event bus, event channel \uB4F1 \uB2E4\uC591\uD55C \uC774\uB984\uC73C\uB85C \uBD88\uB9B0\uB2E4."}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"\uC774\uBCA4\uD2B8 \uBC84\uC2A4\uB294 \uBA54\uC138\uC9C0 \uBE0C\uB85C\uCEE4\uC758 \uC77C\uC885\uC774\uB2E4"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"eventEmitter\uB294 \uC635\uC800\uBC84 \uD328\uD134"}),"\n",(0,s.jsx)(n.p,{children:"eventBus\uB294 pub/sub \uD328\uD134\uC774\uB2E4."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"class EventBus {\r\n  events: { [key: string]: any };\r\n  constructor() {\r\n    this.events = {};\r\n  }\r\n\r\n  on(eventName: string, callback: any) {\r\n    if (!this.events[eventName]) {\r\n      this.events[eventName] = [];\r\n    }\r\n    this.events[eventName].push(callback);\r\n  }\r\n\r\n  off(eventName: string, callback: any) {\r\n    if (this.events[eventName]) {\r\n      this.events[eventName] = this.events[eventName].filter((cb: any) => cb !== callback);\r\n    }\r\n  }\r\n\r\n  emit(eventName: string, data: any) {\r\n    if (this.events[eventName]) {\r\n      this.events[eventName].forEach((callback: any) => callback(data));\r\n    }\r\n  }\r\n}\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'import { v4 as uuid } from "uuid";\r\n\r\ntype EventHandler = (args?: any) => void;\r\n\r\ninterface EventSubscription {\r\n  id: string;\r\n  event: string;\r\n  handler: EventHandler;\r\n}\r\n\r\ninterface StickyEvent {\r\n  event: string;\r\n  args?: any;\r\n}\r\n\r\nclass EventBus {\r\n  private subscriptions: EventSubscription[] = [];\r\n  private stickyEvents: StickyEvent[] = [];\r\n\r\n  public register(event: string, handler: EventHandler): string {\r\n    const id = uuid();\r\n    const subscription = { id, event, handler };\r\n    this.subscriptions.push(subscription);\r\n    return id;\r\n  }\r\n\r\n  public unregister(id: string): void {\r\n    const index = this.subscriptions.findIndex((subscription) => subscription.id === id);\r\n    if (index !== -1) {\r\n      this.subscriptions.splice(index, 1);\r\n    }\r\n  }\r\n\r\n  public post(event: string, args?: any): void {\r\n    const subscriptions = this.subscriptions.filter((subscription) => subscription.event === event);\r\n    subscriptions.forEach((subscription) => subscription.handler(args));\r\n  }\r\n\r\n  public postStickyEvent(event: string, args?: any): void {\r\n    this.stickyEvents.push({ event, args });\r\n  }\r\n\r\n  public consumeStickyEvent(event: string): void {\r\n    const index = this.stickyEvents.findIndex((stickyEvent) => stickyEvent.event === event);\r\n    if (index !== -1) {\r\n      const { args } = this.stickyEvents[index];\r\n      this.stickyEvents.splice(index, 1);\r\n      this.post(event, args);\r\n    }\r\n  }\r\n}\r\n\r\nconst eventBus = new EventBus();\r\neventBus.postStickyEvent("eventName", "some data");\n'})}),"\n",(0,s.jsx)(n.h2,{id:"sticky-event",children:"sticky event"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"\uC2E4\uD589\uB410\uB358 \uB9C8\uC9C0\uB9C9 \uC774\uBCA4\uD2B8??"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:'In an event bus, a "sticky event" is an event that stays "sticky" in memory, even after it has been published, so that any future subscribers to that event can receive the most recent value of the event without having to wait for a new instance of the event to be published.'}),"\n"]}),"\n"]})]})}function u(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},255511:function(e,n,t){t.d(n,{R:()=>a,x:()=>c});var r=t(596363);let s={},i=r.createContext(s);function a(e){let n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);