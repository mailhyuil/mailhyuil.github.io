"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[93914],{297108:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>c,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"nestjs/nest base filter exception","title":"nest Exception filters","description":"nestjs\uc758 \uc5d0\ub7ec \uc2a4\ud0a4\ub9c8\ub294 \uae30\ubcf8\uc73c\ub85c \\\\{statusCode, message, error\\\\}\ub85c \uad6c\uc131\ub418\uc5b4\uc788\ub2e4.","source":"@site/docs/nestjs/nest base filter exception.md","sourceDirName":"nestjs","slug":"/nestjs/nest base filter exception","permalink":"/docs/nestjs/nest base filter exception","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"nest base error","permalink":"/docs/nestjs/nest base filter exception custom"},"next":{"title":"forwardRef","permalink":"/docs/nestjs/nest base forwardRef"}}');var r=n(447259),o=n(529087);const i={},c="nest Exception filters",l={},a=[{value:"\ub85c\uc9c1\uc758 \uc2e4\ud328 vs \ub85c\uc9c1\uc678\uc758 \uc2e4\ud328 (\uc2dc\uc2a4\ud15c \uc2e4\ud328 : api\uc11c\ubc84 \uc5f0\uacb0 \uc2e4\ud328 ..\ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5f0\uacb0 \uc2e4\ud328...)",id:"\ub85c\uc9c1\uc758-\uc2e4\ud328-vs-\ub85c\uc9c1\uc678\uc758-\uc2e4\ud328-\uc2dc\uc2a4\ud15c-\uc2e4\ud328--api\uc11c\ubc84-\uc5f0\uacb0-\uc2e4\ud328-\ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5f0\uacb0-\uc2e4\ud328",level:2},{value:"\ucee4\uc2a4\ud140 \uc608\uc678 \ud544\ud130",id:"\ucee4\uc2a4\ud140-\uc608\uc678-\ud544\ud130",level:2},{value:"\uc804\uc5ed \uc0ac\uc6a9",id:"\uc804\uc5ed-\uc0ac\uc6a9",level:2},{value:"\uba54\uc18c\ub4dc\uc5d0 \ud544\ud130 \uc0ac\uc6a9",id:"\uba54\uc18c\ub4dc\uc5d0-\ud544\ud130-\uc0ac\uc6a9",level:2}];function p(e){const t={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"nest-exception-filters",children:"nest Exception filters"})}),"\n",(0,r.jsxs)(t.blockquote,{children:["\n",(0,r.jsx)(t.p,{children:"nestjs\uc758 \uc5d0\ub7ec \uc2a4\ud0a4\ub9c8\ub294 \uae30\ubcf8\uc73c\ub85c {statusCode, message, error}\ub85c \uad6c\uc131\ub418\uc5b4\uc788\ub2e4."}),"\n",(0,r.jsxs)(t.blockquote,{children:["\n",(0,r.jsx)(t.p,{children:"\ub9cc\uc57d \uc2a4\ud0a4\ub9c8\ub97c \ubcc0\uacbd\ud558\uace0 \uc2f6\uac70\ub098 (timestamp..), \ub85c\uae45\uac19\uc740 \uc791\uc5c5\uc744 \ucd94\uac00\ud558\uace0 \uc2f6\ub2e4\uba74 Exception filters\ub97c \uc0ac\uc6a9\ud558\uba74 \ub41c\ub2e4."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"\ub85c\uc9c1\uc758-\uc2e4\ud328-vs-\ub85c\uc9c1\uc678\uc758-\uc2e4\ud328-\uc2dc\uc2a4\ud15c-\uc2e4\ud328--api\uc11c\ubc84-\uc5f0\uacb0-\uc2e4\ud328-\ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5f0\uacb0-\uc2e4\ud328",children:"\ub85c\uc9c1\uc758 \uc2e4\ud328 vs \ub85c\uc9c1\uc678\uc758 \uc2e4\ud328 (\uc2dc\uc2a4\ud15c \uc2e4\ud328 : api\uc11c\ubc84 \uc5f0\uacb0 \uc2e4\ud328 ..\ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5f0\uacb0 \uc2e4\ud328...)"}),"\n",(0,r.jsxs)(t.blockquote,{children:["\n",(0,r.jsx)(t.p,{children:"\ub85c\uc9c1\uc758 \uc2e4\ud328\ub294 result \uac1d\uccb4 \ub610\ub294 customException \ub85c \ucc98\ub9ac"}),"\n",(0,r.jsxs)(t.blockquote,{children:["\n",(0,r.jsx)(t.p,{children:"\uc2dc\uc2a4\ud15c\uc801\uc778 \uc2e4\ud328\ub294 exceptionFilter\ub97c \ud1b5\ud574\uc11c \ub85c\uae45"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"\ucee4\uc2a4\ud140-\uc608\uc678-\ud544\ud130",children:"\ucee4\uc2a4\ud140 \uc608\uc678 \ud544\ud130"}),"\n",(0,r.jsxs)(t.blockquote,{children:["\n",(0,r.jsx)(t.p,{children:"stacktrace\ub294 \ub85c\uadf8\ub85c \ub0a8\uae30\uace0 \uc720\uc800\uc5d0\uac8c\ub294 \uc5d0\ub7ec\uba54\uc138\uc9c0\ub9cc \ubcf4\ub0b4\uc57c\ud55c\ub2e4."}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",children:'// HttpExceptionFilter.ts\r\n\r\nimport { ExceptionFilter, Catch, ArgumentsHost, HttpException } from "@nestjs/common";\r\nimport { Request, Response } from "express";\r\nimport { MyLogger } from "../MyLogger";\r\n\r\n@Catch(HttpException)\r\nexport class HttpExceptionFilter implements ExceptionFilter {\r\n  constructor(private readonly logger: MyLogger) {}\r\n\r\n  catch(exception: HttpException, host: ArgumentsHost) {\r\n    const ctx = host.switchToHttp();\r\n    const response = ctx.getResponse<Response>();\r\n    const request = ctx.getRequest<Request>();\r\n    const status = exception.getStatus();\r\n\r\n    if (status >= 500) {\r\n      // \uc2dc\uc2a4\ud15c \uc2e4\ud328\ub97c \ub85c\uae45\r\n      this.logger.error({ request, response });\r\n    }\r\n\r\n    response.status(status).json({\r\n      statusCode: status,\r\n      timestamp: new Date().toISOString(),\r\n      path: request.url,\r\n    });\r\n  }\r\n}\n'})}),"\n",(0,r.jsx)(t.h2,{id:"\uc804\uc5ed-\uc0ac\uc6a9",children:"\uc804\uc5ed \uc0ac\uc6a9"}),"\n",(0,r.jsxs)(t.blockquote,{children:["\n",(0,r.jsx)(t.p,{children:"main.ts \ub610\ub294 app.module.ts\uc5d0 \ub4f1\ub85d"}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",children:"// app.module.ts\r\nproviders: [\r\n  {\r\n    provide: APP_FILTER,\r\n    useClass: HttpExceptionFilter,\r\n  },\r\n];\r\n// main.ts\r\n// app.useGlobalFilters(new HttpExceptionFilter());\n"})}),"\n",(0,r.jsx)(t.h2,{id:"\uba54\uc18c\ub4dc\uc5d0-\ud544\ud130-\uc0ac\uc6a9",children:"\uba54\uc18c\ub4dc\uc5d0 \ud544\ud130 \uc0ac\uc6a9"}),"\n",(0,r.jsxs)(t.blockquote,{children:["\n",(0,r.jsx)(t.p,{children:"UseFilters() \ub370\ucf54\ub808\uc774\ud130 \uc0ac\uc6a9"}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",children:"@Post()\r\n@UseFilters(new HttpExceptionFilter())\r\nasync create(@Body() createCatDto: CreateCatDto) {\r\n  throw new ForbiddenException();\r\n}\n"})})]})}function d(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},529087:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>c});var s=n(596363);const r={},o=s.createContext(r);function i(e){const t=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(o.Provider,{value:t},e.children)}}}]);