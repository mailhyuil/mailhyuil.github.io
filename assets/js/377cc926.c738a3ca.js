"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["563088"],{171754:function(e,n,r){r.r(n),r.d(n,{frontMatter:()=>a,toc:()=>i,default:()=>p,metadata:()=>o,assets:()=>d,contentTitle:()=>c});var o=JSON.parse('{"id":"base/vscode devcontainers docker","title":"vscode devcontainers docker","description":".devcontainer/devcontainer.json","source":"@site/docs/base/vscode devcontainers docker.md","sourceDirName":"base","slug":"/base/vscode devcontainers docker","permalink":"/docs/base/vscode devcontainers docker","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"vscode debug","permalink":"/docs/base/vscode debug"},"next":{"title":"vscode devcontainers","permalink":"/docs/base/vscode devcontainers"}}'),t=r(447259),s=r(255511);let a={},c="vscode devcontainers docker",d={},i=[{value:".devcontainer/devcontainer.json",id:"devcontainerdevcontainerjson",level:2},{value:".devcontainer/Dockerfile",id:"devcontainerdockerfile",level:2},{value:".devcontainer/docker-compose.yml",id:"devcontainerdocker-composeyml",level:2}];function l(e){let n={code:"code",h1:"h1",h2:"h2",header:"header",pre:"pre",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"vscode-devcontainers-docker",children:"vscode devcontainers docker"})}),"\n",(0,t.jsx)(n.h2,{id:"devcontainerdevcontainerjson",children:".devcontainer/devcontainer.json"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'// For format details, see https://aka.ms/devcontainer.json. For config options, see the\r\n// README at: https://github.com/devcontainers/templates/tree/main/src/typescript-node\r\n{\r\n  "name": "Node.js & TypeScript",\r\n  "service": "devcontainer",\r\n  "workspaceFolder": "/workspaces/${localWorkspaceFolderBasename}",\r\n  // Or use a Dockerfile or Docker Compose file. More info: https://containers.dev/guide/dockerfile\r\n  "dockerComposeFile": ["docker-compose.yml"]\r\n\r\n  // Features to add to the dev container. More info: https://containers.dev/features.\r\n  // "features": {},\r\n\r\n  // Use \'forwardPorts\' to make a list of ports inside the container available locally.\r\n  // "forwardPorts": [],\r\n\r\n  // Use \'postCreateCommand\' to run commands after the container is created.\r\n  // "postCreateCommand": "yarn install",\r\n\r\n  // Configure tool-specific properties.\r\n  // "customizations": {},\r\n\r\n  // Uncomment to connect as root instead. More info: https://aka.ms/dev-containers-non-root.\r\n  // "remoteUser": "root"\r\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"devcontainerdockerfile",children:".devcontainer/Dockerfile"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dockerfile",children:"FROM mcr.microsoft.com/devcontainers/typescript-node:1-22-bookworm\r\n\r\nRUN npm install -g pnpm\r\nRUN npm install -g nx\r\nRUN npm install -g prisma\r\nRUN npm install -g tsx\n"})}),"\n",(0,t.jsx)(n.h2,{id:"devcontainerdocker-composeyml",children:".devcontainer/docker-compose.yml"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'# .devcontainer/docker-compose.yml\r\nversion: "3.9"\r\n\r\nservices:\r\n  devcontainer:\r\n    container_name: devcontainer\r\n    build:\r\n      context: .\r\n      dockerfile: Dockerfile # \u{1F448} Dockerfile \uC0AC\uC6A9\r\n    volumes:\r\n      - ../..:/workspaces:cached\r\n      - nx-cache:/workspaces/.nx/cache\r\n      - pnpm-cache:/root/.pnpm-store\r\n      - pnpm-store:/root/.local/share/pnpm/store\r\n    command: sleep infinity\r\n    depends_on:\r\n      - db\r\n      - redis\r\n      - elasticmq\r\n    networks:\r\n      - default\r\n\r\n  db:\r\n    container_name: db\r\n    image: pgvector/pgvector:pg16\r\n    restart: unless-stopped\r\n    environment:\r\n      POSTGRES_USER: postgres\r\n      POSTGRES_PASSWORD: postgres\r\n      POSTGRES_DB: mydb\r\n      POSTGRES_INITDB_ARGS: "-E UTF8 --locale=C"\r\n      PGDATA: /var/lib/postgresql/data/pgdata\r\n    ports:\r\n      - "5433:5432"\r\n    volumes:\r\n      - postgres-data:/var/lib/postgresql/data\r\n    networks:\r\n      - default\r\n  redis:\r\n    container_name: redis\r\n    image: redis:7-alpine\r\n    restart: unless-stopped\r\n    ports:\r\n      - "6379:6379"\r\n    volumes:\r\n      - redis-data:/data\r\n    networks:\r\n      - default\r\n  elasticmq:\r\n    container_name: elasticmq\r\n    image: softwaremill/elasticmq-native\r\n    restart: unless-stopped\r\n    ports:\r\n      - "9324:9324"\r\n      - "9325:9325"\r\n    networks:\r\n      - default\r\n\r\nvolumes:\r\n  postgres-data:\r\n  redis-data:\r\n  nx-cache:\r\n  pnpm-store: # pnpm \uAE00\uB85C\uBC8C \uC2A4\uD1A0\uC5B4\r\n  pnpm-cache: # pnpm \uCE90\uC2DC\r\n\r\nnetworks:\r\n  default:\r\n    driver: bridge\n'})})]})}function p(e={}){let{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},255511:function(e,n,r){r.d(n,{R:()=>a,x:()=>c});var o=r(596363);let t={},s=o.createContext(t);function a(e){let n=o.useContext(s);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);