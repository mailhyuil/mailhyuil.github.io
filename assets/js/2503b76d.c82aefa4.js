"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["976753"],{927477:function(e,r,t){t.r(r),t.d(r,{frontMatter:()=>l,toc:()=>s,default:()=>p,metadata:()=>n,assets:()=>d,contentTitle:()=>a});var n=JSON.parse('{"id":"protocol/L5 TLS certbot \uC778\uC99D\uBC29\uC2DD DNS-01 wildcard \uC0AC\uC6A9\uD558\uAE30","title":"certbot wildcard","description":"--server https://acme-v02.api.letsencrypt.org/directory \uC635\uC158\uC744 \uC0AC\uC6A9\uD558\uC5EC\uC57C wildcard \uC778\uC99D\uC11C\uB97C \uBC1C\uAE09\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.","source":"@site/docs/protocol/L5 TLS certbot \uC778\uC99D\uBC29\uC2DD DNS-01 wildcard \uC0AC\uC6A9\uD558\uAE30.md","sourceDirName":"protocol","slug":"/protocol/L5 TLS certbot \uC778\uC99D\uBC29\uC2DD DNS-01 wildcard \uC0AC\uC6A9\uD558\uAE30","permalink":"/docs/protocol/L5 TLS certbot \uC778\uC99D\uBC29\uC2DD DNS-01 wildcard \uC0AC\uC6A9\uD558\uAE30","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"certbot cloudflare","permalink":"/docs/protocol/L5 TLS certbot \uC778\uC99D\uBC29\uC2DD DNS-01 cloudflare"},"next":{"title":"L5 TLS certbot \uC778\uC99D\uBC29\uC2DD DNS-01","permalink":"/docs/protocol/L5 TLS certbot \uC778\uC99D\uBC29\uC2DD DNS-01"}}'),o=t(447259),c=t(255511);let l={},a="certbot wildcard",d={},s=[{value:"renew-hook.sh",id:"renew-hooksh",level:2}];function i(e){let r={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,c.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.header,{children:(0,o.jsx)(r.h1,{id:"certbot-wildcard",children:"certbot wildcard"})}),"\n",(0,o.jsxs)(r.blockquote,{children:["\n",(0,o.jsxs)(r.p,{children:["--server ",(0,o.jsx)(r.a,{href:"https://acme-v02.api.letsencrypt.org/directory",children:"https://acme-v02.api.letsencrypt.org/directory"})," \uC635\uC158\uC744 \uC0AC\uC6A9\uD558\uC5EC\uC57C wildcard \uC778\uC99D\uC11C\uB97C \uBC1C\uAE09\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."]}),"\n",(0,o.jsxs)(r.blockquote,{children:["\n",(0,o.jsx)(r.p,{children:"renew\uB97C \uD558\uAE30 \uC704\uD574\uC11C\uB294"}),"\n",(0,o.jsx)(r.p,{children:"--manual-auth-hook renew-hook.sh \uB97C \uC0AC\uC6A9\uD574\uC11C \uC778\uC99D\uC11C\uB97C \uBC1C\uAE09 \uBC1B\uC544\uC57C \uD55C\uB2E4."}),"\n",(0,o.jsx)(r.p,{children:"\uB610\uB294 python3-certbot-dns-cloudflare \uAC19\uC740 dns plugin\uC744 \uC0AC\uC6A9"}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-sh",children:'certbot certonly --manual --preferred-challenges dns --email dep.agile@gmail.com --server https://acme-v02.api.letsencrypt.org/directory --agree-tos -d dep.team -d *.dep.team\r\n\r\n# DNS TXT Record \uB4F1\uB85D\r\n# _acme-challenge.dep.team. 300 IN TXT "..."\n'})}),"\n",(0,o.jsx)(r.h2,{id:"renew-hooksh",children:"renew-hook.sh"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-sh",children:'#!/bin/bash\r\n\r\nAPI_KEY="your_cloudflare_api_key"\r\nEMAIL="your_email@example.com"\r\nZONE_ID="your_zone_id"\r\n\r\n# Certbot\uC774 \uC81C\uACF5\uD558\uB294 \uD658\uACBD \uBCC0\uC218\r\nDOMAIN="_acme-challenge.$CERTBOT_DOMAIN"\r\nTOKEN_VALUE=$CERTBOT_VALIDATION\r\n\r\n# Cloudflare API\uB97C \uC0AC\uC6A9\uD558\uC5EC DNS TXT \uB808\uCF54\uB4DC \uC0DD\uC131\r\ncurl -X POST "https://api.cloudflare.com/client/v4/zones/$ZONE_ID/dns_records" \\\r\n     -H "X-Auth-Email: $EMAIL" \\\r\n     -H "X-Auth-Key: $API_KEY" \\\r\n     -H "Content-Type: application/json" \\\r\n     --data \'{"type":"TXT","name":"\'"$DOMAIN"\'","content":"\'"$TOKEN_VALUE"\'","ttl":120}\'\n'})})]})}function p(e={}){let{wrapper:r}={...(0,c.R)(),...e.components};return r?(0,o.jsx)(r,{...e,children:(0,o.jsx)(i,{...e})}):i(e)}},255511:function(e,r,t){t.d(r,{R:()=>l,x:()=>a});var n=t(596363);let o={},c=n.createContext(o);function l(e){let r=n.useContext(c);return n.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),n.createElement(c.Provider,{value:r},e.children)}}}]);