"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["707987"],{868642:function(n,e,r){r.r(e),r.d(e,{frontMatter:()=>i,toc:()=>h,default:()=>l,metadata:()=>c,assets:()=>s,contentTitle:()=>o});var c=JSON.parse('{"id":"nginx/nginx cache","title":"proxy cache nginx cache","description":"\uCE90\uC2DC \uD65C\uC131\uD654","source":"@site/docs/nginx/nginx cache.md","sourceDirName":"nginx","slug":"/nginx/nginx cache","permalink":"/docs/nginx/nginx cache","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"nginx cache \uD558\uB4DC \uB4DC\uB77C\uC774\uBE0C \uBD84\uD560","permalink":"/docs/nginx/nginx cache \uD558\uB4DC \uB4DC\uB77C\uC774\uBE0C \uBD84\uD560"},"next":{"title":"nginx conf.d vs sites-available, sites-enabled","permalink":"/docs/nginx/nginx config conf.d vs sites-available & sites-enabled"}}'),t=r(447259),a=r(255511);let i={},o="proxy cache nginx cache",s={},h=[{value:"\uCE90\uC2DC \uD65C\uC131\uD654",id:"\uCE90\uC2DC-\uD65C\uC131\uD654",level:2}];function p(n){let e={code:"code",h1:"h1",h2:"h2",header:"header",pre:"pre",...(0,a.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"proxy-cache-nginx-cache",children:"proxy cache nginx cache"})}),"\n",(0,t.jsx)(e.h2,{id:"\uCE90\uC2DC-\uD65C\uC131\uD654",children:"\uCE90\uC2DC \uD65C\uC131\uD654"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-conf",children:"http {\r\n    # /data/nginx/cache \uBBF8\uB9AC \uC0DD\uC131\uD574\uB450\uAE30\r\n    # \uC774 \uB514\uB809\uD1A0\uB9AC\uC5D0 \uCE90\uC2DC \uD30C\uC77C\uC774 \uC0DD\uC131\uB41C\uB2E4.\r\n    # my_cache\uB77C\uB294 keys_zone\uC73C\uB85C 10mb\uC758 \uACF5\uC720\uBA54\uBAA8\uB9AC \uC124\uC815\r\n    # inactive=60m 60\uBD84\uAC04 \uC694\uCCAD\uC774 \uC5C6\uC73C\uBA74 \uCE90\uC2DC\uB97C \uC0AD\uC81C\uD55C\uB2E4.\r\n    # max_size=10g \uCE90\uC2DC \uD30C\uC77C\uC758 \uCD5C\uB300 \uD06C\uAE30\uB97C 10GB\uB85C \uC81C\uD55C\uD55C\uB2E4.\r\n    # min_free=1g \uCD5C\uC18C \uC5EC\uC720 \uACF5\uAC04\uC744 \uC124\uC815\uD569\uB2C8\uB2E4. \uC5EC\uC720 \uACF5\uAC04\uC774 \uBD80\uC871\uD574\uC9C0\uBA74 \uC624\uB798\uB41C \uCE90\uC2DC \uD30C\uC77C\uC744 \uC0AD\uC81C\uD569\uB2C8\uB2E4.\r\n    # levels=1:2 \uCE90\uC2DC \uD30C\uC77C\uC744 1\uB2E8\uACC4\uC758 \uD558\uC704 \uB514\uB809\uD1A0\uB9AC\uC5D0 2\uB2E8\uACC4\uB85C \uC800\uC7A5\uD55C\uB2E4.\r\n    # use_temp_path=off \uCE90\uC2DC \uD30C\uC77C\uC744 \uC0DD\uC131\uD560 \uB54C \uC784\uC2DC \uB514\uB809\uD1A0\uB9AC\uB97C \uC0AC\uC6A9\uD558\uC9C0 \uC54A\uB294\uB2E4.\r\n    proxy_cache_path /data/nginx/cache keys_zone=my_cache:10m max_size=10g levels=1:2  inactive=60m use_temp_path=off;\r\n\r\n    server {\r\n        # \uCE90\uC2DC \uC0AC\uC6A9 (\uBAA8\uB4E0 path)\r\n        proxy_cache my_cache;\r\n\r\n        location / {\r\n            # \uCE90\uC2DC \uC0AC\uC6A9 (\uD2B9\uC815 path)\r\n            proxy_cache my_cache;\r\n\r\n            # 200, 302 \uC751\uB2F5\uC744 10\uBD84\uAC04 \uCE90\uC2DC\uD55C\uB2E4.\r\n            proxy_cache_valid 200 302 10m;\r\n            # 404 \uC751\uB2F5\uC744 1\uBD84\uAC04 \uCE90\uC2DC\uD55C\uB2E4.\r\n            proxy_cache_valid 404 1m;\r\n\r\n            # \uD2B9\uC815 \uBA54\uC18C\uB4DC\uB97C \uCE90\uC2DC\uD55C\uB2E4.\r\n            proxy_cache_method GET HEAD POST;\r\n\r\n            # \uCE90\uC2DC \uD30C\uC77C\uC744 \uC0DD\uC131\uD560 \uB54C\uAE4C\uC9C0 \uB2E4\uB978 \uC694\uCCAD\uC744 \uB300\uAE30\uC2DC\uD0A8\uB2E4.\r\n            proxy_cache_lock on;\r\n\r\n            # \uCE90\uC2DC\uB41C \uC751\uB2F5\uC774 \uB9CC\uB8CC\uB418\uC5C8\uC744 \uB54C, \uBC31\uADF8\uB77C\uC6B4\uB4DC\uC5D0\uC11C \uBE44\uB3D9\uAE30\uC801\uC73C\uB85C \uCE90\uC2DC\uB97C \uC5C5\uB370\uC774\uD2B8\r\n            proxy_cache_background_update on;\r\n\r\n            # ETag \uB610\uB294 Last-Modified \uD5E4\uB354\uB97C \uC0AC\uC6A9\uD558\uC5EC \uC6D0\uBCF8(origin) \uC11C\uBC84\uC5D0 \uCE90\uC2DC\uB41C \uC751\uB2F5\uC774 \uC5EC\uC804\uD788 \uC720\uD6A8\uD55C\uC9C0 \uD655\uC778\r\n            # \uC6D0\uBCF8 \uC11C\uBC84\uAC00 304 Not Modified\uB97C \uC751\uB2F5\uD558\uBA74, Nginx\uB294 \uAE30\uC874 \uCE90\uC2DC\uB97C \uADF8\uB300\uB85C \uC0AC\uC6A9.\r\n            proxy_cache_revalidate on;\r\n\r\n            # \uC694\uCCAD\uC774 3\uBC88 \uC774\uC0C1 \uB4E4\uC5B4\uC624\uBA74 \uCE90\uC2DC\uD55C\uB2E4.\r\n            proxy_cache_min_uses 3;\r\n\r\n            # origin\uC774 \uB2E4\uC6B4\uB41C \uACBD\uC6B0 \uCE90\uC2DC\uB41C \uD30C\uC77C\uC744 \uC804\uC1A1\uD55C\uB2E4.\r\n            proxy_cache_use_stale error timeout updating http_500 http_502 http_503 http_504;\r\n\r\n            # X-CACHE\uB77C\uB294 \uCEE4\uC2A4\uD140 \uD5E4\uB354\uC5D0 \uCE90\uC2DC \uC0C1\uD0DC\uB97C \uC804\uB2EC\uD55C\uB2E4. (HIT, MISS, BYPASS, EXPIRED, STALE)\r\n            add_header X-CACHE $upstream_cache_status;\r\n\r\n            # \uD2B9\uC815 \uCE90\uC2DC \uAD00\uB828 \uD5E4\uB354\uB97C \uBB34\uC2DC\r\n            proxy_ignore_headers X-Accel-Expires Expires Cache-Control;\r\n\r\n            proxy_pass http://localhost:3000;\r\n        }\r\n\r\n        location ~* \\.(?:css|js|woff2?|ttf|eot|svg|png|jpg|jpeg|gif|ico)$ {\r\n            # \uCE90\uC2DC \uC0AC\uC6A9 (\uD2B9\uC815 \uD655\uC7A5\uC790)\r\n            proxy_cache my_cache;\r\n        }\r\n    }\r\n}\n"})})]})}function l(n={}){let{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(p,{...n})}):p(n)}},255511:function(n,e,r){r.d(e,{R:()=>i,x:()=>o});var c=r(596363);let t={},a=c.createContext(t);function i(n){let e=c.useContext(a);return c.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:i(n.components),c.createElement(a.Provider,{value:e},n.children)}}}]);