"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[50180],{529087:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>s});var t=r(596363);const l={},o=t.createContext(l);function a(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:a(e.components),t.createElement(o.Provider,{value:n},e.children)}},836620:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>i,contentTitle:()=>s,default:()=>d,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"kubernetes/kube object Deployment","title":"kubernetes deployment","description":"\uc9c0\uc6d0\ud558\ub294 \uae30\ub2a5","source":"@site/docs/kubernetes/kube object Deployment.md","sourceDirName":"kubernetes","slug":"/kubernetes/kube object Deployment","permalink":"/docs/kubernetes/kube object Deployment","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Deployment vs StatefulSet vs DaemonSet","permalink":"/docs/kubernetes/kube object Deployment vs StatefulSet vs DaemonSet"},"next":{"title":"kube object Endpoints","permalink":"/docs/kubernetes/kube object Endpoints"}}');var l=r(447259),o=r(529087);const a={},s="kubernetes deployment",i={},c=[{value:"\ubc30\ud3ec",id:"\ubc30\ud3ec",level:2},{value:"scale out / in",id:"scale-out--in",level:2},{value:"rolling update / rollback",id:"rolling-update--rollback",level:2},{value:"revision \uac2f\uc218 \ub298\ub9ac\uae30",id:"revision-\uac2f\uc218-\ub298\ub9ac\uae30",level:2}];function p(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"kubernetes-deployment",children:"kubernetes deployment"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"\uc9c0\uc6d0\ud558\ub294 \uae30\ub2a5"}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"\ubc30\ud3ec"}),"\n",(0,l.jsx)(n.p,{children:"scale out / in"}),"\n",(0,l.jsx)(n.p,{children:"rolling update / rollback"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\ubc30\ud3ec",children:"\ubc30\ud3ec"}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"kubectl apply -f manifest.yaml"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'apiVersion: apps/v1\r\nkind: Deployment\r\nmetadata:\r\n  name: my-app\r\n  labels:\r\n    app: my-app\r\nspec:\r\n  selector:\r\n    matchLabels:\r\n      app: my-app\r\n  strategy:\r\n    type: Recreate\r\n  # replicaSet\r\n  replicas: 3\r\n  # pod template\r\n  template:\r\n    metadata:\r\n      labels:\r\n        app: my-app\r\n        env: production\r\n        version: v1\r\n    spec:\r\n      containers:\r\n        - name: my-app\r\n          image: hyuil/my-app:1.0\r\n          ports:\r\n            - containerPort: 8080\r\n          resources:\r\n            limits:\r\n              memory: "64Mi"\r\n              cpu: "50m"\n'})}),"\n",(0,l.jsx)(n.h2,{id:"scale-out--in",children:"scale out / in"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl scale deployment my-app --replicas=3\n"})}),"\n",(0,l.jsx)(n.h2,{id:"rolling-update--rollback",children:"rolling update / rollback"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl set image deployment my-app my-app=hyuil/my-app:2.0 --record\r\n# kubectl set image \uc5ec\ub7ec\uac1c\r\nkubectl set image deployment my-deployment web-container=new-image-for-web,db-container=new-image-for-db\r\n\r\nkubectl rollout status deployment my-app\r\nkubectl rollout history deployment my-app\r\nkubectl rollout undo deployment my-app\r\nkubectl rollout undo deployment my-app --to-revision=1\n"})}),"\n",(0,l.jsx)(n.h2,{id:"revision-\uac2f\uc218-\ub298\ub9ac\uae30",children:"revision \uac2f\uc218 \ub298\ub9ac\uae30"}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"revisionHistoryLimit\uc744 \uc62c\ub824\uc8fc\uae30"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"apiVersion: apps/v1\r\nkind: Deployment\r\nmetadata:\r\n  name: my-deployment\r\nspec:\r\n  replicas: 3\r\n  selector:\r\n    matchLabels:\r\n      app: my-app\r\n  template:\r\n    metadata:\r\n      labels:\r\n        app: my-app\r\n    spec:\r\n      containers:\r\n        - name: my-container\r\n          image: my-image:latest\r\n  revisionHistoryLimit: 3\n"})})]})}function d(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(p,{...e})}):p(e)}}}]);