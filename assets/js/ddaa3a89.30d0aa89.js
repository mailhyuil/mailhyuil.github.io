"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[142980],{529087:(e,n,c)=>{c.d(n,{R:()=>l,x:()=>t});var o=c(596363);const s={},r=o.createContext(s);function l(e){const n=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),o.createElement(r.Provider,{value:n},e.children)}},710890:(e,n,c)=>{c.r(n),c.d(n,{assets:()=>a,contentTitle:()=>t,default:()=>k,frontMatter:()=>l,metadata:()=>o,toc:()=>i});const o=JSON.parse('{"id":"db/db \ub3d9\uc2dc\uc131 \uc81c\uc5b4 lock shared lock vs exclusive lock","title":"db transaction lock shared lock vs exclusive lock","description":"\uc8fc\uc758","source":"@site/docs/db/db \ub3d9\uc2dc\uc131 \uc81c\uc5b4 lock shared lock vs exclusive lock.md","sourceDirName":"db","slug":"/db/db \ub3d9\uc2dc\uc131 \uc81c\uc5b4 lock shared lock vs exclusive lock","permalink":"/docs/db/db \ub3d9\uc2dc\uc131 \uc81c\uc5b4 lock shared lock vs exclusive lock","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"db transaction lock Dead lock (\ub370\ub4dc \ub77d)","permalink":"/docs/db/db \ub3d9\uc2dc\uc131 \uc81c\uc5b4 lock deadlock"},"next":{"title":"prisma lock usecase \uc0ac\uc6a9 \uc608\uc2dc","permalink":"/docs/db/db \ub3d9\uc2dc\uc131 \uc81c\uc5b4 lock usecase \uc0ac\uc6a9 \uc608\uc2dc"}}');var s=c(447259),r=c(529087);const l={},t="db transaction lock shared lock vs exclusive lock",a={},i=[{value:"Shared Lock (\uacf5\uc720 \ub77d, S Lock, Read Lock)",id:"shared-lock-\uacf5\uc720-\ub77d-s-lock-read-lock",level:2},{value:"Exclusive Lock (\ubc30\ud0c0 \ub77d, X Lock, Write Lock)",id:"exclusive-lock-\ubc30\ud0c0-\ub77d-x-lock-write-lock",level:2}];function d(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"db-transaction-lock-shared-lock-vs-exclusive-lock",children:"db transaction lock shared lock vs exclusive lock"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"\uc8fc\uc758"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"lock\uc774 \uac78\ub824\uc788\uc5b4\ub3c4 insert\ub294 \uac00\ub2a5\ud558\ub2e4. (lock\uc740 \uae30\uc874 \ub370\uc774\ud130\ub4e4\uc5d0\uac8c\ub9cc \uac78\ub9ac\uae30 \ub54c\ubb38\uc5d0 \uc0c8\ub85c \ucd94\uac00\ub418\ub294 \uac12\uc5d0\ub294 \uc758\ubbf8\uac00 \uc5c6\uae30 \ub54c\ubb38\uc774\ub2e4)"}),"\n",(0,s.jsx)(n.p,{children:"exclusive lock\uc774 \uac78\ub824\uc788\uc5b4\ub3c4 insert\ub418\ub294 \ub370\uc774\ud130\uac00 \uae30\uc874 \ub370\uc774\ud130\uc640 \uad00\ub828\uc774 \uc5c6\ub2e4\uba74 insert\ub294 \uac00\ub2a5\ud558\ub2e4."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"shared-lock-\uacf5\uc720-\ub77d-s-lock-read-lock",children:"Shared Lock (\uacf5\uc720 \ub77d, S Lock, Read Lock)"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"\uac8c\uc784\uc744 \uc608\ub85c \ub4e4\uba74 \uc5ec\ub7ec \ud50c\ub808\uc774\uc5b4\uac00 \ub3d9\uc2dc\uc5d0 \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 \ubc29\uc5b4 \uae30\uc220\uc774\ub2e4."}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"\uc0c1\ub300\ubc29\uc774 \ud50c\ub808\uc774\uc5b4\ub97c \ubcfc \uc218 \uc788\uc9c0\ub9cc (read o), \uacf5\uaca9\ud560 \uc218 \uc5c6\ub2e4. (write x)"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Shared lock\uc744 \ud68d\ub4dd\ud558\uae30 \uc704\ud574\uc11c\ub294 \ud574\ub2f9 \uac12\uc5d0 \ub2e4\ub978 \ubc30\ud0c0\ub77d\uc774 \uc788\uc5b4\ub3c4 \ub41c\ub2e4."}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"FOR SHARE \ub85c \ud68d\ub4dd"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- transaction 1\r\nBEGIN;\r\nSELECT * FROM table_name FOR SHARE;\r\nCOMMIT;\r\n-- transaction 2\r\nBEGIN;\r\nSELECT * FROM table_name FOR SHARE; -- \uac00\ub2a5\r\nCOMMIT;\r\n-- transaction 3\r\nBEGIN;\r\nUPDATE users SET name='test' where name='sb'; -- transaction 1\uc774 commit\ub418\uae30 \uc804\uae4c\uc9c0 \ub300\uae30\r\nCOMMIT;\n"})}),"\n",(0,s.jsx)(n.h2,{id:"exclusive-lock-\ubc30\ud0c0-\ub77d-x-lock-write-lock",children:"Exclusive Lock (\ubc30\ud0c0 \ub77d, X Lock, Write Lock)"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"\uc624\uc9c1 \ud55c \ud50c\ub808\uc774\uc5b4\ub9cc \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 \uc740\uc2e0 \uae30\uc220"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"\ub2e4\ub978 \ud50c\ub808\uc774\uc5b4\uac00 \ubcfc \uc218\ub3c4 \uc5c6\uace0 \uacf5\uaca9\ud560 \uc218\ub3c4 \uc5c6\ub2e4. (read x, write x)"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Exclusive lock\uc744 \ud68d\ub4dd\ud558\uae30 \uc704\ud574\uc11c\ub294 \ud574\ub2f9 \uac12\uc5d0 \uc5b4\ub5a4\ud55c \uacf5\uc720\ub77d\ub3c4 \uc5c6\uc5b4\uc57c\ud55c\ub2e4."}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"FOR UPDATE \ub85c \ud68d\ub4dd (row-level lock)"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"-- transaction 1\r\nBEGIN;\r\nSELECT * FROM table_name FOR UPDATE;\r\nCOMMIT;\r\n-- transaction 2\r\nBEGIN;\r\nSELECT * FROM table_name FOR UPDATE; -- transaction 1\uc774 commit\ub418\uae30 \uc804\uae4c\uc9c0 \ub300\uae30\r\nCOMMIT;\r\n-- transaction 3\r\nBEGIN;\r\nUPDATE users SET name='test' where name='sb'; -- transaction 1\uc774 commit\ub418\uae30 \uc804\uae4c\uc9c0 \ub300\uae30\r\nCOMMIT;\n"})})]})}function k(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);