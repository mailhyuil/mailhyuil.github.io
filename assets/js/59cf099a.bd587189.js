"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["51358"],{853600:function(e,s,r){r.r(s),r.d(s,{frontMatter:()=>a,toc:()=>p,default:()=>d,metadata:()=>n,assets:()=>l,contentTitle:()=>i});var n=JSON.parse('{"id":"db-postgres/postgres replication \uAC04\uB2E8\uD558\uAC8C \uAD6C\uD604","title":"postgres replication","description":"primary(master)\uC5D0\uC11C\uB294 \uC4F0\uAE30\uB97C \uB2F4\uB2F9","source":"@site/docs/db-postgres/postgres replication \uAC04\uB2E8\uD558\uAC8C \uAD6C\uD604.md","sourceDirName":"db-postgres","slug":"/db-postgres/postgres replication \uAC04\uB2E8\uD558\uAC8C \uAD6C\uD604","permalink":"/docs/db-postgres/postgres replication \uAC04\uB2E8\uD558\uAC8C \uAD6C\uD604","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"postgres replication slots","permalink":"/docs/db-postgres/postgres replication slot"},"next":{"title":"postgres replication","permalink":"/docs/db-postgres/postgres replication"}}'),t=r(447259),o=r(255511);let a={},i="postgres replication",l={},p=[{value:"postgres_primary &amp; postgres_replica -&gt; pg_hba.conf",id:"postgres_primary--postgres_replica---pg_hbaconf",level:2},{value:"primary\uC758 \uB370\uC774\uD130\uB97C \uBCF5\uC81C",id:"primary\uC758-\uB370\uC774\uD130\uB97C-\uBCF5\uC81C",level:2},{value:"postgres_replica -&gt; postgresql.conf",id:"postgres_replica---postgresqlconf",level:2},{value:"postgres_primary -&gt; postgresql.conf",id:"postgres_primary---postgresqlconf",level:2},{value:"postgres_replica -&gt; standby.signal",id:"postgres_replica---standbysignal",level:2},{value:"\uC2E4\uD589",id:"\uC2E4\uD589",level:2}];function c(e){let s={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"postgres-replication",children:"postgres replication"})}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsx)(s.p,{children:"primary(master)\uC5D0\uC11C\uB294 \uC4F0\uAE30\uB97C \uB2F4\uB2F9"}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsx)(s.p,{children:"replica(standby)\uC5D0\uC11C\uB294 \uC77D\uAE30\uB97C \uB2F4\uB2F9"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"postgres_primary--postgres_replica---pg_hbaconf",children:"postgres_primary & postgres_replica -> pg_hba.conf"}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsx)(s.p,{children:"\uC2E4\uC81C \uC0AC\uC6A9\uD560 \uB54C\uB294 readonly user\uB97C \uC0DD\uC131\uD574\uC11C \uC0AC\uC6A9\uD558\uB294 \uAC83\uC774 \uC88B\uC74C"}),"\n"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-conf",children:"# \uCD94\uAC00\r\nhost replication postgres all md5\n"})}),"\n",(0,t.jsx)(s.h2,{id:"primary\uC758-\uB370\uC774\uD130\uB97C-\uBCF5\uC81C",children:"primary\uC758 \uB370\uC774\uD130\uB97C \uBCF5\uC81C"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"mv data_standby data_standby.bak\r\ncp -R data_primary data_standby\n"})}),"\n",(0,t.jsx)(s.h2,{id:"postgres_replica---postgresqlconf",children:"postgres_replica -> postgresql.conf"}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsx)(s.p,{children:"primary connection\uC758 info\uB97C \uAE30\uC785"}),"\n"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-conf",children:"primary_conninfo = 'application_name=standby1 host=host.docker.internal port=5432 user=postgres password=postgres'\n"})}),"\n",(0,t.jsx)(s.h2,{id:"postgres_primary---postgresqlconf",children:"postgres_primary -> postgresql.conf"}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsx)(s.p,{children:"standby server\uC758 info\uB97C \uAE30\uC785"}),"\n"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-conf",children:"synchronous_standby_names = 'first 1 (standby1)' # \uCC98\uC74C 1\uAC1C\uAC00 \uB3D9\uAE30\uD654 \uB418\uC5B4\uC57C \uD568\r\nsynchronous_standby_names = 'first 2 (standby1,standby2,standby3)' # \uCC98\uC74C 2\uAC1C\uAC00 \uB3D9\uAE30\uD654 \uB418\uC5B4\uC57C \uD568\r\nsynchronous_standby_names = 'any 1 (standby1,standby2,standby3)' # \uC544\uBB34\uAC70\uB098 1\uAC1C\uAC00 \uB3D9\uAE30\uD654 \uB418\uC5B4\uC57C \uD568\n"})}),"\n",(0,t.jsx)(s.h2,{id:"postgres_replica---standbysignal",children:"postgres_replica -> standby.signal"}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsx)(s.p,{children:"standby.signal \uD30C\uC77C \uC0DD\uC131"}),"\n"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"touch standby.signal\n"})}),"\n",(0,t.jsx)(s.h2,{id:"\uC2E4\uD589",children:"\uC2E4\uD589"})]})}function d(e={}){let{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},255511:function(e,s,r){r.d(s,{R:()=>a,x:()=>i});var n=r(596363);let t={},o=n.createContext(t);function a(e){let s=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),n.createElement(o.Provider,{value:s},e.children)}}}]);