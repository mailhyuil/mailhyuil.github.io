"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[268256],{529087:(r,e,n)=>{n.d(e,{R:()=>u,x:()=>a});var t=n(596363);const s={},o=t.createContext(s);function u(r){const e=t.useContext(o);return t.useMemo(function(){return"function"==typeof r?r(e):{...e,...r}},[e,r])}function a(r){let e;return e=r.disableParentContext?"function"==typeof r.components?r.components(s):r.components||s:u(r.components),t.createElement(o.Provider,{value:e},r.children)}},721732:(r,e,n)=>{n.r(e),n.d(e,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>u,metadata:()=>t,toc:()=>i});const t=JSON.parse('{"id":"x design pattern/x result pattern","title":"result pattern","description":"","source":"@site/docs/x design pattern/x result pattern.md","sourceDirName":"x design pattern","slug":"/x design pattern/x result pattern","permalink":"/docs/x design pattern/x result pattern","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"x reducer","permalink":"/docs/x design pattern/x reducer"},"next":{"title":"retry pattern","permalink":"/docs/x design pattern/x retry pattern"}}');var s=n(447259),o=n(529087);const u={},a="result pattern",c={},i=[];function l(r){const e={code:"code",h1:"h1",header:"header",pre:"pre",...(0,o.R)(),...r.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"result-pattern",children:"result pattern"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:'type Result<Error, Value> =\r\n  | {\r\n      success: false;\r\n      error: Error;\r\n    }\r\n  | {\r\n      success: true;\r\n      value: Value;\r\n    };\r\n\r\nclass UserNotFoundException extends Error {\r\n  constructor(message: string) {\r\n    super(message);\r\n    this.name = "UserNotFoundException";\r\n  }\r\n}\r\n// .. other Errors\r\n\r\ntype UserDto = { id: string; name: string };\r\n\r\nconst users: UserDto[] = [\r\n  {\r\n    id: "1234",\r\n    name: "John",\r\n  },\r\n  {\r\n    id: "5678",\r\n    name: "Doe",\r\n  },\r\n];\r\n\r\nconst findById = (id: string): Result<UserNotFoundException, UserDto> => {\r\n  const user = users.find((user) => user.id === id);\r\n  if (!user) {\r\n    return {\r\n      success: false,\r\n      error: new UserNotFoundException("User not found"),\r\n    };\r\n  }\r\n  return {\r\n    success: true,\r\n    value: user,\r\n  };\r\n};\r\n\r\nfunction main() {\r\n  const result = findById("1234");\r\n\r\n  if (!result.success) {\r\n    if (result.error instanceof UserNotFoundException) {\r\n      console.error("Http 404 Error: ", result.error.message);\r\n      res.status(404).send({ message: result.error.message, context: { result } });\r\n      return;\r\n    }\r\n    console.error("Http 500 Error: ", result);\r\n    res.status(500).send({ message: "Internal Server Error", context: { result } });\r\n    return;\r\n  }\r\n\r\n  console.log("Found User : ", result.value);\r\n}\r\n\r\nmain();\n'})})]})}function d(r={}){const{wrapper:e}={...(0,o.R)(),...r.components};return e?(0,s.jsx)(e,{...r,children:(0,s.jsx)(l,{...r})}):l(r)}}}]);