"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[462843],{529087:(e,t,r)=>{r.d(t,{R:()=>c,x:()=>l});var n=r(596363);const o={},s=n.createContext(o);function c(e){const t=n.useContext(s);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:c(e.components),n.createElement(s.Provider,{value:t},e.children)}},988733:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>a,contentTitle:()=>l,default:()=>u,frontMatter:()=>c,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"nestjs/nest base decorator Reflector","title":"nest base decorator Reflector","description":"nestjs Reflector","source":"@site/docs/nestjs/nest base decorator Reflector.md","sourceDirName":"nestjs","slug":"/nestjs/nest base decorator Reflector","permalink":"/docs/nestjs/nest base decorator Reflector","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Public decorator","permalink":"/docs/nestjs/nest base decorator Public"},"next":{"title":"nest SetMetadata","permalink":"/docs/nestjs/nest base decorator SetMetadata"}}');var o=r(447259),s=r(529087);const c={},l=void 0,a={},d=[{value:"nestjs Reflector",id:"nestjs-reflector",level:2},{value:"decorator \uc0dd\uc131",id:"decorator-\uc0dd\uc131",level:2},{value:"controller\uc5d0\uc11c \uc0ac\uc6a9",id:"controller\uc5d0\uc11c-\uc0ac\uc6a9",level:2},{value:"guard\uc5d0\uc11c \uba54\ud0c0\ub370\uc774\ud130 \uc77d\uae30",id:"guard\uc5d0\uc11c-\uba54\ud0c0\ub370\uc774\ud130-\uc77d\uae30",level:2}];function i(e){const t={blockquote:"blockquote",code:"code",h2:"h2",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.h2,{id:"nestjs-reflector",children:"nestjs Reflector"}),"\n",(0,o.jsxs)(t.blockquote,{children:["\n",(0,o.jsx)(t.p,{children:"nestjs Reflector\ub294 reflect-metadata\ub97c \uc0ac\uc6a9\ud558\uc5ec metadata\ub97c \uc77d\uc744 \uc218 \uc788\uac8c \ud574\uc900\ub2e4."}),"\n"]}),"\n",(0,o.jsx)(t.h2,{id:"decorator-\uc0dd\uc131",children:"decorator \uc0dd\uc131"}),"\n",(0,o.jsxs)(t.blockquote,{children:["\n",(0,o.jsx)(t.p,{children:"set metadata"}),"\n"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-js",children:'// \ubc29\ubc95 1. Reflector.createDecorator() \uc0ac\uc6a9\r\nimport { Reflector } from \'@nestjs/core\';\r\nexport const Roles = Reflector.createDecorator<string[]>();\r\n\r\n// \ubc29\ubc95 2. SetMetadata() \uc0ac\uc6a9\r\nimport { SetMetadata } from "@nestjs/common";\r\nexport const Roles = (...roles: string[]) => SetMetadata("roles", roles);\n'})}),"\n",(0,o.jsx)(t.h2,{id:"controller\uc5d0\uc11c-\uc0ac\uc6a9",children:"controller\uc5d0\uc11c \uc0ac\uc6a9"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-js",children:"// controller\r\n@Post()\r\n@Roles(['admin'])\r\nasync create(@Body() createCatDto: CreateCatDto) {\r\n  this.catsService.create(createCatDto);\r\n}\n"})}),"\n",(0,o.jsx)(t.h2,{id:"guard\uc5d0\uc11c-\uba54\ud0c0\ub370\uc774\ud130-\uc77d\uae30",children:"guard\uc5d0\uc11c \uba54\ud0c0\ub370\uc774\ud130 \uc77d\uae30"}),"\n",(0,o.jsxs)(t.blockquote,{children:["\n",(0,o.jsx)(t.p,{children:"get metadata"}),"\n"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-js",children:"// controller metadata\r\nconst roles = this.reflector.get(Roles, context.getClass());\r\n// handler metadata\r\nconst roles = this.reflector.get(Roles, context.getHandler());\r\n\r\nreflector.get();\r\nreflector.getAllAndOverride();\r\nreflector.getAllAndMerge();\n"})}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-ts",children:'// \ud604\uc7ac \uc694\uccad\uc5d0 \ub300\ud55c \ud578\ub4e4\ub7ec \uba54\uc11c\ub4dc\ub97c \ubc18\ud658 // \uba54\uc18c\ub4dc\uc5d0 \ub370\ucf54\ub808\uc774\ud130\ub97c \ub2ec\uc544\ub1a8\uc744 \ub54c \uc0ac\uc6a9\r\nconst roles = this.reflector.get<string[]>("roles", context.getHandler());\r\n\r\n// \ud604\uc7ac \uc694\uccad\uc5d0 \ub300\ud55c \ud074\ub798\uc2a4 (\ucee8\ud2b8\ub864\ub7ec)\ub97c \ubc18\ud658 // \ud074\ub798\uc2a4\uc5d0 \ub370\ucf54\ub808\uc774\ud130\ub97c \ub2ec\uc544\ub1a8\uc744 \ub54c \uc0ac\uc6a9\r\nconst roles = this.reflector.get<string[]>("roles", context.getClass());\r\n\r\n// \uba54\uc18c\ub4dc, \ud074\ub798\uc2a4 \uc0c1\uad00\uc5c6\uc774 \ub370\ucf54\ub808\uc774\ud130\ub97c \ub2ec \uc218 \uc788\uac8c \ud558\uae30\r\n//context.getHandler()\uc640 context.getClass() \ubaa8\ub450\uc5d0 \ub300\ud574 \'roles\' \uba54\ud0c0\ub370\uc774\ud130\ub97c \uac80\uc0c9\ud558\uace0 \ubcd1\ud569\r\nconst roles = this.reflector.getAllAndOverride<string[]>("roles", [context.getHandler(), context.getClass()]);\n'})})]})}function u(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(i,{...e})}):i(e)}}}]);