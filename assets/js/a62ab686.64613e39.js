"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[197679],{529087:(e,t,s)=>{s.d(t,{R:()=>u,x:()=>c});var n=s(596363);const a={},o=n.createContext(a);function u(e){const t=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:u(e.components),n.createElement(o.Provider,{value:t},e.children)}},990852:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>r,contentTitle:()=>c,default:()=>l,frontMatter:()=>u,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"nuxtjs/nuxt useNuxtData - cache","title":"nuxt useNuxtData","description":"useAsyncData, useLazyAsyncData, useFetch, useLazyFetch\ub294 \ub370\uc774\ud130\ub97c \uce90\uc2dc\ud55c\ub2e4","source":"@site/docs/nuxtjs/nuxt useNuxtData - cache.md","sourceDirName":"nuxtjs","slug":"/nuxtjs/nuxt useNuxtData - cache","permalink":"/docs/nuxtjs/nuxt useNuxtData - cache","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"nuxt useFetch","permalink":"/docs/nuxtjs/nuxt useFetch"},"next":{"title":"nuxt useSlots","permalink":"/docs/nuxtjs/nuxt useSlots"}}');var a=s(447259),o=s(529087);const u={},c="nuxt useNuxtData",r={},d=[{value:"refreshNuxtData",id:"refreshnuxtdata",level:2},{value:"usage",id:"usage",level:2},{value:"useFetch cache option",id:"usefetch-cache-option",level:2}];function i(e){const t={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"nuxt-usenuxtdata",children:"nuxt useNuxtData"})}),"\n",(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsx)(t.p,{children:"useAsyncData, useLazyAsyncData, useFetch, useLazyFetch\ub294 \ub370\uc774\ud130\ub97c \uce90\uc2dc\ud55c\ub2e4"}),"\n",(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsx)(t.p,{children:"useNuxtData\ub294 \uce90\uc2dc\ub370\uc774\ud130\uc5d0 \uc811\uadfc \ud560 \uc218 \uc788\ub294 api"}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"refreshnuxtdata",children:"refreshNuxtData"}),"\n",(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsx)(t.p,{children:"\uce90\uc2dc\ub97c \ucd08\uae30\ud654"}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"usage",children:"usage"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:'// useFetch \uc0ac\uc6a9\uc2dc \uc635\uc158\uc5d0 key\ub97c \uc9c0\uc815 \uce90\uc2dc\r\nconst { data } = await useFetch("/api/posts", { key: "posts" });\r\n// posts\ub77c\ub294 \ud0a4 \uc774\ub984\uc73c\ub85c \uce90\uc2dc \ub370\uc774\ud130 \ubc1b\uc544\uc624\uae30\r\nconst { data: posts } = useNuxtData("posts");\n'})}),"\n",(0,a.jsx)(t.h2,{id:"usefetch-cache-option",children:"useFetch cache option"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:'const newTodo = ref("");\r\nconst previousTodos = ref([]);\r\n\r\n// Access to the cached value of useFetch in todos.vue\r\nconst { data: todos } = useNuxtData("todos");\r\nconst { data } = await useFetch("/api/addTodo", {\r\n  key: "addTodo",\r\n  method: "post",\r\n  body: {\r\n    todo: newTodo.value,\r\n  },\r\n  onRequest() {\r\n    previousTodos.value = todos.value; // Store the previously cached value to restore if fetch fails.\r\n    todos.value.push(newTodo.value); // Optimistically update the todos.\r\n  },\r\n  onRequestError() {\r\n    todos.value = previousTodos.value; // Rollback the data if the request failed.\r\n  },\r\n  async onResponse() {\r\n    await refreshNuxtData("todos"); // Invalidate todos in the background if the request succeeded.\r\n  },\r\n});\n'})})]})}function l(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(i,{...e})}):i(e)}}}]);