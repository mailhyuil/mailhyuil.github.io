"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["448135"],{136361:function(r,e,a){a.r(e),a.d(e,{frontMatter:()=>s,toc:()=>l,default:()=>c,metadata:()=>i,assets:()=>m,contentTitle:()=>o});var i=JSON.parse('{"id":"db-prisma/prisma migrate rollback","title":"prisma migrate rollback","description":"","source":"@site/docs/db-prisma/prisma migrate rollback.md","sourceDirName":"db-prisma","slug":"/db-prisma/prisma migrate rollback","permalink":"/docs/db-prisma/prisma migrate rollback","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"prisma migrate resolve","permalink":"/docs/db-prisma/prisma migrate resolve"},"next":{"title":"prisma shadow database","permalink":"/docs/db-prisma/prisma migrate shadow database"}}'),t=a(447259),n=a(255511);let s={},o="prisma migrate rollback",m={},l=[];function d(r){let e={code:"code",h1:"h1",header:"header",pre:"pre",...(0,n.R)(),...r.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"prisma-migrate-rollback",children:"prisma migrate rollback"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sh",children:"# down migration \uD30C\uC77C \uC0DD\uC131\r\nprisma migrate diff \\\r\n --from-schema-datasource prisma/schema.prisma \\\r\n --to-schema-datamodel prisma/schema.prisma \\\r\n --script > ./down.sql\r\n\r\n# down migration \uD30C\uC77C\uC744 db\uC5D0\uC11C \uC2E4\uD589\r\nprisma db execute --file ./down.sql\r\n\r\n# migration folder \uC0DD\uC131 down.sql \uD30C\uC77C\uC744 \uC774\uB3D9 (migration.sql\uB85C \uBCC0\uACBD)\r\nmkdir ./prisma/migrations/$(date +%Y%m%d%H%M%S)_rollback\r\n\r\n# apply\r\nprisma migrate resolve --applied <migration_name>\r\n\r\n# failed migration\uC778 \uACBD\uC6B0\r\n# migrate resolve\uB85C rollback \uC801\uC6A9\r\nprisma migrate resolve --rolled-back <migration_name>\n"})})]})}function c(r={}){let{wrapper:e}={...(0,n.R)(),...r.components};return e?(0,t.jsx)(e,{...r,children:(0,t.jsx)(d,{...r})}):d(r)}},255511:function(r,e,a){a.d(e,{R:()=>s,x:()=>o});var i=a(596363);let t={},n=i.createContext(t);function s(r){let e=i.useContext(n);return i.useMemo(function(){return"function"==typeof r?r(e):{...e,...r}},[e,r])}function o(r){let e;return e=r.disableParentContext?"function"==typeof r.components?r.components(t):r.components||t:s(r.components),i.createElement(n.Provider,{value:e},r.children)}}}]);