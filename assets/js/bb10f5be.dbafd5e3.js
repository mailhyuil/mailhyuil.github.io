"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[295908],{526861:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>i,contentTitle:()=>s,default:()=>u,frontMatter:()=>c,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"angular/angular base interceptor \ubd84\ub9ac HttpContext","title":"angular interceptor \ubd84\ub9ac HttpContext","description":"interceptor","source":"@site/docs/angular/angular base interceptor \ubd84\ub9ac HttpContext.md","sourceDirName":"angular","slug":"/angular/angular base interceptor \ubd84\ub9ac HttpContext","permalink":"/docs/angular/angular base interceptor \ubd84\ub9ac HttpContext","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"angular interceptor \ubd84\ub9ac HttpBackend","permalink":"/docs/angular/angular base interceptor \ubd84\ub9ac HttpBackend"},"next":{"title":"angular http interceptor \ud2b9\uc815 url \ubb34\uc2dc\ud558\uae30","permalink":"/docs/angular/angular base interceptor \ud2b9\uc815 url \ubb34\uc2dc\ud558\uae30"}}');var o=r(447259),a=r(529087);const c={},s="angular interceptor \ubd84\ub9ac HttpContext",i={},l=[{value:"interceptor",id:"interceptor",level:2}];function p(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",pre:"pre",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.header,{children:(0,o.jsx)(t.h1,{id:"angular-interceptor-\ubd84\ub9ac-httpcontext",children:"angular interceptor \ubd84\ub9ac HttpContext"})}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-ts",children:'export const APP_INIT = new HttpContextToken(() => false);\r\n\r\nconst context = new HttpContext().set(APP_INIT, true);\r\nhttp.get<UserDto>(environment.BASE_URL + "/api/v1/auth", {\r\n  context,\r\n});\n'})}),"\n",(0,o.jsx)(t.h2,{id:"interceptor",children:"interceptor"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-ts",children:"export function ApiInterceptorFn(req: HttpRequest<unknown>, next: HttpHandlerFn) {\r\n  const apiReq = req.clone({\r\n    withCredentials: true,\r\n  });\r\n\r\n  if (req.context.get(APP_INIT)) return next(apiReq);\r\n\r\n  const errorHandler = inject(GlobalErrorHandler);\r\n  return next(apiReq).pipe(\r\n    catchError(error => {\r\n      if (error instanceof HttpErrorResponse) {\r\n        errorHandler.handleError(error);\r\n      }\r\n      throw error;\r\n    }),\r\n  );\r\n}\n"})})]})}function u(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(p,{...e})}):p(e)}},529087:(e,t,r)=>{r.d(t,{R:()=>c,x:()=>s});var n=r(596363);const o={},a=n.createContext(o);function c(e){const t=n.useContext(a);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:c(e.components),n.createElement(a.Provider,{value:t},e.children)}}}]);