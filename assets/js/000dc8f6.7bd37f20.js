"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[607290],{529087:(r,e,a)=>{a.d(e,{R:()=>s,x:()=>o});var i=a(596363);const t={},n=i.createContext(t);function s(r){const e=i.useContext(n);return i.useMemo(function(){return"function"==typeof r?r(e):{...e,...r}},[e,r])}function o(r){let e;return e=r.disableParentContext?"function"==typeof r.components?r.components(t):r.components||t:s(r.components),i.createElement(n.Provider,{value:e},r.children)}},615055:(r,e,a)=>{a.r(e),a.d(e,{assets:()=>m,contentTitle:()=>o,default:()=>d,frontMatter:()=>s,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"db-prisma/prisma migrate rollback","title":"prisma migrate rollback","description":"","source":"@site/docs/db-prisma/prisma migrate rollback.md","sourceDirName":"db-prisma","slug":"/db-prisma/prisma migrate rollback","permalink":"/docs/db-prisma/prisma migrate rollback","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"prisma migrate resolve","permalink":"/docs/db-prisma/prisma migrate resolve"},"next":{"title":"prisma shadow database","permalink":"/docs/db-prisma/prisma migrate shadow database"}}');var t=a(447259),n=a(529087);const s={},o="prisma migrate rollback",m={},l=[];function c(r){const e={code:"code",h1:"h1",header:"header",pre:"pre",...(0,n.R)(),...r.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"prisma-migrate-rollback",children:"prisma migrate rollback"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sh",children:"# down migration \ud30c\uc77c \uc0dd\uc131\r\nprisma migrate diff \\\r\n --from-schema-datasource prisma/schema.prisma \\\r\n --to-schema-datamodel prisma/schema.prisma \\\r\n --script > ./down.sql\r\n\r\n# down migration \ud30c\uc77c\uc744 db\uc5d0\uc11c \uc2e4\ud589\r\nprisma db execute --file ./down.sql\r\n\r\n# migration folder \uc0dd\uc131 down.sql \ud30c\uc77c\uc744 \uc774\ub3d9 (migration.sql\ub85c \ubcc0\uacbd)\r\nmkdir ./prisma/migrations/$(date +%Y%m%d%H%M%S)_rollback\r\n\r\n# apply\r\nprisma migrate resolve --applied <migration_name>\r\n\r\n# failed migration\uc778 \uacbd\uc6b0\r\n# migrate resolve\ub85c rollback \uc801\uc6a9\r\nprisma migrate resolve --rolled-back <migration_name>\n"})})]})}function d(r={}){const{wrapper:e}={...(0,n.R)(),...r.components};return e?(0,t.jsx)(e,{...r,children:(0,t.jsx)(c,{...r})}):c(r)}}}]);