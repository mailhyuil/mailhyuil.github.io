"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["26070"],{768003:function(e,o,c){c.r(o),c.d(o,{frontMatter:()=>t,toc:()=>p,default:()=>a,metadata:()=>r,assets:()=>d,contentTitle:()=>l});var r=JSON.parse('{"id":"docker/docker-compose deploy replicas - cluster","title":"docker-compose cluster","description":"core \uC218\uB9CC\uD07C \uD504\uB85C\uC138\uC2A4\uB97C \uC0DD\uC131\uD558\uC5EC cpu \uC0AC\uC6A9\uB7C9\uC744 \uCD5C\uC801\uD654","source":"@site/docs/docker/docker-compose deploy replicas - cluster.md","sourceDirName":"docker","slug":"/docker/docker-compose deploy replicas - cluster","permalink":"/docs/docker/docker-compose deploy replicas - cluster","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"docker compose depends_on","permalink":"/docs/docker/docker-compose depends_on"},"next":{"title":"docker-compose cluster auto scaling","permalink":"/docs/docker/docker-compose deploy replicas auto scale"}}'),n=c(447259),s=c(255511);let t={},l="docker-compose cluster",d={},p=[{value:"docker-compose.yml",id:"docker-composeyml",level:2},{value:"command",id:"command",level:2}];function i(e){let o={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.header,{children:(0,n.jsx)(o.h1,{id:"docker-compose-cluster",children:"docker-compose cluster"})}),"\n",(0,n.jsxs)(o.blockquote,{children:["\n",(0,n.jsx)(o.p,{children:"core \uC218\uB9CC\uD07C \uD504\uB85C\uC138\uC2A4\uB97C \uC0DD\uC131\uD558\uC5EC cpu \uC0AC\uC6A9\uB7C9\uC744 \uCD5C\uC801\uD654"}),"\n",(0,n.jsx)(o.p,{children:"pm2\uC758 cluster mode\uC640 \uAC19\uC740 \uD6A8\uACFC"}),"\n",(0,n.jsxs)(o.blockquote,{children:["\n",(0,n.jsx)(o.p,{children:"session \uC778\uC99D \uC0AC\uC6A9 \uC2DC"}),"\n",(0,n.jsx)(o.p,{children:"\uC138\uC158\uC744 \uC911\uC559 \uC800\uC7A5\uC18C\uC5D0 \uC800\uC7A5\uD574\uC57C \uD55C\uB2E4. (redis)"}),"\n",(0,n.jsx)(o.p,{children:"\uB610\uB294 sticky session \uC0AC\uC6A9"}),"\n",(0,n.jsx)(o.p,{children:"\uB610\uB294 jwt\uB97C \uC0AC\uC6A9\uD574\uC11C \uC571\uC744 stateless\uD558\uAC8C \uB9CC\uB4E4\uC5B4\uC57C \uD55C\uB2E4."}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(o.h2,{id:"docker-composeyml",children:"docker-compose.yml"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-yaml",children:'services:\r\n  nestjs:\r\n    image: my-nest-app\r\n    build: .\r\n    deploy:\r\n      replicas: 4 # 4\uAC1C\uC758 \uCEE8\uD14C\uC774\uB108 \uC2E4\uD589 (Cluster \uD6A8\uACFC)\r\n    ports:\r\n      - "3000:3000"\n'})}),"\n",(0,n.jsx)(o.h2,{id:"command",children:"command"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-sh",children:"# docker-compose up --scale {container-name}={num} -d\r\ndocker-compose up --scale nginx=3 -d\n"})})]})}function a(e={}){let{wrapper:o}={...(0,s.R)(),...e.components};return o?(0,n.jsx)(o,{...e,children:(0,n.jsx)(i,{...e})}):i(e)}},255511:function(e,o,c){c.d(o,{R:()=>t,x:()=>l});var r=c(596363);let n={},s=r.createContext(n);function t(e){let o=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(o):{...o,...e}},[o,e])}function l(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:t(e.components),r.createElement(s.Provider,{value:o},e.children)}}}]);