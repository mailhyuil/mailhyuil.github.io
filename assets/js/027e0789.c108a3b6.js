"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["388064"],{290582:function(e,n,s){s.r(n),s.d(n,{frontMatter:()=>c,toc:()=>a,default:()=>k,metadata:()=>o,assets:()=>d,contentTitle:()=>l});var o=JSON.parse('{"id":"nodejs/nodejs websocket ws","title":"nodejs websocket ws","description":"\uC6F9\uC18C\uCF13\uC740 transport \uACC4\uCE35(L4)\uC774\uACE0 \uCD08\uAE30\uD654\uC2DC\uC5D0\uB9CC \uD578\uB4DC\uC250\uC774\uD06C\uB97C \uC704\uD558\uC5EC http(L7)\uB97C \uC0AC\uC6A9\uD55C\uB2E4.","source":"@site/docs/nodejs/nodejs websocket ws.md","sourceDirName":"nodejs","slug":"/nodejs/nodejs websocket ws","permalink":"/docs/nodejs/nodejs websocket ws","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"nodejs websocket socketIO","permalink":"/docs/nodejs/nodejs websocket socketIO"},"next":{"title":"nodejs websocket","permalink":"/docs/nodejs/nodejs websocket"}}'),t=s(447259),r=s(255511);let c={},l="nodejs websocket ws",d={},a=[{value:"install",id:"install",level:2},{value:"\uBC31\uC5D4\uB4DC",id:"\uBC31\uC5D4\uB4DC",level:2},{value:"\uD504\uB860\uD2B8\uC5D4\uB4DC",id:"\uD504\uB860\uD2B8\uC5D4\uB4DC",level:2}];function i(e){let n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"nodejs-websocket-ws",children:"nodejs websocket ws"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"\uC6F9\uC18C\uCF13\uC740 transport \uACC4\uCE35(L4)\uC774\uACE0 \uCD08\uAE30\uD654\uC2DC\uC5D0\uB9CC \uD578\uB4DC\uC250\uC774\uD06C\uB97C \uC704\uD558\uC5EC http(L7)\uB97C \uC0AC\uC6A9\uD55C\uB2E4."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"install",children:"install"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"npm i ws\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\uBC31\uC5D4\uB4DC",children:"\uBC31\uC5D4\uB4DC"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'import WebSocket from "ws";\r\n\r\nconst server = http.createServer(app);\r\n\r\nconst wsServer = new WebSocket.Server({ server });\r\n// const wsServer = new WebSocket.Server({ port: 8080 }); // http \uC11C\uBC84\uAC00 \uC5C6\uB2E4\uBA74 \uC774\uB807\uAC8C \uC0AC\uC6A9\r\n\r\nconst sockets = [];\r\n\r\nwsServer.on("connection", (socket) => {\r\n  console.log("Connected to Browser \u2705");\r\n  sockets.push(socket); // connection\uB41C socket\uC744 \uBC30\uC5F4\uC5D0 \uC800\uC7A5\r\n\r\n  socket.on("message", (message) => {\r\n    console.log(message.toString("utf8"));\r\n    sockets.forEach((aSocket) => aSocket.send(message.toString("utf8"))); // connection\uB41C \uBAA8\uB4E0 socket\uC5D0\uAC8C \uBA54\uC2DC\uC9C0 \uC804\uC1A1\r\n  });\r\n\r\n  socket.on("close", () => console.log("Disconnected from the Browser \u274C"));\r\n  //   socket.send("data"); // \uBAA8\uB4E0 \uD074\uB77C\uC774\uC5B8\uD2B8\uC5D0\uAC8C \uBA54\uC2DC\uC9C0 \uC804\uC1A1\r\n});\n'})}),"\n",(0,t.jsx)(n.h2,{id:"\uD504\uB860\uD2B8\uC5D4\uB4DC",children:"\uD504\uB860\uD2B8\uC5D4\uB4DC"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'const socket = new WebSocket(`ws://${window.location.host}`);\r\n// const socket = new WebSocket("ws://localhost:8080");\r\n\r\nconst send = () => {\r\n  socket.send("hello from the Browser!");\r\n};\r\n\r\nsocket.addEventListener("open", () => {\r\n  console.log("Connected to Server \u2705");\r\n});\r\n\r\nsocket.addEventListener("message", (message) => {\r\n  console.log("New message: ", message.data);\r\n});\r\n\r\nsocket.addEventListener("close", () => {\r\n  console.log("Disconnected from Server \u274C");\r\n});\n'})})]})}function k(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(i,{...e})}):i(e)}},255511:function(e,n,s){s.d(n,{R:()=>c,x:()=>l});var o=s(596363);let t={},r=o.createContext(t);function c(e){let n=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);