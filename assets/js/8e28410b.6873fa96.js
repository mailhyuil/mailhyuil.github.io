"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["619976"],{605637:function(e,t,r){r.r(t),r.d(t,{frontMatter:()=>l,toc:()=>d,default:()=>u,metadata:()=>n,assets:()=>a,contentTitle:()=>c});var n=JSON.parse('{"id":"nestjs/nest base decorator Reflector","title":"nest base decorator Reflector","description":"nestjs Reflector","source":"@site/docs/nestjs/nest base decorator Reflector.md","sourceDirName":"nestjs","slug":"/nestjs/nest base decorator Reflector","permalink":"/docs/nestjs/nest base decorator Reflector","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Public decorator","permalink":"/docs/nestjs/nest base decorator Public"},"next":{"title":"nest SetMetadata","permalink":"/docs/nestjs/nest base decorator SetMetadata"}}'),o=r(447259),s=r(255511);let l={},c,a={},d=[{value:"nestjs Reflector",id:"nestjs-reflector",level:2},{value:"decorator \uC0DD\uC131",id:"decorator-\uC0DD\uC131",level:2},{value:"controller\uC5D0\uC11C \uC0AC\uC6A9",id:"controller\uC5D0\uC11C-\uC0AC\uC6A9",level:2},{value:"guard\uC5D0\uC11C \uBA54\uD0C0\uB370\uC774\uD130 \uC77D\uAE30",id:"guard\uC5D0\uC11C-\uBA54\uD0C0\uB370\uC774\uD130-\uC77D\uAE30",level:2}];function i(e){let t={blockquote:"blockquote",code:"code",h2:"h2",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.h2,{id:"nestjs-reflector",children:"nestjs Reflector"}),"\n",(0,o.jsxs)(t.blockquote,{children:["\n",(0,o.jsx)(t.p,{children:"nestjs Reflector\uB294 reflect-metadata\uB97C \uC0AC\uC6A9\uD558\uC5EC metadata\uB97C \uC77D\uC744 \uC218 \uC788\uAC8C \uD574\uC900\uB2E4."}),"\n"]}),"\n",(0,o.jsx)(t.h2,{id:"decorator-\uC0DD\uC131",children:"decorator \uC0DD\uC131"}),"\n",(0,o.jsxs)(t.blockquote,{children:["\n",(0,o.jsx)(t.p,{children:"set metadata"}),"\n"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-js",children:'// \uBC29\uBC95 1. Reflector.createDecorator() \uC0AC\uC6A9\r\nimport { Reflector } from \'@nestjs/core\';\r\nexport const Roles = Reflector.createDecorator<string[]>();\r\n\r\n// \uBC29\uBC95 2. SetMetadata() \uC0AC\uC6A9\r\nimport { SetMetadata } from "@nestjs/common";\r\nexport const Roles = (...roles: string[]) => SetMetadata("roles", roles);\n'})}),"\n",(0,o.jsx)(t.h2,{id:"controller\uC5D0\uC11C-\uC0AC\uC6A9",children:"controller\uC5D0\uC11C \uC0AC\uC6A9"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-js",children:"// controller\r\n@Post()\r\n@Roles(['admin'])\r\nasync create(@Body() createCatDto: CreateCatDto) {\r\n  this.catsService.create(createCatDto);\r\n}\n"})}),"\n",(0,o.jsx)(t.h2,{id:"guard\uC5D0\uC11C-\uBA54\uD0C0\uB370\uC774\uD130-\uC77D\uAE30",children:"guard\uC5D0\uC11C \uBA54\uD0C0\uB370\uC774\uD130 \uC77D\uAE30"}),"\n",(0,o.jsxs)(t.blockquote,{children:["\n",(0,o.jsx)(t.p,{children:"get metadata"}),"\n"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-js",children:"// controller metadata\r\nconst roles = this.reflector.get(Roles, context.getClass());\r\n// handler metadata\r\nconst roles = this.reflector.get(Roles, context.getHandler());\r\n\r\nreflector.get();\r\nreflector.getAllAndOverride();\r\nreflector.getAllAndMerge();\n"})}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-ts",children:'// \uD604\uC7AC \uC694\uCCAD\uC5D0 \uB300\uD55C \uD578\uB4E4\uB7EC \uBA54\uC11C\uB4DC\uB97C \uBC18\uD658 // \uBA54\uC18C\uB4DC\uC5D0 \uB370\uCF54\uB808\uC774\uD130\uB97C \uB2EC\uC544\uB1A8\uC744 \uB54C \uC0AC\uC6A9\r\nconst roles = this.reflector.get<string[]>("roles", context.getHandler());\r\n\r\n// \uD604\uC7AC \uC694\uCCAD\uC5D0 \uB300\uD55C \uD074\uB798\uC2A4 (\uCEE8\uD2B8\uB864\uB7EC)\uB97C \uBC18\uD658 // \uD074\uB798\uC2A4\uC5D0 \uB370\uCF54\uB808\uC774\uD130\uB97C \uB2EC\uC544\uB1A8\uC744 \uB54C \uC0AC\uC6A9\r\nconst roles = this.reflector.get<string[]>("roles", context.getClass());\r\n\r\n// \uBA54\uC18C\uB4DC, \uD074\uB798\uC2A4 \uC0C1\uAD00\uC5C6\uC774 \uB370\uCF54\uB808\uC774\uD130\uB97C \uB2EC \uC218 \uC788\uAC8C \uD558\uAE30\r\n//context.getHandler()\uC640 context.getClass() \uBAA8\uB450\uC5D0 \uB300\uD574 \'roles\' \uBA54\uD0C0\uB370\uC774\uD130\uB97C \uAC80\uC0C9\uD558\uACE0 \uBCD1\uD569\r\nconst roles = this.reflector.getAllAndOverride<string[]>("roles", [context.getHandler(), context.getClass()]);\n'})})]})}function u(e={}){let{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(i,{...e})}):i(e)}},255511:function(e,t,r){r.d(t,{R:()=>l,x:()=>c});var n=r(596363);let o={},s=n.createContext(o);function l(e){let t=n.useContext(s);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),n.createElement(s.Provider,{value:t},e.children)}}}]);