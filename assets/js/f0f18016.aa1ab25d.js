"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["858708"],{48513:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>s,toc:()=>a,default:()=>p,metadata:()=>r,assets:()=>c,contentTitle:()=>i});var r=JSON.parse('{"id":"angular/angular component select","title":"angular form component input-select","description":"InputSelectItemComponent","source":"@site/docs/angular/angular component select.md","sourceDirName":"angular","slug":"/angular/angular component select","permalink":"/docs/angular/angular component select","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"angular form group","permalink":"/docs/angular/angular component segment"},"next":{"title":"angular cookie","permalink":"/docs/angular/angular cookie"}}'),l=t(447259),o=t(255511);let s={},i="angular form component input-select",c={},a=[{value:"InputSelectItemComponent",id:"inputselectitemcomponent",level:2},{value:"ts",id:"ts",level:3},{value:"html",id:"html",level:3},{value:"InputSelectComponent",id:"inputselectcomponent",level:2},{value:"ts",id:"ts-1",level:3},{value:"html",id:"html-1",level:3},{value:"usage",id:"usage",level:2}];function u(e){let n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",pre:"pre",...(0,o.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"angular-form-component-input-select",children:"angular form component input-select"})}),"\n",(0,l.jsx)(n.h2,{id:"inputselectitemcomponent",children:"InputSelectItemComponent"}),"\n",(0,l.jsx)(n.h3,{id:"ts",children:"ts"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:'import { CommonModule } from "@angular/common";\r\nimport { AfterViewInit, Component, ElementRef, Input, ViewChild } from "@angular/core";\r\nimport { BehaviorSubject, Subject } from "rxjs";\r\n\r\n@Component({\r\n  selector: "app-input-select-item",\r\n  templateUrl: "./input-select-item.component.html",\r\n  styleUrls: ["./input-select-item.component.scss"],\r\n  standalone: true,\r\n  imports: [CommonModule],\r\n})\r\nexport default class InputSelectItemComponent implements AfterViewInit {\r\n  @Input() value?: string;\r\n  select$ = new Subject<string>();\r\n  selectedValue$ = new BehaviorSubject<string | undefined>(undefined);\r\n  textContent = "";\r\n  @ViewChild("content") content!: ElementRef;\r\n\r\n  ngAfterViewInit(): void {\r\n    this.textContent = this.content.nativeElement.textContent;\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.select$.complete();\r\n    this.selectedValue$.complete();\r\n  }\r\n\r\n  _select() {\r\n    if (this.value) {\r\n      this.select$.next(this.value);\r\n    }\r\n  }\r\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"html",children:"html"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-html",children:'<div #content class="w-full p-2 font-bold rounded cursor-pointer hover:bg-gray-50" (click)="_select()">\r\n  <ng-content></ng-content>\r\n</div>\n'})}),"\n",(0,l.jsx)(n.h2,{id:"inputselectcomponent",children:"InputSelectComponent"}),"\n",(0,l.jsx)(n.h3,{id:"ts-1",children:"ts"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:'import { CommonModule } from "@angular/common";\r\nimport { Component, ContentChildren, Input, QueryList } from "@angular/core";\r\nimport { ValueAccessorDirective } from "@lcrs/common";\r\nimport { IconComponent } from "@team-lepisode/components";\r\nimport { tap } from "rxjs";\r\nimport InputSelectItemComponent from "./input-select-item/input-select-item.component";\r\n\r\n@Component({\r\n  selector: "app-input-select",\r\n  templateUrl: "./input-select.component.html",\r\n  styleUrls: ["./input-select.component.scss"],\r\n  standalone: true,\r\n  imports: [CommonModule, IconComponent],\r\n  hostDirectives: [ValueAccessorDirective],\r\n})\r\nexport default class InputSelectComponent {\r\n  @ContentChildren(InputSelectItemComponent)\r\n  items!: QueryList<InputSelectItemComponent>;\r\n  value?: string;\r\n  textContent = "";\r\n  isOpen = false;\r\n  @Input() label?: string;\r\n  @Input() placeholder?: string;\r\n\r\n  constructor(public readonly valueAccessor: ValueAccessorDirective<string>) {\r\n    valueAccessor.value.subscribe(v => (this.value = v));\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    setTimeout(() => {\r\n      this._init();\r\n    });\r\n  }\r\n\r\n  _init() {\r\n    this.items.forEach(item => {\r\n      if (!this.value) return;\r\n      if (item.value === this.value) {\r\n        this.getTextContent(item);\r\n      }\r\n      item.selectedValue$.next(this.value);\r\n    });\r\n    this.items.forEach(item => {\r\n      item.select$\r\n        .pipe(\r\n          tap(value => {\r\n            this.items.forEach(item => {\r\n              item.selectedValue$.next(value);\r\n            });\r\n          }),\r\n        )\r\n        .subscribe(value => {\r\n          this.getTextContent(item);\r\n          this.select(value);\r\n          this.isOpen = false;\r\n        });\r\n    });\r\n  }\r\n\r\n  getTextContent(item: InputSelectItemComponent) {\r\n    this.textContent = item.textContent;\r\n  }\r\n\r\n  select(value: string) {\r\n    this.valueAccessor.writeValue(value);\r\n    this.valueAccessor.valueChange(value);\r\n  }\r\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"html-1",children:"html"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-html",children:'<div class="relative flex flex-col gap-2">\r\n  @if(label){\r\n  <span class="font-bold">{{ label }}</span>\r\n  }\r\n  <div\r\n    (click)="isOpen = !isOpen"\r\n    class="flex items-center justify-between w-full px-4 py-2 font-bold border outline-none cursor-pointer rounded-xl focus:ring-2 ring-primary"\r\n  >\r\n    @if(textContent){ {{ textContent }} } @else {\r\n    <span class="text-gray-400">{{ placeholder }}</span>\r\n    }\r\n    <lepi-icon\r\n      [class.rotate-180]="isOpen"\r\n      class="block transition-all duration-100 bg-gray-700 size-5"\r\n      name="heroicons:chevron-down"\r\n    ></lepi-icon>\r\n  </div>\r\n  @if(isOpen){\r\n  <div class="absolute z-10 flex flex-col w-full gap-2 p-2 translate-y-full bg-white border -bottom-1 rounded-xl">\r\n    <ng-content></ng-content>\r\n  </div>\r\n  }\r\n</div>\n'})}),"\n",(0,l.jsx)(n.h2,{id:"usage",children:"usage"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-html",children:'<app-input-select placeholder="\uADFC\uBB34 \uC5F0\uCC28\uB97C \uC120\uD0DD\uD574\uC8FC\uC138\uC694" class="flex-1" formControlName="period" label="\uADFC\uBB34 \uC5F0\uCC28">\r\n  <app-input-select-item value="1">1\uB144</app-input-select-item>\r\n  <app-input-select-item value="2">2\uB144</app-input-select-item>\r\n</app-input-select>\n'})})]})}function p(e={}){let{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(u,{...e})}):u(e)}},255511:function(e,n,t){t.d(n,{R:()=>s,x:()=>i});var r=t(596363);let l={},o=r.createContext(l);function s(e){let n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:s(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);