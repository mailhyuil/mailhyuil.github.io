"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["946917"],{846910:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>o,toc:()=>p,default:()=>d,metadata:()=>r,assets:()=>i,contentTitle:()=>s});var r=JSON.parse('{"id":"kubernetes/kube object Deployment","title":"kubernetes deployment","description":"\uC9C0\uC6D0\uD558\uB294 \uAE30\uB2A5","source":"@site/docs/kubernetes/kube object Deployment.md","sourceDirName":"kubernetes","slug":"/kubernetes/kube object Deployment","permalink":"/docs/kubernetes/kube object Deployment","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Deployment vs StatefulSet vs DaemonSet","permalink":"/docs/kubernetes/kube object Deployment vs StatefulSet vs DaemonSet"},"next":{"title":"kube object Endpoints","permalink":"/docs/kubernetes/kube object Endpoints"}}'),l=t(447259),a=t(255511);let o={},s="kubernetes deployment",i={},p=[{value:"\uBC30\uD3EC",id:"\uBC30\uD3EC",level:2},{value:"scale out / in",id:"scale-out--in",level:2},{value:"rolling update / rollback",id:"rolling-update--rollback",level:2},{value:"revision \uAC2F\uC218 \uB298\uB9AC\uAE30",id:"revision-\uAC2F\uC218-\uB298\uB9AC\uAE30",level:2}];function c(e){let n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"kubernetes-deployment",children:"kubernetes deployment"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"\uC9C0\uC6D0\uD558\uB294 \uAE30\uB2A5"}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"\uBC30\uD3EC"}),"\n",(0,l.jsx)(n.p,{children:"scale out / in"}),"\n",(0,l.jsx)(n.p,{children:"rolling update / rollback"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\uBC30\uD3EC",children:"\uBC30\uD3EC"}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"kubectl apply -f manifest.yaml"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'apiVersion: apps/v1\r\nkind: Deployment\r\nmetadata:\r\n  name: my-app\r\n  labels:\r\n    app: my-app\r\nspec:\r\n  selector:\r\n    matchLabels:\r\n      app: my-app\r\n  strategy:\r\n    type: Recreate\r\n  # replicaSet\r\n  replicas: 3\r\n  # pod template\r\n  template:\r\n    metadata:\r\n      labels:\r\n        app: my-app\r\n        env: production\r\n        version: v1\r\n    spec:\r\n      containers:\r\n        - name: my-app\r\n          image: hyuil/my-app:1.0\r\n          ports:\r\n            - containerPort: 8080\r\n          resources:\r\n            limits:\r\n              memory: "64Mi"\r\n              cpu: "50m"\n'})}),"\n",(0,l.jsx)(n.h2,{id:"scale-out--in",children:"scale out / in"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl scale deployment my-app --replicas=3\n"})}),"\n",(0,l.jsx)(n.h2,{id:"rolling-update--rollback",children:"rolling update / rollback"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl set image deployment my-app my-app=hyuil/my-app:2.0 --record\r\n# kubectl set image \uC5EC\uB7EC\uAC1C\r\nkubectl set image deployment my-deployment web-container=new-image-for-web,db-container=new-image-for-db\r\n\r\nkubectl rollout status deployment my-app\r\nkubectl rollout history deployment my-app\r\nkubectl rollout undo deployment my-app\r\nkubectl rollout undo deployment my-app --to-revision=1\n"})}),"\n",(0,l.jsx)(n.h2,{id:"revision-\uAC2F\uC218-\uB298\uB9AC\uAE30",children:"revision \uAC2F\uC218 \uB298\uB9AC\uAE30"}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"revisionHistoryLimit\uC744 \uC62C\uB824\uC8FC\uAE30"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"apiVersion: apps/v1\r\nkind: Deployment\r\nmetadata:\r\n  name: my-deployment\r\nspec:\r\n  replicas: 3\r\n  selector:\r\n    matchLabels:\r\n      app: my-app\r\n  template:\r\n    metadata:\r\n      labels:\r\n        app: my-app\r\n    spec:\r\n      containers:\r\n        - name: my-container\r\n          image: my-image:latest\r\n  revisionHistoryLimit: 3\n"})})]})}function d(e={}){let{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},255511:function(e,n,t){t.d(n,{R:()=>o,x:()=>s});var r=t(596363);let l={},a=r.createContext(l);function o(e){let n=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:o(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);