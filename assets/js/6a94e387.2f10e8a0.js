"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["985925"],{259670:function(n,r,e){e.r(r),e.d(r,{frontMatter:()=>l,toc:()=>c,default:()=>u,metadata:()=>a,assets:()=>s,contentTitle:()=>o});var a=JSON.parse('{"id":"spring/spring Pagination - \uD398\uC774\uC9D5 \uCC98\uB9AC","title":"Pagination (\uD398\uC774\uC9D5 \uCC98\uB9AC)","description":"pagination \uCC98\uB9AC\uC6A9 \uAC1D\uCCB4","source":"@site/docs/spring/spring Pagination - \uD398\uC774\uC9D5 \uCC98\uB9AC.md","sourceDirName":"spring","slug":"/spring/spring Pagination - \uD398\uC774\uC9D5 \uCC98\uB9AC","permalink":"/docs/spring/spring Pagination - \uD398\uC774\uC9D5 \uCC98\uB9AC","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Spring Mybatis \uC138\uD305 \uC21C\uC11C!","permalink":"/docs/spring/spring Mybatis"},"next":{"title":"Resources","permalink":"/docs/spring/spring Resources"}}'),t=e(447259),i=e(255511);let l={},o="Pagination (\uD398\uC774\uC9D5 \uCC98\uB9AC)",s={},c=[{value:"pagination \uCC98\uB9AC\uC6A9 \uAC1D\uCCB4",id:"pagination-\uCC98\uB9AC\uC6A9-\uAC1D\uCCB4",level:2},{value:"mySQL pagination query",id:"mysql-pagination-query",level:2},{value:"controller",id:"controller",level:2},{value:"view",id:"view",level:2},{value:"pagination \uCC98\uB9AC\uC6A9 \uAC1D\uCCB4 + search \uD544\uB4DC",id:"pagination-\uCC98\uB9AC\uC6A9-\uAC1D\uCCB4--search-\uD544\uB4DC",level:2},{value:"mySQL pagination query + search query",id:"mysql-pagination-query--search-query",level:2},{value:"view + search",id:"view--search",level:2},{value:"QueryDsl",id:"querydsl",level:2}];function g(n){let r={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",pre:"pre",ul:"ul",...(0,i.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.header,{children:(0,t.jsx)(r.h1,{id:"pagination-\uD398\uC774\uC9D5-\uCC98\uB9AC",children:"Pagination (\uD398\uC774\uC9D5 \uCC98\uB9AC)"})}),"\n",(0,t.jsx)(r.h2,{id:"pagination-\uCC98\uB9AC\uC6A9-\uAC1D\uCCB4",children:"pagination \uCC98\uB9AC\uC6A9 \uAC1D\uCCB4"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:"public class Pagination {\r\n    private int PAGE_SIZE; // \uD55C\uBC88\uC5D0 \uBCF4\uC5EC\uC904 \uD398\uC774\uC9C0 \uC218\r\n    private int LIST_SIZE; // \uD55C\uBC88\uC5D0 \uBCF4\uC5EC\uC904 \uB9AC\uC2A4\uD2B8 \uC218\r\n    private int startPage; // \uD55C\uBC88\uC5D0 \uBCF4\uC774\uB294 \uD398\uC774\uC9C0 \uC911 \uCCAB\uBC88\uC9F8 \uBC88\uD638\r\n    private int endPage; //\uD55C\uBC88\uC5D0 \uBCF4\uC774\uB294 \uD398\uC774\uC9C0 \uC911 \uB9C8\uC9C0\uB9C9 \uBC88\uD638\r\n    private int theLastPage; // \uB9C8\uC9C0\uB9C9 \uD398\uC774\uC9C0 \uBC88\uD638\r\n    private int currentPage; // \uD604\uC7AC \uD398\uC774\uC9C0\r\n    private int cri; // criterion or cursor // \uC870\uD68C\uC2DC \uC0AC\uC6A9\uD560 \uAE30\uC900(\uCEE4\uC11C) \uC5ED\uD560\r\n\r\n    private boolean prev;\r\n    private boolean next;\r\n\r\n    public void paginate(int currentPage, int totalListSize, int PAGE_SIZE, int LIST_SIZE) {\r\n        this.PAGE_SIZE = PAGE_SIZE;\r\n        this.LIST_SIZE = LIST_SIZE;\r\n\r\n        this.theLastPage = (int) Math.ceil(totalListSize / (double) LIST_SIZE); // * int\uAC12\uC73C\uB85C\uB9CC \uB098\uB204\uBA74 \uC790\uB3D9 \uD615\uBCC0\uD658 \uB3FC\uBC84\uB9B0\uB2E4\r\n\r\n        this.currentPage = currentPage;\r\n\r\n        this.endPage = (int) (Math.ceil(currentPage / (double) PAGE_SIZE)) * PAGE_SIZE;\r\n        this.endPage = endPage > theLastPage ? theLastPage : endPage; // \uB9C8\uC9C0\uB9C9 \uBC88\uD638\uAC00 \uCD5C\uC885 \uD398\uC774\uC9C0 \uBC88\uD638\uBCF4\uB2E4 \uD06C\uBA74 \uCD5C\uC885 \uD398\uC774\uC9C0 \uBC88\uD638 \uBC18\uD658\r\n\r\n        this.startPage = this.endPage - (PAGE_SIZE - 1);\r\n        this.startPage = startPage < 1 ? 1 : startPage; // \uC2DC\uC791\uBC88\uD638\uAC00 1\uBCF4\uB2E4 \uC791\uC73C\uBA74 1\uC744 \uBC18\uD658\r\n\r\n        this.cri = (currentPage - 1) * LIST_SIZE;\r\n\r\n        //\uC774\uC804 \uBC84\uD2BC \uC0C1\uD0DC\r\n        this.prev = startPage == 1 ? false : true;\r\n\r\n        //\uB2E4\uC74C \uBC84\uD2BC \uC0C1\uD0DC\r\n        this.next = currentPage >= theLastPage ? false : true;\r\n    }\r\n}\n"})}),"\n",(0,t.jsx)(r.h2,{id:"mysql-pagination-query",children:"mySQL pagination query"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-xml",children:'<select id="getTotalListSize" resultType="int">\r\n    select count(*) as listCnt from bbs\r\n</select>\r\n\r\n<select id="getBoardList" resultType="Bbs">\r\n    SELECT * from bbs limit #{cri}, #{LIST_SIZE}\r\n</select>\n'})}),"\n",(0,t.jsx)(r.h2,{id:"controller",children:"controller"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'@GetMapping("/board")\r\npublic String board(Model model,\r\n                    @RequestParam(required = false, defaultValue = "1") int page){\r\n    int totalListCount = bbsDao.getBoardListCnt();\r\n\r\n    Pagination pagination = new Pagination(); // \uD398\uC774\uC9C0\uB124\uC774\uC158 \uAC1D\uCCB4 \uC0DD\uC131\r\n\r\n    pagination.paginate(page, totalListCount); // \uD398\uC774\uC9C0\uB124\uC774\uC158 \uCD08\uAE30\uD654\r\n\r\n    model.addAttribute("pagination", pagination);\r\n    model.addAttribute("BBS_LIST", bbsDao.getBoardList(pagination));\r\n    return null;\r\n}\n'})}),"\n",(0,t.jsx)(r.h2,{id:"view",children:"view"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-html",children:'<ul style="list-style:none; display: flex">\r\n  <li\r\n    style="padding:.5rem 1rem;margin:2px;background-color:skyblue;color:white;">\r\n    <a th:onclick="|location.href = \'/bbs/board?page=1\'|">&#60;&#60;</a>\r\n  </li>\r\n  <th:block th:if="${pagination.prev}">\r\n    <li\r\n      style="padding:.5rem 1rem;margin:2px;background-color:skyblue;color:white;">\r\n      <a th:onclick="|fn_prev(${pagination.currentPage})|">&#60;</a>\r\n    </li>\r\n  </th:block>\r\n  <th:block\r\n    th:each="index:${#numbers.sequence(pagination.startPage, pagination.endPage)}">\r\n    <li\r\n      th:style="|padding:.5rem 1rem;margin:2px;color:white;${pagination.currentPage==index?\'background-color:red\':\'background-color:skyblue\'}|">\r\n      <a\r\n        th:onclick="|fn_pagination(${index})|"\r\n        th:text="${index}"></a>\r\n    </li>\r\n  </th:block>\r\n  <th:block th:if="${pagination.next}">\r\n    <li\r\n      style="padding:.5rem 1rem;margin:2px;background-color:skyblue;color:white;">\r\n      <a th:onclick="|fn_next(${pagination.currentPage})|">&#62;</a>\r\n    </li>\r\n  </th:block>\r\n  <li\r\n    style="padding:.5rem 1rem;margin:2px;background-color:skyblue;color:white;">\r\n    <a\r\n      th:onclick="|location.href = \'/bbs/board?page=${pagination.theLastPage}\'|"\r\n      >&#62;&#62;</a\r\n    >\r\n  </li>\r\n</ul>\r\n\r\n<script>\r\n  function fn_prev(currentPage) {\r\n    var page = currentPage - 1;\r\n    var url = "/bbs/board";\r\n    url = url + "?page=" + page;\r\n    location.href = url;\r\n  }\r\n\r\n  function fn_pagination(page) {\r\n    var url = "/bbs/board";\r\n    url = url + "?page=" + page;\r\n    location.href = url;\r\n  }\r\n\r\n  function fn_next(currentPage) {\r\n    var page = currentPage + 1;\r\n    var url = "/bbs/board";\r\n    url = url + "?page=" + page;\r\n    location.href = url;\r\n  }\r\n<\/script>\n'})}),"\n",(0,t.jsx)(r.h1,{id:"\uD398\uC774\uC9D5-\uCC98\uB9AC--\uAC80\uC0C9",children:"\uD398\uC774\uC9D5 \uCC98\uB9AC + \uAC80\uC0C9"}),"\n",(0,t.jsx)(r.h2,{id:"pagination-\uCC98\uB9AC\uC6A9-\uAC1D\uCCB4--search-\uD544\uB4DC",children:"pagination \uCC98\uB9AC\uC6A9 \uAC1D\uCCB4 + search \uD544\uB4DC"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'public class Pagination {\r\n    private String search = "";\r\n    private int PAGE_SIZE; // \uD55C\uBC88\uC5D0 \uBCF4\uC5EC\uC904 \uD398\uC774\uC9C0 \uC218\r\n    private int LIST_SIZE; // \uD55C\uBC88\uC5D0 \uBCF4\uC5EC\uC904 \uB9AC\uC2A4\uD2B8 \uC218\r\n    private int startPage; // \uD55C\uBC88\uC5D0 \uBCF4\uC774\uB294 \uD398\uC774\uC9C0 \uC911 \uCCAB\uBC88\uC9F8 \uBC88\uD638\r\n    private int endPage; //\uD55C\uBC88\uC5D0 \uBCF4\uC774\uB294 \uD398\uC774\uC9C0 \uC911 \uB9C8\uC9C0\uB9C9 \uBC88\uD638\r\n    private int theLastPage; // \uB9C8\uC9C0\uB9C9 \uD398\uC774\uC9C0 \uBC88\uD638\r\n    private int currentPage; // \uD604\uC7AC \uD398\uC774\uC9C0\r\n    private int cri; // criterion or cursor // \uC870\uD68C\uC2DC \uC0AC\uC6A9\uD560 \uAE30\uC900(\uCEE4\uC11C) \uC5ED\uD560\r\n\r\n    private boolean prev;\r\n    private boolean next;\r\n\r\n    public void paginate(int currentPage, int totalListSize) {\r\n        this.search = this.search == null ? "" : this.search;\r\n\r\n        this.PAGE_SIZE = 3;\r\n        this.LIST_SIZE = 5;\r\n\r\n        this.theLastPage = (int) Math.ceil((float)totalListSize / LIST_SIZE); // * int\uAC12\uC73C\uB85C\uB9CC \uB098\uB204\uBA74 \uC790\uB3D9 \uD615\uBCC0\uD658 \uB3FC\uBC84\uB9B0\uB2E4\r\n\r\n        this.currentPage = currentPage;\r\n\r\n        this.startPage = currentPage - (currentPage - 1) % PAGE_SIZE;\r\n        this.startPage = startPage < 1 ? 1 : startPage; // \uC2DC\uC791\uBC88\uD638\uAC00 1\uBCF4\uB2E4 \uC791\uC73C\uBA74 1\uC744 \uBC18\uD658\r\n\r\n        this.endPage = startPage+(PAGE_SIZE-1);\r\n        this.endPage = endPage > theLastPage ? theLastPage : endPage; // \uB9C8\uC9C0\uB9C9 \uBC88\uD638\uAC00 \uCD5C\uC885 \uD398\uC774\uC9C0 \uBC88\uD638\uBCF4\uB2E4 \uD06C\uBA74 \uCD5C\uC885 \uD398\uC774\uC9C0 \uBC88\uD638 \uBC18\uD658\r\n\r\n        this.cri = (currentPage-1) * LIST_SIZE;\r\n\r\n        //\uC774\uC804 \uBC84\uD2BC \uC0C1\uD0DC\r\n        this.prev = startPage == 1 ? false : true;\r\n\r\n        //\uB2E4\uC74C \uBC84\uD2BC \uC0C1\uD0DC\r\n        this.next = currentPage >= theLastPage ? false : true;\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(r.h2,{id:"mysql-pagination-query--search-query",children:"mySQL pagination query + search query"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-xml",children:"<select id=\"getBoardListCnt\" resultType=\"int\">\r\n    select count(*) as listCnt\r\n    FROM (SELECT *\r\n            FROM bbs\r\n            WHERE username LIKE CONCAT('%', #{search}, '%')\r\n                OR content LIKE CONCAT('%', #{search}, '%')\r\n                OR title LIKE CONCAT('%', #{search}, '%')) AS SUB\r\n</select>\r\n\r\n<select id=\"getBoardList\" resultType=\"Bbs\">\r\n    SELECT *\r\n    FROM (SELECT *\r\n            FROM bbs\r\n            WHERE username LIKE CONCAT('%', #{search}, '%')\r\n                OR content LIKE CONCAT('%', #{search}, '%')\r\n                OR title LIKE CONCAT('%', #{search}, '%')) AS SUB\r\n        LIMIT #{cri}, #{LIST_SIZE}\r\n</select>\n"})}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"controller + search"}),"\n"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'@GetMapping("/board")\r\npublic String board(Model model,\r\n                    @RequestParam(required = false, defaultValue = "1") int page,\r\n                    Pagination pagination){\r\n\r\n    int totalListCount = bbsDao.getBoardListCnt(pagination.getSearch());\r\n    pagination.paginate(page, totalListCount); // \uD398\uC774\uC9C0\uB124\uC774\uC158 \uCD08\uAE30\uD654\r\n\r\n    model.addAttribute("pagination", pagination);\r\n    model.addAttribute("BBS_LIST", bbsDao.getBoardList(pagination));\r\n    return null;\r\n}\n'})}),"\n",(0,t.jsx)(r.h2,{id:"view--search",children:"view + search"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-html",children:'<form>\r\n  <input\r\n    type="text"\r\n    name="search"\r\n    th:value="${pagination.search}" />\r\n  // \uAC80\uC0C9\uC5B4\uB97C \uC720\uC9C0\uC2DC\uD0A4\uAE30 \uC704\uD574 value \uAC12\uC5D0 \uB123\uC5B4\uB450\uAE30\r\n  <button>\uAC80\uC0C9</button>\r\n</form>\r\n\r\n<ul style="list-style:none; display: flex">\r\n  <li\r\n    style="padding:.5rem 1rem;margin:2px;background-color:skyblue;color:white;">\r\n    <a th:onclick="|location.href = \'/bbs/board?page=1\'|">&#60;&#60;</a>\r\n  </li>\r\n  <th:block th:if="${pagination.prev}">\r\n    <li\r\n      style="padding:.5rem 1rem;margin:2px;background-color:skyblue;color:white;">\r\n      <a th:onclick="|fn_prev(${pagination.currentPage})|">&#60;</a>\r\n    </li>\r\n  </th:block>\r\n  <th:block\r\n    th:each="index:${#numbers.sequence(pagination.startPage, pagination.endPage)}">\r\n    <li\r\n      th:style="|padding:.5rem 1rem;margin:2px;color:white;${pagination.currentPage==index?\'background-color:red\':\'background-color:skyblue\'}|">\r\n      <a\r\n        th:onclick="|fn_pagination(${index})|"\r\n        th:text="${index}"></a>\r\n    </li>\r\n  </th:block>\r\n  <th:block th:if="${pagination.next}">\r\n    <li\r\n      style="padding:.5rem 1rem;margin:2px;background-color:skyblue;color:white;">\r\n      <a th:onclick="|fn_next(${pagination.currentPage})|">&#62;</a>\r\n    </li>\r\n  </th:block>\r\n  <li\r\n    style="padding:.5rem 1rem;margin:2px;background-color:skyblue;color:white;">\r\n    <a\r\n      th:onclick="|location.href = \'/bbs/board?page=${pagination.theLastPage}\'|"\r\n      >&#62;&#62;</a\r\n    >\r\n  </li>\r\n</ul>\r\n\r\n/* \uD604\uC7AC \uD398\uC774\uC9C0\uB97C \uBC14\uAFD4\uB3C4 \uAC80\uC0C9\uC5B4 \uC720\uC9C0\uB418\uAC8C */\r\n<script th:inline="javascript">\r\n  /*<![CDATA[*/\r\n  function fn_prev(currentPage) {\r\n      var page = currentPage - 1;\r\n      var url = "/bbs/board";\r\n      url = url + "?page=" + page;\r\n      url = url + "&search="+ [[${pagination.search}]];\r\n      location.href = url;\r\n  }\r\n\r\n  function fn_pagination(page) {\r\n      var url = "/bbs/board";\r\n      url = url + "?page=" + page;\r\n      url = url + "&search="+ [[${pagination.search}]];\r\n      location.href = url;\r\n  }\r\n\r\n  function fn_next(currentPage) {\r\n      var page = currentPage + 1;\r\n      var url = "/bbs/board";\r\n      url = url + "?page=" + page;\r\n      url = url + "&search="+ [[${pagination.search}]];\r\n      location.href = url;\r\n  }\r\n  /*]]>*/\r\n<\/script>\n'})}),"\n",(0,t.jsx)(r.h2,{id:"querydsl",children:"QueryDsl"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:"QueryModifiers queryModifiers = new QueryModifiers(20L, 10L); //limit, offset\r\nList<Item> list = query\r\n                    .from(item)\r\n                    .restrict(queryModifiers)\r\n                    .fetch(item);\n"})})]})}function u(n={}){let{wrapper:r}={...(0,i.R)(),...n.components};return r?(0,t.jsx)(r,{...n,children:(0,t.jsx)(g,{...n})}):g(n)}},255511:function(n,r,e){e.d(r,{R:()=>l,x:()=>o});var a=e(596363);let t={},i=a.createContext(t);function l(n){let r=a.useContext(i);return a.useMemo(function(){return"function"==typeof n?n(r):{...r,...n}},[r,n])}function o(n){let r;return r=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:l(n.components),a.createElement(i.Provider,{value:r},n.children)}}}]);