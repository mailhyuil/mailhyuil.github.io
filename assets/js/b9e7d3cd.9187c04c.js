"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[919266],{529087:(e,t,r)=>{r.d(t,{R:()=>a,x:()=>c});var n=r(596363);const o={},s=n.createContext(o);function a(e){const t=n.useContext(s);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),n.createElement(s.Provider,{value:t},e.children)}},663770:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>i,contentTitle:()=>c,default:()=>p,frontMatter:()=>a,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"nestjs/nest base decorator applyDecorators","title":"nest base decorator custom decorator \uae30\uc874 \ub370\uc774\ud130 \uc218\uc815","description":"ClassDecorator, MethodDecorator\ub97c \ud569\uc131\ud560 \uc218 \uc788\ub294 \ud568\uc218","source":"@site/docs/nestjs/nest base decorator applyDecorators.md","sourceDirName":"nestjs","slug":"/nestjs/nest base decorator applyDecorators","permalink":"/docs/nestjs/nest base decorator applyDecorators","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"nest SetMetadata","permalink":"/docs/nestjs/nest base decorator SetMetadata"},"next":{"title":"nest decorators","permalink":"/docs/nestjs/nest base decorator built-in"}}');var o=r(447259),s=r(529087);const a={},c="nest base decorator custom decorator \uae30\uc874 \ub370\uc774\ud130 \uc218\uc815",i={},d=[];function l(e){const t={blockquote:"blockquote",code:"code",h1:"h1",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.header,{children:(0,o.jsx)(t.h1,{id:"nest-base-decorator-custom-decorator-\uae30\uc874-\ub370\uc774\ud130-\uc218\uc815",children:"nest base decorator custom decorator \uae30\uc874 \ub370\uc774\ud130 \uc218\uc815"})}),"\n",(0,o.jsxs)(t.blockquote,{children:["\n",(0,o.jsx)(t.p,{children:"ClassDecorator, MethodDecorator\ub97c \ud569\uc131\ud560 \uc218 \uc788\ub294 \ud568\uc218"}),"\n"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-ts",children:'import { applyDecorators, Logger } from "@nestjs/common";\r\nimport { OnEvent, OnEventType } from "@nestjs/event-emitter";\r\nimport { OnEventOptions } from "@nestjs/event-emitter/dist/interfaces";\r\n\r\nfunction _OnSafeEvent() {\r\n  return function (target: any, key: string, descriptor: PropertyDescriptor) {\r\n    const originalMethod = descriptor.value;\r\n\r\n    const metaKeys = Reflect.getOwnMetadataKeys(descriptor.value);\r\n    const metadata = metaKeys.map(key => [key, Reflect.getMetadata(key, descriptor.value)]);\r\n\r\n    descriptor.value = async function (...args: any[]) {\r\n      try {\r\n        await originalMethod.call(this, ...args);\r\n      } catch (err) {\r\n        Logger.error(err, err.stack, "OnSafeEvent");\r\n      }\r\n    };\r\n\r\n    metadata.forEach(([k, v]) => Reflect.defineMetadata(k, v, descriptor.value));\r\n  };\r\n}\r\n\r\nexport function OnSafeEvent(event: OnEventType, options?: OnEventOptions | undefined) {\r\n  // OnEvent\uc744 _OnSafeEvent\ub85c \uac10\uc2f8\uc11c \ub9ac\ud134\r\n  return applyDecorators(OnEvent(event, options), _OnSafeEvent());\r\n}\n'})})]})}function p(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}}}]);