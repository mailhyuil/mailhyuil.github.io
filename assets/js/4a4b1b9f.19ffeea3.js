"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[847028],{210455:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>i,contentTitle:()=>a,default:()=>p,frontMatter:()=>t,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"docker/docker-compose","title":"docker-compose","description":"Docker-compose\ub97c \uc0ac\uc6a9\ud558\uc5ec \ubd84\uc0b0 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uc2e4\ud589\uc2dc\ud0ac \uc218 \uc788\ub2e4.","source":"@site/docs/docker/docker-compose.md","sourceDirName":"docker","slug":"/docker/docker-compose","permalink":"/docs/docker/docker-compose","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"docker-compose \ud658\uacbd\ubcc0\uc218","permalink":"/docs/docker/docker-compose \ud658\uacbd\ubcc0\uc218"},"next":{"title":"docker-entrypoint-initdb.d","permalink":"/docs/docker/docker-entrypoint-initdb.d"}}');var c=n(447259),s=n(529087);const t={},a="docker-compose",i={},d=[{value:"install",id:"install",level:2},{value:"\uba85\ub839\uc5b4",id:"\uba85\ub839\uc5b4",level:2},{value:"docker-compose.yml",id:"docker-composeyml",level:2}];function l(e){const r={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(r.header,{children:(0,c.jsx)(r.h1,{id:"docker-compose",children:"docker-compose"})}),"\n",(0,c.jsxs)(r.blockquote,{children:["\n",(0,c.jsx)(r.p,{children:"Docker-compose\ub97c \uc0ac\uc6a9\ud558\uc5ec \ubd84\uc0b0 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uc2e4\ud589\uc2dc\ud0ac \uc218 \uc788\ub2e4."}),"\n",(0,c.jsxs)(r.blockquote,{children:["\n",(0,c.jsx)(r.p,{children:"Dockerfile -> images -> docker-compose.yml -> containers"}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(r.h2,{id:"install",children:"install"}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-sh",children:"apt install docker-compose-plugin -y\n"})}),"\n",(0,c.jsx)(r.h2,{id:"\uba85\ub839\uc5b4",children:"\uba85\ub839\uc5b4"}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-bash",children:"# docker compose or docker-compose\ub85c \uc0ac\uc6a9 \uac00\ub2a5\r\n\r\ndocker compose up # \uc774 \uba85\ub839\uc744 \uc2e4\ud589\ud558\uba74 \ud604\uc7ac \ub514\ub809\ud1a0\ub9ac\uc5d0 \uc788\ub294 docker-compose.yml \ud30c\uc77c\uc744 \ucc3e\ub294\ub2e4\r\ndocker compose up -d # \ubc31\uadf8\ub77c\uc6b4\ub4dc\uc5d0\uc11c \uc2e4\ud589\r\n\r\ndocker compose down # \ubaa8\ub4e0 \ucee8\ud14c\uc774\ub108\uc640 \ub124\ud2b8\uc6cc\ud06c\ub97c \uc911\ub2e8 \ubc0f \uc0ad\uc81c\r\n\r\ndocker compose logs\r\ndocker compose stop\r\ndocker compose start\n"})}),"\n",(0,c.jsx)(r.h2,{id:"docker-composeyml",children:"docker-compose.yml"}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-yaml",children:'version: "3.8"\r\nservices:\r\n  db:\r\n    container_name: postgres\r\n    image: postgres:14-alpine\r\n    ports:\r\n      - "5432:5432"\r\n    restart: always\r\n    volumes:\r\n      - postgres-data:/var/lib/postgresql/data\r\n      - /mnt/server/archivedir:/mnt/server/archivedir\r\n    environment:\r\n      POSTGRES_USER: postgres\r\n      POSTGRES_PASSWORD: 1234\r\n      POSTGRES_DB: mydb\r\n    logging:\r\n      driver: "json-file"\r\n      options:\r\n        max-size: "8m"\r\n        max-file: "10"\r\n    networks:\r\n      - private\r\n    command: |\r\n      postgres \r\n      -c wal_level=replica \r\n      -c archive_mode=on\r\n      -c archive_command=\'test ! -f /mnt/server/archivedir/%f && cp %p /mnt/server/archivedir/%f\'\r\n      -c archive_timeout=1\r\n      -c autovacuum=on\r\n      -c autovacuum_vacuum_scale_factor=0.1\r\n      -c autovacuum_analyze_scale_factor=0.3\r\n\r\n  server:\r\n    container_name: server\r\n    image: hyuil/server:0.0.1\r\n    ports:\r\n      - "3000:3000"\r\n    restart: always\r\n    networks:\r\n      - private\r\n\r\n  nginx:\r\n    container_name: nginx\r\n    image: hyuil/nginx:0.0.1\r\n    ports:\r\n      - "80:80"\r\n      - "443:443"\r\n    restart: always\r\n    networks:\r\n      - public\r\n      - private\r\n\r\n  redis:\r\n    container_name: redis\r\n    image: redis:latest\r\n    ports:\r\n      - "6379:6379"\r\n    restart: always\r\n    networks:\r\n      - private\r\n\r\nvolumes:\r\n  postgres-data: {}\r\n\r\nnetworks:\r\n  public:\r\n    driver: bridge\r\n  private:\r\n    driver: bridge\r\n    internal: true\n'})})]})}function p(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,c.jsx)(r,{...e,children:(0,c.jsx)(l,{...e})}):l(e)}},529087:(e,r,n)=>{n.d(r,{R:()=>t,x:()=>a});var o=n(596363);const c={},s=o.createContext(c);function t(e){const r=o.useContext(s);return o.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:t(e.components),o.createElement(s.Provider,{value:r},e.children)}}}]);