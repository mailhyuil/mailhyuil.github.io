"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["844357"],{461325:function(e,t,r){r.r(t),r.d(t,{frontMatter:()=>c,toc:()=>s,default:()=>u,metadata:()=>n,assets:()=>l,contentTitle:()=>i});var n=JSON.parse('{"id":"angular/angular base interceptor \uBD84\uB9AC HttpContext","title":"angular interceptor \uBD84\uB9AC HttpContext","description":"interceptor","source":"@site/docs/angular/angular base interceptor \uBD84\uB9AC HttpContext.md","sourceDirName":"angular","slug":"/angular/angular base interceptor \uBD84\uB9AC HttpContext","permalink":"/docs/angular/angular base interceptor \uBD84\uB9AC HttpContext","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"angular interceptor \uBD84\uB9AC HttpBackend","permalink":"/docs/angular/angular base interceptor \uBD84\uB9AC HttpBackend"},"next":{"title":"angular http interceptor \uD2B9\uC815 url \uBB34\uC2DC\uD558\uAE30","permalink":"/docs/angular/angular base interceptor \uD2B9\uC815 url \uBB34\uC2DC\uD558\uAE30"}}'),o=r(447259),a=r(255511);let c={},i="angular interceptor \uBD84\uB9AC HttpContext",l={},s=[{value:"interceptor",id:"interceptor",level:2}];function p(e){let t={code:"code",h1:"h1",h2:"h2",header:"header",pre:"pre",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.header,{children:(0,o.jsx)(t.h1,{id:"angular-interceptor-\uBD84\uB9AC-httpcontext",children:"angular interceptor \uBD84\uB9AC HttpContext"})}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-ts",children:'export const APP_INIT = new HttpContextToken(() => false);\r\n\r\nconst context = new HttpContext().set(APP_INIT, true);\r\nhttp.get<UserDto>(environment.BASE_URL + "/api/v1/auth", {\r\n  context,\r\n});\n'})}),"\n",(0,o.jsx)(t.h2,{id:"interceptor",children:"interceptor"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-ts",children:"export function ApiInterceptorFn(req: HttpRequest<unknown>, next: HttpHandlerFn) {\r\n  const apiReq = req.clone({\r\n    withCredentials: true,\r\n  });\r\n\r\n  if (req.context.get(APP_INIT)) return next(apiReq);\r\n\r\n  const errorHandler = inject(GlobalErrorHandler);\r\n  return next(apiReq).pipe(\r\n    catchError(error => {\r\n      if (error instanceof HttpErrorResponse) {\r\n        errorHandler.handleError(error);\r\n      }\r\n      throw error;\r\n    }),\r\n  );\r\n}\n"})})]})}function u(e={}){let{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(p,{...e})}):p(e)}},255511:function(e,t,r){r.d(t,{R:()=>c,x:()=>i});var n=r(596363);let o={},a=n.createContext(o);function c(e){let t=n.useContext(a);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:c(e.components),n.createElement(a.Provider,{value:t},e.children)}}}]);