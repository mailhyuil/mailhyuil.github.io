"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[806525],{73191:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>s,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"angular/angular SSR cache TransferState & withHttpTransferCacheOptions","title":"angular SSR data caching","description":"\uc11c\ubc84\uc5d0\uc11c external api\uc5d0 \uc694\uccad\ud55c \ub370\uc774\ud130\ub97c \ud074\ub77c\uc774\uc5b8\ud2b8\uc5d0\uc11c \ub2e4\uc2dc \uc694\uccad\ud558\uc9c0 \uc54a\ub3c4\ub85d \ud558\uae30 \uc704\ud574 \uce90\uc2f1","source":"@site/docs/angular/angular SSR cache TransferState & withHttpTransferCacheOptions.md","sourceDirName":"angular","slug":"/angular/angular SSR cache TransferState & withHttpTransferCacheOptions","permalink":"/docs/angular/angular SSR cache TransferState & withHttpTransferCacheOptions","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"angular SSR Server Route","permalink":"/docs/angular/angular SSR Server Route"},"next":{"title":"angular ssr cookie httpOnly","permalink":"/docs/angular/angular SSR cookie httpOnly"}}');var a=t(447259),o=t(529087);const s={},i="angular SSR data caching",c={},l=[{value:"\uc0c8\ub85c\uc6b4 \ub370\uc774\ud130\ub97c \ubc1b\uc544\uc624\ub294 \ubc29\ubc95",id:"\uc0c8\ub85c\uc6b4-\ub370\uc774\ud130\ub97c-\ubc1b\uc544\uc624\ub294-\ubc29\ubc95",level:2}];function p(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"angular-ssr-data-caching",children:"angular SSR data caching"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"\uc11c\ubc84\uc5d0\uc11c external api\uc5d0 \uc694\uccad\ud55c \ub370\uc774\ud130\ub97c \ud074\ub77c\uc774\uc5b8\ud2b8\uc5d0\uc11c \ub2e4\uc2dc \uc694\uccad\ud558\uc9c0 \uc54a\ub3c4\ub85d \ud558\uae30 \uc704\ud574 \uce90\uc2f1"}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"TransferHttpCacheModule\ub294 http interceptor\ub85c\uc11c get\uacfc head \uc694\uccad\uc744 \uac00\ub85c\ucc44\uc11c \uce90\uc2f1\ud55c\ub2e4."}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"includePostRequests\ub97c true\ub85c \ud558\uba74 post \uba54\uc18c\ub4dc\ub3c4 \uce90\uc2f1\ud55c\ub2e4 \uc774\ub294 \ud398\uc774\uc9c0\uc5d0 \ub4e4\uc5b4\uac08 \ub54c \uc790\ub3d9\uc73c\ub85c post\ub97c \uc3d8\ub294 \ud398\uc774\uc9c0\uc5d0\uc11c \uc0ac\uc6a9\ub41c\ub2e4"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:'import { CommonModule, isPlatformServer } from "@angular/common";\r\nimport { HttpClient } from "@angular/common/http";\r\nimport { Component, OnInit, PLATFORM_ID, TransferState, inject, makeStateKey } from "@angular/core";\r\nimport { ActivatedRoute } from "@angular/router";\r\n\r\nconst key = makeStateKey<string>("home");\r\n\r\n@Component({\r\n  selector: "ssr-home",\r\n  templateUrl: "./home.component.html",\r\n  styleUrls: ["./home.component.scss"],\r\n  standalone: true,\r\n  imports: [CommonModule],\r\n})\r\nexport default class HomeComponent implements OnInit {\r\n  httpClient = inject(HttpClient);\r\n  route = inject(ActivatedRoute);\r\n  platformId = inject(PLATFORM_ID);\r\n  transferState = inject(TransferState);\r\n  data: any;\r\n  ngOnInit(): void {\r\n    if (this.transferState.hasKey(key)) {\r\n      // \uc11c\ubc84\uc5d0\uc11c \ubc1b\uc544\uc628 \ub370\uc774\ud130\uac00 \uc874\uc7ac\ud558\uba74 \ub370\uc774\ud130\ub97c \uc0ac\uc6a9\ud55c\ub2e4.\r\n      this.data = this.transferState.get(key, null);\r\n    } else {\r\n      // \ub370\uc774\ud130\uac00 \uc5c6\ub2e4\uba74 \ub370\uc774\ud130\ub97c \uc11c\ubc84\uc5d0\uc11c \ubc1b\uc544\uc628\ub2e4.\r\n      if (isPlatformServer(this.platformId)) {\r\n        this.httpClient.get(`https://jsonplaceholder.typicode.com/posts/${this.route.snapshot.params["id"]}`).subscribe((data) => {\r\n          this.transferState.set(key, data);\r\n          this.data = data;\r\n        });\r\n      }\r\n    }\r\n  }\r\n}\n'})}),"\n",(0,a.jsx)(n.h2,{id:"\uc0c8\ub85c\uc6b4-\ub370\uc774\ud130\ub97c-\ubc1b\uc544\uc624\ub294-\ubc29\ubc95",children:"\uc0c8\ub85c\uc6b4 \ub370\uc774\ud130\ub97c \ubc1b\uc544\uc624\ub294 \ubc29\ubc95"}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"\uc704\uc758 \ucf54\ub4dc\ub97c \ub0b4\ubd80\uc801\uc73c\ub85c \uc54c\uc544\uc11c \ucc98\ub9ac\ud574\uc90c"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"export const appConfig: ApplicationConfig = {\r\n  providers: [\r\n    provideClientHydration(\r\n      withHttpTransferCacheOptions({\r\n        includePostRequests: true,\r\n      })\r\n    ),\r\n  ],\r\n};\n"})})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(p,{...e})}):p(e)}},529087:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>i});var r=t(596363);const a={},o=r.createContext(a);function s(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);