"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[927236],{529087:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>c});var s=r(596363);const a={},t=s.createContext(a);function o(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),s.createElement(t.Provider,{value:n},e.children)}},603068:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>i});const s=JSON.parse('{"id":"javascript/js WeakMap","title":"js WeakMap","description":"key\ub85c \uac1d\uccb4\ub97c \ubc1b\ub294\ub2e4.","source":"@site/docs/javascript/js WeakMap.md","sourceDirName":"javascript","slug":"/javascript/js WeakMap","permalink":"/docs/javascript/js WeakMap","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Symbol","permalink":"/docs/javascript/js Symbol"},"next":{"title":"js WeakSet","permalink":"/docs/javascript/js WeakSet"}}');var a=r(447259),t=r(529087);const o={},c="js WeakMap",l={},i=[{value:"usage 1",id:"usage-1",level:2},{value:"usage 2",id:"usage-2",level:2},{value:"usage 3",id:"usage-3",level:2}];function u(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"js-weakmap",children:"js WeakMap"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"key\ub85c \uac1d\uccb4\ub97c \ubc1b\ub294\ub2e4."}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"\uac1d\uccb4\uc5d0 \ub300\ud55c \ubd80\ucc28\uc801\uc778 \ub370\uc774\ud130\ub97c \uc800\uc7a5\ud558\uace0 \uc2f6\uc744 \ub54c"}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"\uac1d\uccb4\uc758 \ucc38\uc870\uac00 \uc0ac\ub77c\uc9c0\uba74 WeakMap\uc758 \ucc38\uc870\ub3c4 \ud574\uc81c\ub41c\ub2e4."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-txt",children:"WeakMaps provide a way to extend objects from the outside without interfering with garbage collection. Whenever you want to extend an object but can't because it is sealed - or from an external source - a WeakMap can be applied.\r\n\r\nWeakMaps\ub294 garbage collection\uc758 \uac04\uc12d\uc744 \ud53c\ud558\uba70 object\ub97c \uc678\ubd80\uc801\uc73c\ub85c \ud655\uc7a5\ud560 \uc218 \uc788\ub294 \uc194\ub8e8\uc158\uc785\ub2c8\ub2e4.\r\n\ud2b9\ud788 sealed object\ub294 \ud504\ub85c\ud37c\ud2f0\ub97c \ucd94\uac00\ud560 \uc218 \uc5c6\ub294\ub370 \uc774 \uacbd\uc6b0 WeakMaps\uc758 \uc9c4\uac00\uac00 \ubc1c\ud718\ub429\ub2c8\ub2e4.\n"})}),"\n",(0,a.jsx)(n.h2,{id:"usage-1",children:"usage 1"}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"weak reference\ub97c \uc0ac\uc6a9\ud558\uace0 \uc2f6\uc744 \ub54c"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:'// Map \uc0ac\uc6a9 \uc2dc\r\nlet john = { name: "John" };\r\n\r\nlet map = new Map();\r\nmap.set(john, "add some value.."); // \ub9f5\uc774 \uac1d\uccb4\ub97c \ucc38\uc870\ud558\uac8c \ub428\r\n\r\njohn = null; // \ucc38\uc870\ub97c null\ub85c \ub36e\uc5b4\uc368\ub3c4 \uac00\ube44\uc9c0 \uceec\ub809\ud130\uc758 \ub300\uc0c1\uc774 \ub418\uc9c0 \uc54a\ub294\ub2e4.\r\n\r\nconsole.log(map.get(john)); // undefined \uac1d\uccb4\ub294 \uc0ac\ub77c\uc84c\uc9c0\ub9cc..\r\nconsole.log(map.size); // 1 \uc5ec\uc804\ud788 \ub0a8\uc544\uc788\uc74c..\r\n\r\n// WeakMap \uc0ac\uc6a9 \uc2dc\r\nlet john = { name: "John" };\r\n\r\nlet weakMap = new WeakMap();\r\nweakMap.set(john, "...");\r\n\r\njohn = null; // \ucc38\uc870\ub97c \ub36e\uc5b4\uc500\r\n\r\n// john\uc744 \ub098\ud0c0\ub0b4\ub294 \uac1d\uccb4\ub294 \uc774\uc81c \uba54\ubaa8\ub9ac\uc5d0\uc11c \uc9c0\uc6cc\uc9d1\ub2c8\ub2e4!\n'})}),"\n",(0,a.jsx)(n.h2,{id:"usage-2",children:"usage 2"}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"WeakMap\uc740 \ubd80\ucc28\uc801\uc778 \ub370\uc774\ud130\ub97c \uc800\uc7a5\ud560 \uacf3\uc774 \ud544\uc694\ud560 \ub54c \uadf8 \uc9c4\uac00\ub97c \ubc1c\ud718\ud569\ub2c8\ub2e4."}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"// \ud83d\udcc1 visitsCount.js\r\nconst visitsCountMap = new WeakMap(); // \uc704\ud06c\ub9f5\uc5d0 \uc0ac\uc6a9\uc790\uc758 \ubc29\ubb38 \ud69f\uc218\ub97c \uc800\uc7a5\ud568\r\n\r\n// \uc0ac\uc6a9\uc790\uac00 \ubc29\ubb38\ud558\uba74 \ubc29\ubb38 \ud69f\uc218\ub97c \ub298\ub824\uc90d\ub2c8\ub2e4.\r\nfunction countUser(user) {\r\n  let count = visitsCountMap.get(user) || 0;\r\n  visitsCountMap.set(user, count + 1);\r\n}\n"})}),"\n",(0,a.jsx)(n.h2,{id:"usage-3",children:"usage 3"}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"\uce90\uc2f1\uc5d0 \uc0ac\uc6a9"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"// \ud83d\udcc1 cache.js\r\nconst cache = new WeakMap();\r\n\r\n// \uc5f0\uc0b0\uc744 \uc218\ud589\ud558\uace0 \uadf8 \uacb0\uacfc\ub97c \uc704\ud06c\ub9f5\uc5d0 \uc800\uc7a5\ud569\ub2c8\ub2e4.\r\nfunction process(obj) {\r\n  if (!cache.has(obj)) {\r\n    const result = /* \uc5f0\uc0b0 \uc218\ud589 */ obj;\r\n\r\n    cache.set(obj, result);\r\n  }\r\n\r\n  return cache.get(obj);\r\n}\r\n\r\n// \ud83d\udcc1 main.js\r\nconst obj = {\r\n  /* ... \uac1d\uccb4 ... */\r\n};\r\n\r\nconst result1 = process(obj);\r\nconst result2 = process(obj);\r\n\r\n// \uac1d\uccb4\uac00 \uc4f8\ubaa8\uc5c6\uc5b4\uc9c0\uba74 \uc544\ub798\uc640 \uac19\uc774 null\ub85c \ub36e\uc5b4\uc501\ub2c8\ub2e4.\r\nobj = null;\r\n\r\n// \uadf8\ub0e5 Map\uc744 \uc0ac\uc6a9\uc2dc cache.size\ub294 1\uc744 \ub9ac\ud134\ud569\ub2c8\ub2e4.\r\n// \ud558\uc9c0\ub9cc WeakMap\uc740 obj\uac00 \uac00\ube44\uc9c0 \uceec\ub809\uc158\uc758 \ub300\uc0c1\uc774 \ub418\ubbc0\ub85c, \uce90\uc2f1\ub41c \ub370\uc774\ud130 \uc5ed\uc2dc \uba54\ubaa8\ub9ac\uc5d0\uc11c \uc0ad\uc81c\ub420 \uac81\ub2c8\ub2e4.\r\n// \uc0ad\uc81c\uac00 \uc9c4\ud589\ub418\uba74 cache\uc5d4 \uadf8 \uc5b4\ub5a4 \uc694\uc18c\ub3c4 \ub0a8\uc544\uc788\uc9c0 \uc54a\uc744\uac81\ub2c8\ub2e4.\n"})})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(u,{...e})}):u(e)}}}]);