"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[446793],{529087:(n,e,t)=>{t.d(e,{R:()=>l,x:()=>o});var s=t(596363);const r={},i=s.createContext(r);function l(n){const e=s.useContext(i);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:l(n.components),s.createElement(i.Provider,{value:e},n.children)}},901047:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>l,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"nginx/nginx https TLS & SSL","title":"nginx https TLS & SSL","description":"nginx ssl","source":"@site/docs/nginx/nginx https TLS & SSL.md","sourceDirName":"nginx","slug":"/nginx/nginx https TLS & SSL","permalink":"/docs/nginx/nginx https TLS & SSL","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"nginx https TLS & SSL OCSP - Online Certificate Status Protocol - ssl_trusted_certificate","permalink":"/docs/nginx/nginx https TLS & SSL OCSP - Online Certificate Status Protocol - ssl_trusted_certificate"},"next":{"title":"nginx load balancing","permalink":"/docs/nginx/nginx load balancing sticky session"}}');var r=t(447259),i=t(529087);const l={},o=void 0,c={},a=[{value:"nginx ssl",id:"nginx-ssl",level:2},{value:"nginx default.conf",id:"nginx-defaultconf",level:3}];function d(n){const e={blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,i.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h2,{id:"nginx-ssl",children:"nginx ssl"}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"nginx \ucee8\ud14c\uc774\ub108 \ud3ec\ud2b8 80, 443 \uc5f4\uae30"}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"EC2 \uc778\uc2a4\ud134\uc2a4 \ubc29\ud654\ubcbd 80, 443 \uc5f4\uae30"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sh",children:"mkdir /root/ssl/ && cd /root/ssl\r\nopenssl req -x509 -days 365 -nodes -newkey rsa:4096 -keyout ssl.key -out ssl.crt\n"})}),"\n",(0,r.jsx)(e.h3,{id:"nginx-defaultconf",children:"nginx default.conf"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-conf",children:"server {\r\n    listen 80;\r\n    listen [::]:80;\r\n    server_name my_server_name;\r\n\r\n    # client\uc5d0\uac8c https://$host$request_uri\ub85c \ub9ac\ub2e4\uc774\ub809\ud2b8 \ud558\ub77c\ub294 301 \uc751\ub2f5\uc744 \ubcf4\ub0c4\r\n    return 301 https://$host$request_uri;\r\n}\r\n\r\nserver {\r\n    listen 443 ssl;\r\n    listen [::]:443 ssl;\r\n    server_name my_server_name;\r\n\r\n    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\r\n    ssl_certificate /etc/nginx/ssl/ssl_certificate.pem;\r\n    ssl_certificate_key /etc/nginx/ssl/ssl_certificate_key.pem;\r\n\r\n    # (optional) enable OCSP stapling\r\n    ssl_trusted_certificate /etc/nginx/ssl/ssl_trusted_certificate.pem;\r\n    ssl_stapling on;\r\n    ssl_stapling_verify on;\r\n    resolver 8.8.8.8 1.1.1.1; # \ub124\uc784\uc11c\ubc84\uc758 \uc8fc\uc18c (\ud638\uc2a4\ud305 \uc5c5\uccb4\uc758)\r\n\r\n    location / {\r\n        root /usr/share/nginx/html;\r\n        index index.html;\r\n        try_files $uri $uri/ /index.html =404;\r\n    }\r\n\r\n    location /api/v1/ {\r\n        proxy_pass http://localhost:20001;\r\n    }\r\n}\n"})})]})}function u(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(d,{...n})}):d(n)}}}]);