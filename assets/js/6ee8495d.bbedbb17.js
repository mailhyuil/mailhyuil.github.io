"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["178530"],{574037:function(e,r,n){n.r(r),n.d(r,{frontMatter:()=>c,toc:()=>u,default:()=>a,metadata:()=>o,assets:()=>i,contentTitle:()=>t});var o=JSON.parse('{"id":"nodejs/nodejs module multicore cluster","title":"nodejs cluster","description":"multi processing\uC744 \uAD6C\uD604","source":"@site/docs/nodejs/nodejs module multicore cluster.md","sourceDirName":"nodejs","slug":"/nodejs/nodejs module multicore cluster","permalink":"/docs/nodejs/nodejs module multicore cluster","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"node module cluster vs child_process vs worker_threads","permalink":"/docs/nodejs/nodejs module multicore cluster vs child_process vs worker_thread"},"next":{"title":"node worker_threads SharedArrayBuffer & Atomics","permalink":"/docs/nodejs/nodejs module multicore worker_threads SharedArrayBuffer & Atomics"}}'),s=n(447259),l=n(255511);let c={},t="nodejs cluster",i={},u=[{value:"usage",id:"usage",level:2},{value:"\uC2A4\uCF00\uC904\uB9C1 \uC815\uCC45",id:"\uC2A4\uCF00\uC904\uB9C1-\uC815\uCC45",level:2}];function d(e){let r={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"nodejs-cluster",children:"nodejs cluster"})}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"multi processing\uC744 \uAD6C\uD604"}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"\uAC01 \uCF54\uC5B4\uC5D0 process\uB97C \uC0DD\uC131"}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"child_process\uB85C \uAD6C\uD604\uB418\uC5C8\uC74C"}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"nodejs \uC571 \uC790\uCCB4\uB97C \uBA40\uD2F0\uCF54\uC5B4\uC5D0\uC11C \uC2E4\uD589\uD558\uB294 \uAC83"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"usage",children:"usage"}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"cluster.fork()\uB85C worker process\uC0DD\uC131"}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"\uC791\uC5C5\uAD00\uB9AC\uC790\uB85C \uD655\uC778\uD574\uBCF4\uBA74 \uB450\uAC1C\uC758 \uD504\uB85C\uC138\uC2A4\uAC00 \uC0DD\uC131\uB41C \uAC83\uC744 \uD655\uC778\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"\uB450\uAC1C\uC758 \uD504\uB85C\uC138\uC2A4\uB294 \uB3D9\uC2DC\uC5D0 \uC791\uC5C5\uC744 \uC218\uD589\uD569\uB2C8\uB2E4."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-js",children:'const cluster = require("cluster");\r\nconst process = require("process");\r\n\r\nif (cluster.isPrimary) {\r\n  // \uB9C8\uC2A4\uD130 \uD504\uB85C\uC138\uC2A4\r\n  console.log(`Main ${process.pid} is running`);\r\n  cluster.fork(); // worker \uC0DD\uC131\r\n  for (let i = 0; i < 1000000; i++) {\r\n    console.log("i\'m a main! nice to meet you!");\r\n  }\r\n} else {\r\n  // \uC6CC\uCEE4 \uD504\uB85C\uC138\uC2A4\r\n  console.log(`Worker ${process.pid} started`);\r\n  for (let i = 0; i < 1000000; i++) {\r\n    console.log("i\'m a worker! nice to meet you!");\r\n  }\r\n}\n'})}),"\n",(0,s.jsx)(r.h2,{id:"\uC2A4\uCF00\uC904\uB9C1-\uC815\uCC45",children:"\uC2A4\uCF00\uC904\uB9C1 \uC815\uCC45"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-js",children:'const cluster = require("cluster");\r\n\r\ncluster.schedulingPolicy = cluster.SCHED_NONE; // \uC2A4\uCF00\uC904\uB9C1 \uC815\uCC45\uC744 \uC218\uB3D9\uC73C\uB85C \uC124\uC815\r\n// cluster.schedulingPolicy = cluster.SCHED_RR; // \uC2A4\uCF00\uC904\uB9C1 \uC815\uCC45\uC744 \uB77C\uC6B4\uB4DC \uB85C\uBE48\uC73C\uB85C \uC124\uC815\r\n\r\ncluster.on("online", (worker) => {\r\n  console.log("online worker \uC544\uC774\uB514", worker.id);\r\n});\r\n\r\ncluster.on("exit", function (worker, code, signal) {\r\n  console.log("\uC8FD\uC740 \uC6CC\uCEE4\uC758 \uC544\uC774\uB514 : " + worker.process.pid);\r\n  console.log("\uC8FD\uC740 \uC6CC\uCEE4\uC758 exit code : " + code);\r\n  console.log("\uC8FD\uC740 \uC6CC\uCEE4\uC758 signal : " + signal);\r\n});\r\n\r\nif (cluster.isMaster) {\r\n  console.log("I am master");\r\n  cluster.fork(); // worker \uC0DD\uC131\r\n  cluster.fork(); // worker \uC0DD\uC131\r\n  cluster.fork(); // worker \uC0DD\uC131\r\n  cluster.fork(); // worker \uC0DD\uC131\r\n} else if (cluster.isWorker) {\r\n  console.log("I am worker");\r\n}\n'})})]})}function a(e={}){let{wrapper:r}={...(0,l.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},255511:function(e,r,n){n.d(r,{R:()=>c,x:()=>t});var o=n(596363);let s={},l=o.createContext(s);function c(e){let r=o.useContext(l);return o.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function t(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),o.createElement(l.Provider,{value:r},e.children)}}}]);