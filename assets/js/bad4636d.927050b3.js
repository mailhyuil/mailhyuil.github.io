"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[749911],{529087:(e,s,r)=>{r.d(s,{R:()=>a,x:()=>c});var n=r(596363);const t={},o=n.createContext(t);function a(e){const s=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),n.createElement(o.Provider,{value:s},e.children)}},601172:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>p,contentTitle:()=>c,default:()=>i,frontMatter:()=>a,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"db-postgres/postgres backup pg_basebackup","title":"postgres WAL \uc544\uce74\uc774\ube0c pg_basebackup","description":"pg_basebackup\uc740 \ubb3c\ub9ac\uc801 \ubc31\uc5c5 \ubc29\ubc95\uc73c\ub85c \uc2e4\uc81c \ub514\uc2a4\ud06c\uc758 \ub370\uc774\ud130 \ud30c\uc77c\uc744 \ubcf5\uc0ac\ud558\uc5ec \ubc31\uc5c5\ud558\ub294 \ubc29\ubc95\uc774\ub2e4.","source":"@site/docs/db-postgres/postgres backup pg_basebackup.md","sourceDirName":"db-postgres","slug":"/db-postgres/postgres backup pg_basebackup","permalink":"/docs/db-postgres/postgres backup pg_basebackup","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"docker postgresql script backup and upload s3","permalink":"/docs/db-postgres/postgres backup docker"},"next":{"title":"postgres pg_dump & pg_dumpall","permalink":"/docs/db-postgres/postgres backup pg_dump & pg_dumpall"}}');var t=r(447259),o=r(529087);const a={},c="postgres WAL \uc544\uce74\uc774\ube0c pg_basebackup",p={},d=[{value:"docker",id:"docker",level:2}];function l(e){const s={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"postgres-wal-\uc544\uce74\uc774\ube0c-pg_basebackup",children:"postgres WAL \uc544\uce74\uc774\ube0c pg_basebackup"})}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsx)(s.p,{children:"pg_basebackup\uc740 \ubb3c\ub9ac\uc801 \ubc31\uc5c5 \ubc29\ubc95\uc73c\ub85c \uc2e4\uc81c \ub514\uc2a4\ud06c\uc758 \ub370\uc774\ud130 \ud30c\uc77c\uc744 \ubcf5\uc0ac\ud558\uc5ec \ubc31\uc5c5\ud558\ub294 \ubc29\ubc95\uc774\ub2e4."}),"\n",(0,t.jsx)(s.p,{children:"pg_basebackup\uc744 \uc2e4\ud589\ud558\uba74 \uc2e4\uc81c \ub370\uc774\ud130 \ube14\ub85d, WAL \ub85c\uadf8, \ud14c\uc774\ube14 \ud30c\uc77c \ub4f1 \ud30c\uc77c \ub808\ubca8 \ubcf5\uc0ac\ub97c \uc218\ud589\ud55c\ub2e4."}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsx)(s.p,{children:"\ud074\ub7ec\uc2a4\ud130 \ub2e8\uc704\ub85c \ubc31\uc5c5"}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsx)(s.p,{children:"\ub370\uc774\ud130 \ub514\ub809\ud1a0\ub9ac, \ud14c\uc774\ube14 \uc2a4\ud398\uc774\uc2a4 \ub4f1 \ubaa8\ub4e0 \ud30c\uc77c\uc744 \ubc31\uc5c5\ud55c\ub2e4."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:'-U # \uc720\uc800\r\n-h # \ud638\uc2a4\ud2b8\r\n-p # \ud3ec\ud2b8\r\n\r\n-X # WAL \uc804\uc1a1\ubc29\ubc95 /// none, stream, fetch\r\n\r\n--pgdata / -D # Standby DB \uc0c1\uc758 \ub370\uc774\ud130 \uc800\uc7a5 \uc704\uce58 \ub514\ub809\ud1a0\ub9ac\r\n--checkpoint=fast / -c=fast # \ube60\ub978 \uccb4\ud06c\ud3ec\uc778\ud2b8 \uc218\ud589\r\n\r\n--slot # Replication Slot \uc124\uc815.\r\n# \uae30\ubcf8\uc801\uc73c\ub85c WAL\uc740 Primary\uc5d0\uc11c \ub354 \uc774\uc0c1 \uc0ac\uc6a9\ub418\uc9c0 \uc54a\uac8c \ub418\uba74 \uc7ac\uc0ac\uc6a9\ub428.\r\n# \uadf8\ub7ec\ub098 Standby\uac00 Primary\uc758 WAL\uc744 \uc544\uc9c1 \ubc18\uc601\ud558\uc9c0 \uc54a\uc740 \uc0c1\ud0dc\uc5d0\uc11c \uc7ac\uc0ac\uc6a9 \ub418\uac8c \ub418\uba74 \ub370\uc774\ud130\uc758 \uc720\uc2e4\uc774 \ubc1c\uc0dd\ud558\uac8c \ub428.\r\n# Replication Slot\uc740 Standby\uc5d0 WAL\uc774 \ubc18\uc601\ub41c \uc774\ud6c4\uc5d0\ub9cc Primary WAL\uc744 \uc7ac\ud65c\uc6a9\ud560 \uc218 \uc788\ub3c4\ub85d \ud558\ub294 \uc5ed\ud560\uc744 \ud558\uace0,\r\n# "--slot=some_name" \ub294 Replication Slot\uc774 \uc5c6\uc73c\uba74 Standby\uac00 \uc2e4\ud328\ud558\ub3c4\ub85d \ud558\ub294 \uc124\uc815\r\n\r\n-R # \ubcf5\uc81c\ub97c \uc704\ud55c Standby DB \uc124\uc815\uc744 \uc790\ub3d9\uc73c\ub85c \uc218\ud589\r\n\r\n\r\npg_basebackup -D /mnt/server/backupdir -c fast -X none\n'})}),"\n",(0,t.jsx)(s.h2,{id:"docker",children:"docker"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"docker exec -it postgres bash -c '\r\n  export PGPASSWORD=\"password\"\r\n  pg_basebackup \\\r\n    -h localhost \\\r\n    -U postgres \\\r\n    -D /var/lib/postgresql/basebackup_dir/$(date +%Y%m%d_%H%M%S) \\\r\n    -Ft -z -X fetch -P'\n"})})]})}function i(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}}}]);