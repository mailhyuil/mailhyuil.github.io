"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[83800],{43408:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>i,contentTitle:()=>d,default:()=>u,frontMatter:()=>s,metadata:()=>o,toc:()=>a});const o=JSON.parse('{"id":"c++/c++ node-gyp","title":"c++ node-gyp","description":"Nodejs \ub124\uc774\ud2f0\ube0c \uc560\ub4dc\uc628 \ube4c\ub4dc \ud234","source":"@site/docs/c++/c++ node-gyp.md","sourceDirName":"c++","slug":"/c++/c++ node-gyp","permalink":"/docs/c++/c++ node-gyp","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"c++ make & Makefile","permalink":"/docs/c++/c++ make"},"next":{"title":"Cache","permalink":"/docs/category/cache"}}');var r=l(447259),c=l(529087);const s={},d="c++ node-gyp",i={},a=[{value:"install",id:"install",level:2},{value:"hello.cc",id:"hellocc",level:2},{value:"binding.gyp",id:"bindinggyp",level:2},{value:"build",id:"build",level:2},{value:"main.js",id:"mainjs",level:2}];function t(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"c-node-gyp",children:"c++ node-gyp"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Nodejs \ub124\uc774\ud2f0\ube0c \uc560\ub4dc\uc628 \ube4c\ub4dc \ud234"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"\ub85c\uceec \ucef4\ud4e8\ud130\uc5d0\uc11c \uc124\uce58\ub41c Python, make, clang\uc744 \uc0ac\uc6a9"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"<node.h> path"})}),"\n",(0,r.jsxs)(n.p,{children:["(\uc708\ub3c4\uc6b0: ",(0,r.jsx)(n.code,{children:"C:\\Users\\<UserName>\\AppData\\Local\\node-gyp\\Cache\\<NodeVersion>\\include\\node"}),")"]}),"\n",(0,r.jsxs)(n.p,{children:["(\ub9e5: ",(0,r.jsx)(n.code,{children:"/usr/local/include/node"}),")"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"install",children:"install"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'visual studio build tools \uc124\uce58 ("Desktop development with C++" workload\ub97c \ud3ec\ud568)\r\npython \uc124\uce58 (\uc708\ub3c4\uc6b0: \ud658\uacbd\ubcc0\uc218 \ucd94\uac00)\r\nnpm i -g node-gyp\n'})}),"\n",(0,r.jsx)(n.h2,{id:"hellocc",children:"hello.cc"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cpp",children:'// hello.cc\r\n#include <node.h>\r\n\r\nnamespace demo {\r\n\r\nusing v8::FunctionCallbackInfo;\r\nusing v8::Isolate;\r\nusing v8::Local;\r\nusing v8::Object;\r\nusing v8::String;\r\nusing v8::Value;\r\n\r\n// Method \uc815\uc758\r\nvoid MyCustomMethod(const FunctionCallbackInfo<Value>& args) {\r\n  Isolate* isolate = args.GetIsolate();\r\n  args.GetReturnValue().Set(String::NewFromUtf8(\r\n      isolate, "Hello World!!!").ToLocalChecked());\r\n}\r\n\r\n// \ud544\uc218\r\nvoid Initialize(Local<Object> exports) {\r\n  NODE_SET_METHOD(exports, "sayHello", MyCustomMethod);\r\n}\r\n\r\n// \ud544\uc218\r\nNODE_MODULE(NODE_GYP_MODULE_NAME, Initialize)\r\n\r\n}  // namespace demo\n'})}),"\n",(0,r.jsx)(n.h2,{id:"bindinggyp",children:"binding.gyp"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-gyp",children:'{\r\n  "targets": [\r\n    {\r\n      "target_name": "addon",\r\n      "sources": [ "hello.cc" ]\r\n    }\r\n  ]\r\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"build",children:"build"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"node-gyp configure # makefile \uc0dd\uc131\r\nnode-gyp build # \ube4c\ub4dc\n"})}),"\n",(0,r.jsx)(n.h2,{id:"mainjs",children:"main.js"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const addon = require(\"./build/Release/addon.node\");\r\n\r\nconsole.log(addon.sayHello()); // 'Hello World!!!'\n"})})]})}function u(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}},529087:(e,n,l)=>{l.d(n,{R:()=>s,x:()=>d});var o=l(596363);const r={},c=o.createContext(r);function s(e){const n=o.useContext(c);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),o.createElement(c.Provider,{value:n},e.children)}}}]);