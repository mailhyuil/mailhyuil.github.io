"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["451742"],{920826:function(e,n,r){r.r(n),r.d(n,{frontMatter:()=>l,toc:()=>a,default:()=>p,metadata:()=>s,assets:()=>i,contentTitle:()=>c});var s=JSON.parse('{"id":"nodejs/pm2 reload - \uBB34\uC911\uB2E8 \uBC30\uD3EC","title":"pm2 reload","description":"restart \uC2DC\uC5D0\uB294 \uC11C\uBC84\uAC00 \uB0B4\uB824\uAC00\uB294 \uC2DC\uAC04\uC774 \uC788\uC9C0\uB9CC, reload\uB294 \uB0B4\uB824\uAC00\uC9C0 \uC54A\uACE0 \uC7AC\uC2DC\uC791\uD55C\uB2E4.","source":"@site/docs/nodejs/pm2 reload - \uBB34\uC911\uB2E8 \uBC30\uD3EC.md","sourceDirName":"nodejs","slug":"/nodejs/pm2 reload - \uBB34\uC911\uB2E8 \uBC30\uD3EC","permalink":"/docs/nodejs/pm2 reload - \uBB34\uC911\uB2E8 \uBC30\uD3EC","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"pm2 port 80, 443 permission","permalink":"/docs/nodejs/pm2 port 80, 443 permission"},"next":{"title":"pm2 script","permalink":"/docs/nodejs/pm2 script"}}'),o=r(447259),t=r(255511);let l={},c="pm2 reload",i={},a=[{value:"ecosystem.config.js",id:"ecosystemconfigjs",level:2},{value:"\uC694\uCCAD \uC911\uC778 \uC791\uC5C5 \uCC98\uB9AC\uD560 \uB54C\uAE4C\uC9C0 \uC11C\uBC84\uC758 \uC885\uB8CC\uB97C \uB300\uAE30\uC2DC\uD0A4\uAE30",id:"\uC694\uCCAD-\uC911\uC778-\uC791\uC5C5-\uCC98\uB9AC\uD560-\uB54C\uAE4C\uC9C0-\uC11C\uBC84\uC758-\uC885\uB8CC\uB97C-\uB300\uAE30\uC2DC\uD0A4\uAE30",level:2}];function d(e){let n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"pm2-reload",children:"pm2 reload"})}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsx)(n.p,{children:"restart \uC2DC\uC5D0\uB294 \uC11C\uBC84\uAC00 \uB0B4\uB824\uAC00\uB294 \uC2DC\uAC04\uC774 \uC788\uC9C0\uB9CC, reload\uB294 \uB0B4\uB824\uAC00\uC9C0 \uC54A\uACE0 \uC7AC\uC2DC\uC791\uD55C\uB2E4."}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsx)(n.p,{children:"restart === kill + start"}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsx)(n.p,{children:"reload === a 0-second-downtime reload. // \uBB34\uC911\uB2E8 \uC7AC\uC2DC\uC791"}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsx)(n.p,{children:"reload\uB97C \uC0AC\uC6A9\uD558\uBA74 \uC0C8\uB85C\uC6B4 \uD504\uB85C\uC138\uC2A4\uB97C \uBA3C\uC800 spawn\uD558\uACE0, \uC774\uD6C4\uC5D0 \uAE30\uC874 \uD504\uB85C\uC138\uC2A4\uB97C kill\uD55C\uB2E4."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"ecosystemconfigjs",children:"ecosystem.config.js"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'module.exports = {\r\n  apps: [\r\n    {\r\n      name: "@hyuil/server",\r\n      script: "./main.js",\r\n      watch: ".",\r\n      instances: -1, // \uD074\uB7EC\uC2A4\uD130 \uBAA8\uB4DC\r\n    },\r\n  ],\r\n};\n'})}),"\n",(0,o.jsx)(n.h2,{id:"\uC694\uCCAD-\uC911\uC778-\uC791\uC5C5-\uCC98\uB9AC\uD560-\uB54C\uAE4C\uC9C0-\uC11C\uBC84\uC758-\uC885\uB8CC\uB97C-\uB300\uAE30\uC2DC\uD0A4\uAE30",children:"\uC694\uCCAD \uC911\uC778 \uC791\uC5C5 \uCC98\uB9AC\uD560 \uB54C\uAE4C\uC9C0 \uC11C\uBC84\uC758 \uC885\uB8CC\uB97C \uB300\uAE30\uC2DC\uD0A4\uAE30"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'// server.js\r\n\r\nconst app = express();\r\n\r\nlet disableKeepAlive = false;\r\n\r\n// \uC911\uB2E8 \uC2DC\uADF8\uB110\uC774 disableKeepAlive\uB97C true\uB85C \uBC14\uAFB8\uBA74\r\n// \uC774\uD6C4 \uC694\uCCAD\uC740 \uBAA8\uB450 close\uB85C \uC751\uB2F5\uD55C\uB2E4.\r\n// \uC694\uCCAD, \uC751\uB2F5 \uCC98\uB9AC\uAC00 \uB05D\uB098\uBA74 \uCEE4\uB125\uC158\uC744 \uB2EB\uB294\uB2E4.\r\napp.use((req, res, next) => {\r\n  if (disableKeepAlive) {\r\n    res.set("Connection", "close");\r\n  }\r\n  next();\r\n});\r\n\r\nconst server = app.listen(process.env.PORT, () => {\r\n  console.log(`The application is listening on port ${process.env.PORT}`);\r\n  if (process.send) {\r\n    console.log("send");\r\n    process.send("ready");\r\n  }\r\n});\r\n\r\nprocess.on("SIGINT", async () => {\r\n  disableKeepAlive = true;\r\n  server.close();\r\n  process.exit(0);\r\n});\n'})})]})}function p(e={}){let{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},255511:function(e,n,r){r.d(n,{R:()=>l,x:()=>c});var s=r(596363);let o={},t=s.createContext(o);function l(e){let n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);