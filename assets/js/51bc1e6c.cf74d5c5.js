"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["459164"],{584013:function(e,r,n){n.r(r),n.d(r,{frontMatter:()=>l,toc:()=>a,default:()=>u,metadata:()=>i,assets:()=>s,contentTitle:()=>t});var i=JSON.parse('{"id":"docker/Dockerfile basic","title":"Dockerfile basic","description":"Dockerfile basic","source":"@site/docs/docker/Dockerfile basic.md","sourceDirName":"docker","slug":"/docker/Dockerfile basic","permalink":"/docs/docker/Dockerfile basic","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Dockerfile angular SSR universal","permalink":"/docs/docker/Dockerfile angular SSR universal"},"next":{"title":"Dockerfile nginx","permalink":"/docs/docker/Dockerfile nginx"}}'),c=n(447259),o=n(255511);let l={},t,s={},a=[{value:"Dockerfile basic",id:"dockerfile-basic",level:2},{value:"build",id:"build",level:2},{value:"Dockerfile \uC555\uCD95",id:"dockerfile-\uC555\uCD95",level:2}];function d(e){let r={blockquote:"blockquote",code:"code",h2:"h2",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(r.h2,{id:"dockerfile-basic",children:"Dockerfile basic"}),"\n",(0,c.jsxs)(r.blockquote,{children:["\n",(0,c.jsx)(r.p,{children:"image\uB97C \uC0DD\uC131\uD558\uAE30 \uC704\uD55C \uC2A4\uD06C\uB9BD\uD2B8\uD30C\uC77C"}),"\n",(0,c.jsxs)(r.blockquote,{children:["\n",(0,c.jsx)(r.p,{children:"Docker\uB294 Dockerfile\uC5D0 \uB098\uC5F4\uB41C \uBA85\uB839\uBB38\uC744 \uCC28\uB840\uB300\uB85C \uC218\uD589"}),"\n",(0,c.jsxs)(r.blockquote,{children:["\n",(0,c.jsx)(r.p,{children:"package-lock.json \uD30C\uC77C\uB3C4 \uD568\uAED8 \uBCF5\uC0AC\uD574\uC57C \uCE90\uC2DC\uB97C \uC0AC\uC6A9\uD560 \uC218 \uC788\uB2E4."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-Dockerfile",children:'# \uBCC0\uC218 \uC120\uC5B8\r\nARG VERSION=lts-alpine\r\n\r\n# \uBCA0\uC774\uC2A4 \uC774\uBBF8\uC9C0\r\nFROM node:${VERSION}\r\n\r\n# \uC774\uBBF8\uC9C0\uC758 \uBA54\uD0C0\uB370\uC774\uD130\r\nLABEL description="Simple NodeJS Container"\r\n\r\n# \uC0AC\uC6A9\uC790 \uC9C0\uC815\r\nUSER node\r\n\r\n# \uBA85\uB839\uC744 \uC2E4\uD589\uD55C \uB2E4\uC74C \uADF8 \uACB0\uACFC\uB97C \uC774\uBBF8\uC9C0 \uB808\uC774\uC5B4\uC5D0 \uC800\uC7A5\uD558\uB294 \uAE30\uB2A5\r\nRUN echo \'Building...\' > /build.txt\r\n\r\n# -y \uC635\uC158\uC744 \uC0AC\uC6A9\uD574 \uBB34\uC870\uAC74 \uC124\uCE58\uAC00 \uB418\uB3C4\uB85D\r\nRUN apt update && apt install -y something\r\n\r\n# \uCEE8\uD14C\uC774\uB108\uC758 \uD658\uACBD\uBCC0\uC218 // ${TARGET}\uC73C\uB85C \uCC38\uC870\uD560 \uC218 \uC788\uC74C\r\nENV TARGET="blog.sixeyed.com"\r\nENV METHOD="HEAD"\r\nENV INTERVAL="3000"\r\n\r\n# \uC6CC\uD0B9 \uB514\uB809\uD1A0\uB9AC\uB97C \uC9C0\uC815 (cd \uBA85\uB839\uC5B4\uC640 \uB3D9\uC77C)\r\nWORKDIR /app\r\n\r\n# ./\uD604\uC7AC \uB514\uB809\uD1A0\uB9AC -> ./\uC11C\uBC84\uC758 \uB514\uB809\uD1A0\uB9AC\r\nCOPY ./ ./\r\n\r\n# COPY \uBA85\uB839\uACFC \uBE44\uC2B7\uD568, \uC555\uCD95 \uD30C\uC77C\uC774\uB098 \uB124\uD2B8\uC6CC\uD06C \uC0C1\uC758 \uD30C\uC77C\uC5D0\uB3C4 \uC0AC\uC6A9\uD560 \uC218 \uC788\uB2E4. (\uD2B9\uC218\uD55C \uACBD\uC6B0\uAC00 \uC544\uB2C8\uB77C\uBA74 COPY\uC0AC\uC6A9)\r\nADD app.js ./\r\n\r\n# "\uC774 \uC774\uBBF8\uC9C0\uB294 8080\uD3EC\uD2B8\uB97C \uC0AC\uC6A9\uD569\uB2C8\uB2E4" \uB77C\uACE0\uB9CC \uC54C\uB824\uC8FC\uB294 \uBB38\uC11C\uD654 \uC6A9\uB3C4\r\nEXPOSE 8080\r\n\r\n# volume\r\nVOLUME /data\r\n\r\n# \uCEE8\uD14C\uC774\uB108\uAC00 \uC2E4\uD589\uB420 \uB54C \uD56D\uC0C1 \uC2E4\uD589\uB418\uC57C \uD558\uB294 \uCEE4\uB9E8\uB4DC\uB97C \uC9C0\uC815 (\uD56D\uC0C1 \uC2E4\uD589)\r\nENTRYPOINT ["java", "-jar", "/app/*.jar"]\r\n\r\n# \uCEE8\uD14C\uC774\uB108\uAC00 \uC2E4\uD589\uB420 \uB54C \uAE30\uBCF8\uC801\uC73C\uB85C \uC2E4\uD589\uB418\uC57C \uD558\uB294 \uCEE4\uB9E8\uB4DC \uC9C0\uC815 (\uC0AC\uC6A9\uC790 \uD30C\uB77C\uBBF8\uD130 \uC785\uB825\uC5D0 \uB530\uB77C \uBCC0\uB3D9)\r\nCMD ["node", "/web-ping/app.js"]\r\nCMD sh -c "echo $TARGET && node /web-ping/app.js"\n'})}),"\n",(0,c.jsx)(r.h2,{id:"build",children:"build"}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-sh",children:"docker build -f <Dockerfile \uACBD\uB85C> -t <image \uC774\uB984> --target <stage target> <build context>\r\n# docker build -f Dockerfile.server -t hyuil/server:1.0 .\r\n# docker build -f Dockerfile.server -t hyuil/server:1.0 --target prod .\n"})}),"\n",(0,c.jsx)(r.h2,{id:"dockerfile-\uC555\uCD95",children:"Dockerfile \uC555\uCD95"}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-sh",children:"# \uC555\uCD95\uD558\uAE30\r\ndocker save -o [output tar\uD30C\uC77C] [image]\r\n# \uBD88\uB7EC\uC624\uAE30\r\ndocker load -i [input tar \uD30C\uC77C]\n"})})]})}function u(e={}){let{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,c.jsx)(r,{...e,children:(0,c.jsx)(d,{...e})}):d(e)}},255511:function(e,r,n){n.d(r,{R:()=>l,x:()=>t});var i=n(596363);let c={},o=i.createContext(c);function l(e){let r=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function t(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:l(e.components),i.createElement(o.Provider,{value:r},e.children)}}}]);