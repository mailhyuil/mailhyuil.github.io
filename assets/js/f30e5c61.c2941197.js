"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["37365"],{626845:function(r,e,n){n.r(e),n.d(e,{frontMatter:()=>l,toc:()=>d,default:()=>u,metadata:()=>o,assets:()=>i,contentTitle:()=>s});var o=JSON.parse('{"id":"angular/angular base ErrorHandler GlobalErrorHandler","title":"angular ErrorHandler GlobalErrorHandler","description":"Error \uC778\uC2A4\uD134\uC2A4\uB9CC \uC7A1\uB294\uB2E4.","source":"@site/docs/angular/angular base ErrorHandler GlobalErrorHandler.md","sourceDirName":"angular","slug":"/angular/angular base ErrorHandler GlobalErrorHandler","permalink":"/docs/angular/angular base ErrorHandler GlobalErrorHandler","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"angular architects module-federation","permalink":"/docs/angular/angular architects module-federation"},"next":{"title":"angular ErrorHandler HttpErrorHandler","permalink":"/docs/angular/angular base ErrorHandler HttpErrorHandler"}}'),a=n(447259),t=n(255511);let l={},s="angular ErrorHandler GlobalErrorHandler",i={},d=[{value:"global-error.handler.ts",id:"global-errorhandlerts",level:2},{value:"user-friendly.error.ts",id:"user-friendlyerrorts",level:2}];function c(r){let e={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,t.R)(),...r.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.header,{children:(0,a.jsx)(e.h1,{id:"angular-errorhandler-globalerrorhandler",children:"angular ErrorHandler GlobalErrorHandler"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"Error \uC778\uC2A4\uD134\uC2A4\uB9CC \uC7A1\uB294\uB2E4."}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsx)(e.p,{children:"HttpClient\uC5D0\uC11C \uBC1C\uC0DD\uD558\uB294 HttpErrorResponse\uB294 Error\uB97C \uC0C1\uC18D\uD558\uC9C0 \uC54A\uC544\uC11C \uC7A1\uC9C0\uC54A\uB294\uB2E4."}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(e.h2,{id:"global-errorhandlerts",children:"global-error.handler.ts"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-ts",children:'import { ErrorHandler, inject, Injectable, Injector } from "@angular/core";\r\nimport { type ModalService, type ToastService } from "@mailhyuil/ng-libs";\r\nimport { UserFriendlyError } from "./user-friendly.error";\r\n\r\n@Injectable({\r\n  providedIn: "root",\r\n})\r\nexport class FinalErrorHandler implements ErrorHandler {\r\n  injector = inject(Injector);\r\n  toastService?: ToastService;\r\n  modalService?: ModalService;\r\n\r\n  // zoneless \uC0AC\uC6A9 \uC2DC error catch\uAC00 \uC544\uC9C1 \uC9C0\uC6D0\uB418\uC9C0 \uC54A\uC74C\r\n  // \uC784\uC2DC\uB85C window event\uB85C \uB300\uCCB4\r\n  constructor() {\r\n    window.addEventListener("error", e => {\r\n      this.handleError(e.error);\r\n      e.preventDefault();\r\n    });\r\n    window.addEventListener("unhandledrejection", async e => {\r\n      this.handleError(e.reason);\r\n      e.preventDefault();\r\n    });\r\n  }\r\n\r\n  async handleError(error: Error): Promise<void> {\r\n    const { ToastService, ModalService, ModalComponent } = await import("@mailhyuil/ng-libs");\r\n    if (!this.toastService) this.toastService = this.injector.get(ToastService);\r\n    if (!this.modalService) this.modalService = this.injector.get(ModalService);\r\n    if (error instanceof UserFriendlyError) {\r\n      const message = error.message;\r\n      if (message.includes("\\n") || message.length > 25) {\r\n        this.modalService.create({\r\n          component: ModalComponent,\r\n          componentProps: {\r\n            title: "\u{1F6A8} \uC54C\uB9BC",\r\n            content: message,\r\n            format: "text",\r\n          },\r\n        });\r\n      } else {\r\n        this.toastService.openDanger(error.message);\r\n      }\r\n    }\r\n    console.error(error);\r\n  }\r\n}\n'})}),"\n",(0,a.jsx)(e.h2,{id:"user-friendlyerrorts",children:"user-friendly.error.ts"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-ts",children:"export class UserFriendlyError extends Error {\r\n  constructor(message: string) {\r\n    super(message);\r\n  }\r\n}\n"})})]})}function u(r={}){let{wrapper:e}={...(0,t.R)(),...r.components};return e?(0,a.jsx)(e,{...r,children:(0,a.jsx)(c,{...r})}):c(r)}},255511:function(r,e,n){n.d(e,{R:()=>l,x:()=>s});var o=n(596363);let a={},t=o.createContext(a);function l(r){let e=o.useContext(t);return o.useMemo(function(){return"function"==typeof r?r(e):{...e,...r}},[e,r])}function s(r){let e;return e=r.disableParentContext?"function"==typeof r.components?r.components(a):r.components||a:l(r.components),o.createElement(t.Provider,{value:e},r.children)}}}]);