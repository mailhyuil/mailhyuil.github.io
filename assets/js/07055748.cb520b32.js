"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[486037],{377714:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>c,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"nestjs/nest base decorator Public","title":"Public decorator","description":"public.decorator.ts","source":"@site/docs/nestjs/nest base decorator Public.md","sourceDirName":"nestjs","slug":"/nestjs/nest base decorator Public","permalink":"/docs/nestjs/nest base decorator Public","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"nestjs decorator OnError","permalink":"/docs/nestjs/nest base decorator OnError"},"next":{"title":"nest base decorator Reflector","permalink":"/docs/nestjs/nest base decorator Reflector"}}');var s=r(447259),o=r(529087);const c={},a="Public decorator",l={},d=[{value:"public.decorator.ts",id:"publicdecoratorts",level:2},{value:"controller",id:"controller",level:2},{value:"jwt-auth.guard.ts",id:"jwt-authguardts",level:2},{value:"app.module.ts",id:"appmodulets",level:2}];function i(e){const t={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"public-decorator",children:"Public decorator"})}),"\n",(0,s.jsx)(t.h2,{id:"publicdecoratorts",children:"public.decorator.ts"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:'import { SetMetadata } from "@nestjs/common";\r\n\r\nexport const IS_PUBLIC_KEY = "isPublic";\r\nexport const Public = () => SetMetadata(IS_PUBLIC_KEY, true);\n'})}),"\n",(0,s.jsx)(t.h2,{id:"controller",children:"controller"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"@Public()\r\n@Get()\r\nfindAll() {\r\n  return [];\r\n}\n"})}),"\n",(0,s.jsx)(t.h2,{id:"jwt-authguardts",children:"jwt-auth.guard.ts"}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsx)(t.p,{children:"guard\uc5d0\uc11c public metadata\uac00 \uc788\uc73c\uba74 pass"}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:'@Injectable()\r\nexport class JwtAuthGuard extends AuthGuard("jwt") {\r\n  constructor(private reflector: Reflector) {\r\n    super();\r\n  }\r\n\r\n  canActivate(context: ExecutionContext) {\r\n    const isPublic = this.reflector.getAllAndOverride<boolean>(IS_PUBLIC_KEY, [\r\n      context.getHandler(),\r\n      context.getClass(),\r\n    ]);\r\n    if (isPublic) {\r\n      return true;\r\n    }\r\n    return super.canActivate(context);\r\n  }\r\n}\n'})}),"\n",(0,s.jsx)(t.h2,{id:"appmodulets",children:"app.module.ts"}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsx)(t.p,{children:"guard\ub97c global\ub85c \uc0ac\uc6a9"}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"providers: [\r\n  {\r\n    provide: APP_GUARD,\r\n    useClass: JwtAuthGuard,\r\n  },\r\n],\n"})})]})}function u(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(i,{...e})}):i(e)}},529087:(e,t,r)=>{r.d(t,{R:()=>c,x:()=>a});var n=r(596363);const s={},o=n.createContext(s);function c(e){const t=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),n.createElement(o.Provider,{value:t},e.children)}}}]);