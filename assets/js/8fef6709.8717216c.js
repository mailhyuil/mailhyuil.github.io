"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[536856],{327461:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>i,default:()=>h,frontMatter:()=>c,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"protocol/L7 http headers \ubcf4\uc548 \uacf5\uaca9 CSRF","title":"http headers \ubcf4\uc548 CSRF","description":"CSRF\ub780 Cross-Site Request Forgery\uc758 \uc57d\uc790\ub85c, \uc0ac\uc6a9\uc790\uac00 \uc758\ub3c4\ud558\uc9c0 \uc54a\uc740 \uc694\uccad\uc744 \ubcf4\ub0b4\ub294 \uacf5\uaca9\uc744 \ub9d0\ud55c\ub2e4.","source":"@site/docs/protocol/L7 http headers \ubcf4\uc548 \uacf5\uaca9 CSRF.md","sourceDirName":"protocol","slug":"/protocol/L7 http headers \ubcf4\uc548 \uacf5\uaca9 CSRF","permalink":"/docs/protocol/L7 http headers \ubcf4\uc548 \uacf5\uaca9 CSRF","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"http headers \ubcf4\uc548 same-origin & same-site & cross-origin","permalink":"/docs/protocol/L7 http headers \ubcf4\uc548 same-origin & same-site & cross-origin"},"next":{"title":"http headers \ubcf4\uc548 XSS (Cross-Site Scripting)","permalink":"/docs/protocol/L7 http headers \ubcf4\uc548 \uacf5\uaca9 XSS"}}');var o=r(447259),s=r(529087);const c={},i="http headers \ubcf4\uc548 CSRF",a={},l=[{value:"\uc2dc\ub098\ub9ac\uc624",id:"\uc2dc\ub098\ub9ac\uc624",level:2},{value:"ajax\ub85c CSRF\uac00 \uc131\uacf5\ud558\ub294 \uacbd\uc6b0",id:"ajax\ub85c-csrf\uac00-\uc131\uacf5\ud558\ub294-\uacbd\uc6b0",level:2},{value:"\ubc29\uc9c0",id:"\ubc29\uc9c0",level:2}];function d(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"http-headers-\ubcf4\uc548-csrf",children:"http headers \ubcf4\uc548 CSRF"})}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsx)(n.p,{children:"CSRF\ub780 Cross-Site Request Forgery\uc758 \uc57d\uc790\ub85c, \uc0ac\uc6a9\uc790\uac00 \uc758\ub3c4\ud558\uc9c0 \uc54a\uc740 \uc694\uccad\uc744 \ubcf4\ub0b4\ub294 \uacf5\uaca9\uc744 \ub9d0\ud55c\ub2e4."}),"\n",(0,o.jsx)(n.p,{children:"XSS\uc640 \ub2ec\ub9ac \uc0ac\uc6a9\uc790\uac00 \ud604\uc7ac \ub4e4\uc5b4\uc640 \uc788\ub294 \ud398\uc774\uc9c0\uc758 \uc815\uc0c1\uc801\uc778 \uc138\uc158\uc744 \uc774\uc6a9\ud558\uc5ec \uacf5\uaca9\ud55c\ub2e4. (redirect, same-origin request \ub4f1)"}),"\n",(0,o.jsx)(n.p,{children:"\uc774\ub85c \uc778\ud574 \uc758\ub3c4\ud558\uc9c0 \uc54a\uc740 \ud074\ub77c\uc774\uc5b8\ud2b8 \ub610\ub294 \uc11c\ubc84 \ub370\uc774\ud130 \uc720\ucd9c, \uc138\uc158 \uc0c1\ud0dc \ubcc0\uacbd \ub610\ub294 \ucd5c\uc885 \uc0ac\uc6a9\uc790 \uacc4\uc815 \uc870\uc791\uc744 \ud3ec\ud568\ud560 \uc218 \uc788\ub294 \uc791\uc5c5\uc774 \uc6f9 \uc0ac\uc774\ud2b8\uc5d0\uc11c \uc218\ud589\ub420 \uc218 \uc788\ub2e4."}),"\n",(0,o.jsx)(n.p,{children:"e.g. \uc0ac\uc6a9\uc790\ub294 \uc740\ud589\uc5d0 \ub85c\uadf8\uc778 \ub418\uc5b4 \uc788\uace0, \uacf5\uaca9\uc790\uac00 \ub9cc\ub4e0 \ubaa8\ubc29 \ud398\uc774\uc9c0\uc5d0 \ubc29\ubb38\ud558\uac8c\ud558\uc5ec \uc740\ud589\uc5d0 \ub3c8\uc744 \uc774\uccb4\ud558\ub294 \uc694\uccad\uc744 \ubcf4\ub0b4\ub294 \uac83"}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsx)(n.p,{children:"\ubc29\uc9c0 \ubc29\ubc95: \uc11c\ubc84\uc5d0\uc11c Referer, Origin, X-CSRF-Token \ud5e4\ub354\ub97c \uac80\uc99d\ud55c\ub2e4."}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsx)(n.p,{children:"X-CSRF-Token\uc740 Custom Header\uc774\ub2e4 \ub2e4\ub978 \uc774\ub984\uc73c\ub85c \uc0ac\uc6a9 \uac00\ub2a5"}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsx)(n.p,{children:"Cookie \uc0ac\uc6a9 \uc2dc SameSite \uc18d\uc131\uc744 Strict, Lax\ub85c \uc124\uc815\ud55c\ub2e4."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"\uc2dc\ub098\ub9ac\uc624",children:"\uc2dc\ub098\ub9ac\uc624"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-txt",children:'1. \uc0ac\uc6a9\uc790\uac00 bank.com(\uc740\ud589 \uc0ac\uc774\ud2b8)\uc5d0\uc11c \ub85c\uadf8\uc778 \uc778\uc99d \uc815\ubcf4\ub97c \ub2f4\uc740 \ucfe0\ud0a4\uac00 SameSite=Lax\ub610\ub294 None\uc73c\ub85c \uc124\uc815\ub418\uc5b4 \uc788\ub294 \uc0c1\ud0dc\r\n\r\n2. \uacf5\uaca9\uc790\uac00 bank.com \ud398\uc774\uc9c0 \ub0b4\uc5d0\uc11c \uc774\uba54\uc77c, \ub9c1\ud06c, \uad11\uace0, \ub313\uae00 \ub4f1\uc744 \uc774\uc6a9 evil.com(\uc545\uc758\uc801\uc778 \uc0ac\uc774\ud2b8)\ub85c \uc694\uccad\uc744 \ubcf4\ub0b4\uac8c \ud55c\ub2e4.\r\n\r\n3. evil.com Get\uc694\uccad\uc744 \uc0ac\uc6a9\ud574\uc11c \uc0ac\uc6a9\uc790\ub97c bank.com\ub85c \ub9ac\ub2e4\uc774\ub809\ud2b8 \uc2dc\ucf1c \ub3c8\uc744 \uc774\uccb4\ud558\ub294 \uc694\uccad\uc744 \ubcf4\ub0b4\uac8c \ud55c\ub2e4.\r\n   (form\uc744 \uc774\uc6a9\ud558\uc5ec \uc694\uccad\uc744 \ubcf4\ub0bc \uc218 \uc788\ub2e4.)\r\n   (ajax\ub85c\ub294 \uac70\uc758 \ubd88\uac00\ub2a5\ud558\ub2e4. \uc774\uc720\ub294 SOP \uc815\ucc45 \ub54c\ubb38)\r\n\r\ne.g. (in evil.com)\r\n\r\n\x3c!-- Get \uc694\uccad\uc73c\ub85c \uc774\uccb4\uac00 \uac00\ub2a5\ud55c \uacbd\uc6b0 --\x3e\r\n<img src="https://bank.com/transfer?to=hacker&amount=10000">\r\n\r\n\x3c!-- or --\x3e\r\n\r\n\x3c!-- Post \uc694\uccad\uc73c\ub85c \uc774\uccb4\uac00 \uac00\ub2a5\ud55c \uacbd\uc6b0 --\x3e\r\n\x3c!-- \uc811\uc18d\ud55c \ud398\uc774\uc9c0 evil.com\uc5d0\uc11c action\uc744 bank.com\ub85c \uc124\uc815\ud558\uc5ec redirect\ub97c \uc2dc\ud0a4\uba74 bank.com\uc758 \ucfe0\ud0a4\ub97c \ud3ec\ud568\ud574\uc11c \uc804\uc1a1\ud55c\ub2e4. --\x3e\r\n<form action="https://bank.com/transfer" method="POST">\r\n    <input type="hidden" name="to" value="hacker">\r\n    <input type="hidden" name="amount" value="10000">\r\n</form>\r\n<script>\r\n    document.forms[0].submit();  \x3c!-- \uc790\ub3d9\uc73c\ub85c \uc804\uc1a1\ub428 --\x3e\r\n<\/script>\r\n\r\n4. \ube0c\ub77c\uc6b0\uc800\uac00 bank.com\uc5d0 \ucfe0\ud0a4\ub97c \uc790\ub3d9\uc73c\ub85c \uc804\uc1a1\r\n\r\n5. CSRF \uacf5\uaca9 \uc131\uacf5\n'})}),"\n",(0,o.jsx)(n.h2,{id:"ajax\ub85c-csrf\uac00-\uc131\uacf5\ud558\ub294-\uacbd\uc6b0",children:"ajax\ub85c CSRF\uac00 \uc131\uacf5\ud558\ub294 \uacbd\uc6b0"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-txt",children:"CORS\uac00 Access-Control-Allow-Origin: * + Access-Control-Allow-Credentials: true \ub85c \uc124\uc815\ub41c \uacbd\uc6b0\r\n\r\nPreflight \uc694\uccad \uc5c6\uc774 \ub2e8\uc21c \uc694\uccad(Simple Request)\uc73c\ub85c \uc694\uccad\ud560 \uacbd\uc6b0\r\n- Method: GET, HEAD, POST \uc911 \ud558\ub098\ub85c \uc124\uc815\r\n- Content-Type\uc774 application/x-www-form-urlencoded, multipart/form-data, text/plain \uc911 \ud558\ub098\ub85c \uc124\uc815\r\n- \uc694\uccad \ud5e4\ub354\uc5d0 \ucee4\uc2a4\ud140 \ud5e4\ub354\uac00 \uc5c6\ub294 \uacbd\uc6b0\r\n- XMLHttpRequest\uc758 \uacbd\uc6b0 XMLHttpRequest.withCredentials = true;\n"})}),"\n",(0,o.jsx)(n.h2,{id:"\ubc29\uc9c0",children:"\ubc29\uc9c0"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-txt",children:"1. Origin \ud5e4\ub354 \uac80\uc99d\r\n2. Referrer \ud5e4\ub354 \uac80\uc99d\r\n3. X-CSRF-Token \ud5e4\ub354 \uac80\uc99d\r\n4. SameSite Cookie \uc18d\uc131 \uc124\uc815 (Strict, Lax)\r\n5. CORS \uc124\uc815\n"})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},529087:(e,n,r)=>{r.d(n,{R:()=>c,x:()=>i});var t=r(596363);const o={},s=t.createContext(o);function c(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:c(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);