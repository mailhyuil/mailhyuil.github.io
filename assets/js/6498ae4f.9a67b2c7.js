"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["805351"],{53586:function(r,e,n){n.r(e),n.d(e,{frontMatter:()=>s,toc:()=>d,default:()=>u,metadata:()=>a,assets:()=>i,contentTitle:()=>l});var a=JSON.parse('{"id":"angular/angular error handling","title":"angular error handling","description":"error-massage.ts","source":"@site/docs/angular/angular error handling.md","sourceDirName":"angular","slug":"/angular/angular error handling","permalink":"/docs/angular/angular error handling","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"angular environment","permalink":"/docs/angular/angular environment"},"next":{"title":"angular error \uB124\uBE44\uAC8C\uC774\uC158 \uD6C4 \uD074\uB9AD\uD574\uC57C \uBDF0\uAC00 \uBCC0\uACBD\uB418\uB294 \uD604\uC0C1","permalink":"/docs/angular/angular error \uB124\uBE44\uAC8C\uC774\uC158 \uD6C4 \uD074\uB9AD\uD574\uC57C \uBDF0\uAC00 \uC5C5\uB370\uC774\uD2B8\uB418\uB294 \uD604\uC0C1"}}'),t=n(447259),o=n(255511);let s={},l="angular error handling",i={},d=[{value:"error-massage.ts",id:"error-massagets",level:2},{value:"user-friendly.error.ts",id:"user-friendlyerrorts",level:2},{value:"http-error-handler.ts",id:"http-error-handlerts",level:2},{value:"global-error-handler.ts",id:"global-error-handlerts",level:2},{value:"api-interceptor.ts",id:"api-interceptorts",level:2},{value:"app.config.ts",id:"appconfigts",level:2}];function c(r){let e={code:"code",h1:"h1",h2:"h2",header:"header",pre:"pre",...(0,o.R)(),...r.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"angular-error-handling",children:"angular error handling"})}),"\n",(0,t.jsx)(e.h2,{id:"error-massagets",children:"error-massage.ts"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-ts",children:'export const ErrorMessage: Record<number, string> = {\r\n  1001: "\uC720\uC800\uC758 \uC815\uBCF4\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC5B4\uC694 \u{1F622}",\r\n  1002: "\uC774\uBBF8 \uC874\uC7AC\uD558\uB294 \uC720\uC800\uC5D0\uC694 \u{1F622}",\r\n};\n'})}),"\n",(0,t.jsx)(e.h2,{id:"user-friendlyerrorts",children:"user-friendly.error.ts"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-ts",children:"export class UserFriendlyError extends Error {\r\n  constructor(message: string) {\r\n    super(message);\r\n  }\r\n}\n"})}),"\n",(0,t.jsx)(e.h2,{id:"http-error-handlerts",children:"http-error-handler.ts"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-ts",children:'import { HttpErrorResponse } from "@angular/common/http";\r\nimport { Injectable, inject } from "@angular/core";\r\nimport { Router } from "@angular/router";\r\nimport { ErrorMessage } from "./error-message";\r\nimport { UserFriendlyError } from "./user-friendly.error";\r\n\r\n@Injectable({\r\n  providedIn: "root",\r\n})\r\nexport class HttpErrorHandler {\r\n  router = inject(Router);\r\n  handleError(httpError: HttpErrorResponse) {\r\n    const status: number = httpError.status;\r\n    const error: any = httpError.error;\r\n    if (status === 401) {\r\n      this.handleUnauthorized();\r\n    }\r\n    if (status === 498) {\r\n      this.handleInvalidToken();\r\n    }\r\n    throw new UserFriendlyError(ErrorMessage[error.code]);\r\n  }\r\n\r\n  private async handleInvalidToken() {\r\n    // auth\uB97C clear\r\n    // refresh token\uC73C\uB85C access token\uC744 \uC694\uCCAD\r\n    // access token\uC744 \uC774\uC6A9\uD574 me\uB97C \uC694\uCCAD\r\n    // me\uB97C \uBC1B\uC544\uC11C auth store\uC5D0 \uC800\uC7A5\r\n    // \uC2E4\uD328\uD558\uBA74 login \uD398\uC774\uC9C0\uB85C \uC774\uB3D9\r\n    return;\r\n  }\r\n\r\n  private async handleUnauthorized(): Promise<void> {\r\n    // auth\uB97C clear\r\n    // login \uD398\uC774\uC9C0\uB85C \uC774\uB3D9\r\n    return;\r\n  }\r\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"global-error-handlerts",children:"global-error-handler.ts"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-ts",children:'import { ErrorHandler, Injectable } from "@angular/core";\r\nimport { UserFriendlyError } from "./user-friendly.error";\r\n\r\n@Injectable({\r\n  providedIn: "root",\r\n})\r\nexport class GlobalErrorHandler implements ErrorHandler {\r\n  handleError(error: any): void {\r\n    if (error instanceof UserFriendlyError) {\r\n      alert(error.message);\r\n    }\r\n  }\r\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"api-interceptorts",children:"api-interceptor.ts"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-ts",children:"return next(apiReq).pipe(\r\n  catchError(error => {\r\n    if (error instanceof HttpErrorResponse) {\r\n      httpErrorHandler.handleError(error);\r\n    }\r\n    throw error;\r\n  }),\r\n);\n"})}),"\n",(0,t.jsx)(e.h2,{id:"appconfigts",children:"app.config.ts"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-ts",children:"{\r\n  provide: ErrorHandler,\r\n  useClass: GlobalErrorHandler,\r\n},\n"})})]})}function u(r={}){let{wrapper:e}={...(0,o.R)(),...r.components};return e?(0,t.jsx)(e,{...r,children:(0,t.jsx)(c,{...r})}):c(r)}},255511:function(r,e,n){n.d(e,{R:()=>s,x:()=>l});var a=n(596363);let t={},o=a.createContext(t);function s(r){let e=a.useContext(o);return a.useMemo(function(){return"function"==typeof r?r(e):{...e,...r}},[e,r])}function l(r){let e;return e=r.disableParentContext?"function"==typeof r.components?r.components(t):r.components||t:s(r.components),a.createElement(o.Provider,{value:e},r.children)}}}]);