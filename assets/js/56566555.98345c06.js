"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[39570],{94772:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>l,contentTitle:()=>t,default:()=>i,frontMatter:()=>s,metadata:()=>a,toc:()=>m});const a=JSON.parse('{"id":"x design pattern/Behavioral command bus","title":"command bus","description":"command\ub97c handler\uc5d0\uac8c \uc804\ub2ec\ud558\ub294 \uc5ed\ud560\uc744 \ud558\ub294 \uac1d\uccb4\ub97c \uc815\uc758\ud558\uc5ec","source":"@site/docs/x design pattern/Behavioral command bus.md","sourceDirName":"x design pattern","slug":"/x design pattern/Behavioral command bus","permalink":"/docs/x design pattern/Behavioral command bus","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"chain of responsibility (\ucc45\uc784 \uc5f0\uc1c4 \ud328\ud134)","permalink":"/docs/x design pattern/Behavioral Chain of Responsibility - CoR"},"next":{"title":"design pattern Command Pattern With Receiver","permalink":"/docs/x design pattern/Behavioral command with receiver"}}');var o=r(447259),d=r(529087);const s={},t="command bus",l={},m=[{value:"command",id:"command",level:2},{value:"handler",id:"handler",level:2},{value:"command bus",id:"command-bus-1",level:2}];function c(n){const e={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,d.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"command-bus",children:"command bus"})}),"\n",(0,o.jsxs)(e.blockquote,{children:["\n",(0,o.jsx)(e.p,{children:"command\ub97c handler\uc5d0\uac8c \uc804\ub2ec\ud558\ub294 \uc5ed\ud560\uc744 \ud558\ub294 \uac1d\uccb4\ub97c \uc815\uc758\ud558\uc5ec"}),"\n",(0,o.jsxs)(e.blockquote,{children:["\n",(0,o.jsx)(e.p,{children:"command\ub97c \uc815\uc758\uc640 \uc2e4\ud589\uc744 \ubd84\ub9ac\ud558\ub294 \ud328\ud134"}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"command",children:"command"}),"\n",(0,o.jsxs)(e.blockquote,{children:["\n",(0,o.jsx)(e.p,{children:"\uc791\uc5c5\uc744 \uc815\uc758\ud55c \uac1d\uccb4"}),"\n"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-ts",children:"export class KillDragonCommand {\r\n  constructor(public readonly heroId: string, public readonly dragonId: string) {}\r\n}\n"})}),"\n",(0,o.jsx)(e.h2,{id:"handler",children:"handler"}),"\n",(0,o.jsxs)(e.blockquote,{children:["\n",(0,o.jsx)(e.p,{children:"command\ub97c \ucc98\ub9ac\ud558\ub294 \uac1d\uccb4"}),"\n"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-ts",children:"@CommandHandler(KillDragonCommand)\r\nexport class KillDragonHandler implements ICommandHandler<KillDragonCommand> {\r\n  constructor(private repository: HeroRepository) {}\r\n\r\n  async execute(command: KillDragonCommand) {\r\n    const { heroId, dragonId } = command;\r\n    const hero = this.repository.findOneById(+heroId);\r\n\r\n    hero.killEnemy(dragonId);\r\n    await this.repository.persist(hero);\r\n  }\r\n}\n"})}),"\n",(0,o.jsx)(e.h2,{id:"command-bus-1",children:"command bus"}),"\n",(0,o.jsxs)(e.blockquote,{children:["\n",(0,o.jsx)(e.p,{children:"command\ub97c handler\uc5d0\uac8c \uc804\ub2ec\ud558\ub294 \uac1d\uccb4"}),"\n"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-ts",children:'class SimpleCommandBus {\r\n    private Map<Class<?>, CommandHandler<?>> handlers = new HashMap<>();\r\n\r\n    public <C> void registerHandler(Class<C> commandType, CommandHandler<C> handler) {\r\n        handlers.put(commandType, handler);\r\n    }\r\n\r\n    public void dispatch(Object command) {\r\n        CommandHandler handler = handlers.get(command.getClass());\r\n        if (handler != null) {\r\n            handler.handle(command);\r\n        } else {\r\n            throw new IllegalArgumentException("No handler found for " + command.getClass());\r\n        }\r\n    }\r\n}\r\n\r\nclass CommandBus {\r\n    private handlers = new Map<string, ICommandHandler<CommandBase>>();\r\n    execute(command: Command) {\r\n    const commandId = this.getCommandId(command);\r\n    const handler = this.handlers.get(commandId);\r\n    if (!handler) {\r\n      const commandName = this.getCommandName(command);\r\n      throw new CommandHandlerNotFoundException(commandName);\r\n    }\r\n    this._publisher.publish(command);\r\n    return handler.execute(command);\r\n  }\r\n}\n'})})]})}function i(n={}){const{wrapper:e}={...(0,d.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(c,{...n})}):c(n)}},529087:(n,e,r)=>{r.d(e,{R:()=>s,x:()=>t});var a=r(596363);const o={},d=a.createContext(o);function s(n){const e=a.useContext(d);return a.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:s(n.components),a.createElement(d.Provider,{value:e},n.children)}}}]);