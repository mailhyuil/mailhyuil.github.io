"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["640504"],{786284:function(e,n,s){s.r(n),s.d(n,{frontMatter:()=>o,toc:()=>d,default:()=>h,metadata:()=>t,assets:()=>l,contentTitle:()=>i});var t=JSON.parse('{"id":"nestjs/nest auth jwt scenario","title":"nest jwt scenario","description":"jwt\uC758 \uD575\uC2EC\uC740 \uC0C1\uD0DC\uB97C \uD074\uB77C\uC774\uC5B8\uD2B8\uAC00 \uAC00\uC9C0\uACE0 \uC788\uB2E4\uB294 \uAC83\uC774\uB2E4.","source":"@site/docs/nestjs/nest auth jwt scenario.md","sourceDirName":"nestjs","slug":"/nestjs/nest auth jwt scenario","permalink":"/docs/nestjs/nest auth jwt scenario","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"nestjs jwt refresh token rotation","permalink":"/docs/nestjs/nest auth jwt refresh-token rotation"},"next":{"title":"nestjs jwt","permalink":"/docs/nestjs/nest auth jwt \uC778\uC99D \uB85C\uC9C1"}}'),r=s(447259),c=s(255511);let o={},i="nest jwt scenario",l={},d=[{value:"Token \uD0C8\uCDE8 \uAC10\uC9C0",id:"token-\uD0C8\uCDE8-\uAC10\uC9C0",level:2}];function a(e){let n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"nest-jwt-scenario",children:"nest jwt scenario"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"jwt\uC758 \uD575\uC2EC\uC740 \uC0C1\uD0DC\uB97C \uD074\uB77C\uC774\uC5B8\uD2B8\uAC00 \uAC00\uC9C0\uACE0 \uC788\uB2E4\uB294 \uAC83\uC774\uB2E4."}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"database\uC5D0\uC11C \uC720\uC800\uC758 \uC815\uBCF4\uB97C \uAC00\uC838\uC624\uC9C0 \uC54A\uC544\uB3C4 \uB418\uAE30 \uB54C\uBB38\uC5D0 (session \uBC29\uC2DD) \uC11C\uBC84\uC758 \uBD80\uD558\uB97C \uC904\uC77C \uC218 \uC788\uB2E4."}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"\uB530\uB77C\uC11C user\uC758 \uC815\uBCF4\uB294 \uB370\uC774\uD130\uBCA0\uC774\uC2A4\uC5D0\uC11C \uC870\uD68C\uD558\uC9C0\uB9D0\uACE0 verify\uB41C payload\uC5D0\uC11C \uAC00\uC838\uC640\uC57C\uD55C\uB2E4."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\uC0AC\uC6A9\uC790 \uB85C\uADF8\uC778"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"accessToken \uBC1C\uAE09 (accessToken\uB0B4\uC5D0\uB294 \uBE44\uC988\uB2C8\uC2A4\uB85C\uC9C1\uC5D0 \uD544\uC694\uD55C user\uC758 \uC815\uBCF4\uB97C \uD3EC\uD568)"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"\uC720\uD6A8\uAE30\uAC04 15-30\uBD84"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"httpOnly cookie\uB85C \uC804\uB2EC"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"refreshToken \uBC1C\uAE09 \uBC0F user\uC758 database(postgres or redis)\uC5D0 \uC800\uC7A5"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"\uC720\uD6A8\uAE30\uAC04 30\uC77C"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"user db\uC5D0 \uC800\uC7A5"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"\uC720\uD6A8\uAE30\uAC04\uC774 \uC9C0\uB0AC\uAC70\uB098 db\uC5D0 \uC874\uC7AC\uD558\uC9C0 \uC54A\uC73C\uBA74 \uC720\uD6A8\uD558\uC9C0 \uC54A\uC740 refreshToken\uC73C\uB85C \uD310\uB2E8"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"httpOnly cookie\uB85C \uC804\uB2EC"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"login \uC720\uBB34\uB97C \uD655\uC778\uD560 loggedIn status \uAC12\uC744 \uC77C\uBC18 \uCFE0\uD0A4\uB85C \uC804\uB2EC"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"accessToken \uB9CC\uB8CC \uC2DC \uC11C\uBC84\uB294 InvalidTokenException\uC744 \uBCF4\uB0B4\uACE0 client\uB294 refresh api\uB97C \uD1B5\uD574 \uC0C8 accessToken \uBC1C\uAE09"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"logout \uC2DC \uD074\uB77C\uC774\uC5B8\uD2B8\uC5D0\uC11C loggedIn \uCFE0\uD0A4 \uC0AD\uC81C, \uC11C\uBC84\uC5D0\uC11C accessToken & refreshToken \uC0AD\uC81C"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"refreshToken \uB9CC\uB8CC \uC2DC \uC7AC\uBC1C\uAE09 \uC694\uCCAD (\uC7AC\uB85C\uADF8\uC778)"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"accessToken \uD0C8\uCDE8 \uC758\uC2EC \uC2DC accessToken\uC744 blacklist\uC5D0 \uCD94\uAC00\uD558\uACE0 access-token.guard\uC5D0\uC11C \uAC80\uC99D"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"refreshToken \uD0C8\uCDE8 \uC758\uC2EC \uC2DC user\uC758 database\uC5D0\uC11C refreshToken \uC0AD\uC81C or blacklist\uC5D0 \uCD94\uAC00"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"token-\uD0C8\uCDE8-\uAC10\uC9C0",children:"Token \uD0C8\uCDE8 \uAC10\uC9C0"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-txt",children:"1. \uC11C\uB85C \uB2E4\uB978 ip, user-agent, device\uC5D0\uC11C \uAC19\uC740 accessToken \uC0AC\uC6A9 \uC2DC\r\n(\uBE0C\uB77C\uC6B0\uC800 \uC5C5\uB370\uC774\uD2B8 \uB610\uB294 \uB124\uD2B8\uC6CC\uD06C \uD658\uACBD (wife..) \uBCC0\uACBD \uC2DC \uB85C\uADF8\uC544\uC6C3 \uB418\uC5B4\uBC84\uB9B4 \uC218 \uC788\uC74C)\r\n\r\n2. rate limiting \uAC10\uC9C0 \uC2DC (Custom ThrottlingGuard\uC5D0\uC11C \uCC98\uB9AC)\n"})})]})}function h(e={}){let{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},255511:function(e,n,s){s.d(n,{R:()=>o,x:()=>i});var t=s(596363);let r={},c=t.createContext(r);function o(e){let n=t.useContext(c);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(c.Provider,{value:n},e.children)}}}]);