"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["249902"],{905560:function(e,t,n){n.r(t),n.d(t,{frontMatter:()=>s,toc:()=>c,default:()=>u,metadata:()=>r,assets:()=>l,contentTitle:()=>i});var r=JSON.parse('{"id":"angular/angular SSR cache TransferState & withHttpTransferCacheOptions","title":"angular SSR data caching","description":"\uC11C\uBC84\uC5D0\uC11C external api\uC5D0 \uC694\uCCAD\uD55C \uB370\uC774\uD130\uB97C \uD074\uB77C\uC774\uC5B8\uD2B8\uC5D0\uC11C \uB2E4\uC2DC \uC694\uCCAD\uD558\uC9C0 \uC54A\uB3C4\uB85D \uD558\uAE30 \uC704\uD574 \uCE90\uC2F1","source":"@site/docs/angular/angular SSR cache TransferState & withHttpTransferCacheOptions.md","sourceDirName":"angular","slug":"/angular/angular SSR cache TransferState & withHttpTransferCacheOptions","permalink":"/docs/angular/angular SSR cache TransferState & withHttpTransferCacheOptions","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"angular SSR Server Route","permalink":"/docs/angular/angular SSR Server Route"},"next":{"title":"angular ssr cookie httpOnly","permalink":"/docs/angular/angular SSR cookie httpOnly"}}'),a=n(447259),o=n(255511);let s={},i="angular SSR data caching",l={},c=[{value:"\uC0C8\uB85C\uC6B4 \uB370\uC774\uD130\uB97C \uBC1B\uC544\uC624\uB294 \uBC29\uBC95",id:"\uC0C8\uB85C\uC6B4-\uB370\uC774\uD130\uB97C-\uBC1B\uC544\uC624\uB294-\uBC29\uBC95",level:2}];function p(e){let t={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"angular-ssr-data-caching",children:"angular SSR data caching"})}),"\n",(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsx)(t.p,{children:"\uC11C\uBC84\uC5D0\uC11C external api\uC5D0 \uC694\uCCAD\uD55C \uB370\uC774\uD130\uB97C \uD074\uB77C\uC774\uC5B8\uD2B8\uC5D0\uC11C \uB2E4\uC2DC \uC694\uCCAD\uD558\uC9C0 \uC54A\uB3C4\uB85D \uD558\uAE30 \uC704\uD574 \uCE90\uC2F1"}),"\n",(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsx)(t.p,{children:"TransferHttpCacheModule\uB294 http interceptor\uB85C\uC11C get\uACFC head \uC694\uCCAD\uC744 \uAC00\uB85C\uCC44\uC11C \uCE90\uC2F1\uD55C\uB2E4."}),"\n",(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsx)(t.p,{children:"includePostRequests\uB97C true\uB85C \uD558\uBA74 post \uBA54\uC18C\uB4DC\uB3C4 \uCE90\uC2F1\uD55C\uB2E4 \uC774\uB294 \uD398\uC774\uC9C0\uC5D0 \uB4E4\uC5B4\uAC08 \uB54C \uC790\uB3D9\uC73C\uB85C post\uB97C \uC3D8\uB294 \uD398\uC774\uC9C0\uC5D0\uC11C \uC0AC\uC6A9\uB41C\uB2E4"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:'import { CommonModule, isPlatformServer } from "@angular/common";\r\nimport { HttpClient } from "@angular/common/http";\r\nimport { Component, OnInit, PLATFORM_ID, TransferState, inject, makeStateKey } from "@angular/core";\r\nimport { ActivatedRoute } from "@angular/router";\r\n\r\nconst key = makeStateKey<string>("home");\r\n\r\n@Component({\r\n  selector: "ssr-home",\r\n  templateUrl: "./home.component.html",\r\n  styleUrls: ["./home.component.scss"],\r\n  standalone: true,\r\n  imports: [CommonModule],\r\n})\r\nexport default class HomeComponent implements OnInit {\r\n  httpClient = inject(HttpClient);\r\n  route = inject(ActivatedRoute);\r\n  platformId = inject(PLATFORM_ID);\r\n  transferState = inject(TransferState);\r\n  data: any;\r\n  ngOnInit(): void {\r\n    if (this.transferState.hasKey(key)) {\r\n      // \uC11C\uBC84\uC5D0\uC11C \uBC1B\uC544\uC628 \uB370\uC774\uD130\uAC00 \uC874\uC7AC\uD558\uBA74 \uB370\uC774\uD130\uB97C \uC0AC\uC6A9\uD55C\uB2E4.\r\n      this.data = this.transferState.get(key, null);\r\n    } else {\r\n      // \uB370\uC774\uD130\uAC00 \uC5C6\uB2E4\uBA74 \uB370\uC774\uD130\uB97C \uC11C\uBC84\uC5D0\uC11C \uBC1B\uC544\uC628\uB2E4.\r\n      if (isPlatformServer(this.platformId)) {\r\n        this.httpClient.get(`https://jsonplaceholder.typicode.com/posts/${this.route.snapshot.params["id"]}`).subscribe((data) => {\r\n          this.transferState.set(key, data);\r\n          this.data = data;\r\n        });\r\n      }\r\n    }\r\n  }\r\n}\n'})}),"\n",(0,a.jsx)(t.h2,{id:"\uC0C8\uB85C\uC6B4-\uB370\uC774\uD130\uB97C-\uBC1B\uC544\uC624\uB294-\uBC29\uBC95",children:"\uC0C8\uB85C\uC6B4 \uB370\uC774\uD130\uB97C \uBC1B\uC544\uC624\uB294 \uBC29\uBC95"}),"\n",(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsx)(t.p,{children:"\uC704\uC758 \uCF54\uB4DC\uB97C \uB0B4\uBD80\uC801\uC73C\uB85C \uC54C\uC544\uC11C \uCC98\uB9AC\uD574\uC90C"}),"\n"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:"export const appConfig: ApplicationConfig = {\r\n  providers: [\r\n    provideClientHydration(\r\n      withHttpTransferCacheOptions({\r\n        includePostRequests: true,\r\n      })\r\n    ),\r\n  ],\r\n};\n"})})]})}function u(e={}){let{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(p,{...e})}):p(e)}},255511:function(e,t,n){n.d(t,{R:()=>s,x:()=>i});var r=n(596363);let a={},o=r.createContext(a);function s(e){let t=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),r.createElement(o.Provider,{value:t},e.children)}}}]);