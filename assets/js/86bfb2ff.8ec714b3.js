"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["710038"],{301180:function(n,e,r){r.r(e),r.d(e,{frontMatter:()=>a,toc:()=>l,default:()=>p,metadata:()=>i,assets:()=>s,contentTitle:()=>c});var i=JSON.parse('{"id":"spring/spring AOP","title":"AOP","description":"Aspected Oriented Programming \uAD00\uC810 \uC9C0\uD5A5 \uD504\uB85C\uADF8\uB798\uBC0D","source":"@site/docs/spring/spring AOP.md","sourceDirName":"spring","slug":"/spring/spring AOP","permalink":"/docs/spring/spring AOP","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Spring basic","permalink":"/docs/spring/Spring basic"},"next":{"title":"ActiveMQ","permalink":"/docs/spring/spring ActiveMQ"}}'),t=r(447259),o=r(255511);let a={},c="AOP",s={},l=[{value:"\uC6A9\uC5B4",id:"\uC6A9\uC5B4",level:2},{value:"JoinPoint : \uCF54\uB4DC\uAC00 \uB4E4\uC5B4\uAC08 \uC704\uCE58",id:"joinpoint--\uCF54\uB4DC\uAC00-\uB4E4\uC5B4\uAC08-\uC704\uCE58",level:3},{value:"Pointcut : \uD2B9\uC815 Joinpoint\uB97C \uACE8\uB77C\uB0B4\uB294 \uCF54\uB4DC\uB97C \uB2F4\uC740 \uC624\uBE0C\uC81D\uD2B8 // \uBA54\uC18C\uB4DC \uC120\uC815 \uC54C\uACE0\uB9AC\uC998\uC744 \uB2F4\uC740 \uC624\uBE0C\uC81D\uD2B8",id:"pointcut--\uD2B9\uC815-joinpoint\uB97C-\uACE8\uB77C\uB0B4\uB294-\uCF54\uB4DC\uB97C-\uB2F4\uC740-\uC624\uBE0C\uC81D\uD2B8--\uBA54\uC18C\uB4DC-\uC120\uC815-\uC54C\uACE0\uB9AC\uC998\uC744-\uB2F4\uC740-\uC624\uBE0C\uC81D\uD2B8",level:3},{value:"Advice : \uAC01 Joinpoint\uC5D0 \uC0BD\uC785\uB418\uC5B4 \uB3D9\uC791\uD560 \uCF54\uB4DC\uB97C \uB2F4\uC740 \uC624\uBE0C\uC81D\uD2B8",id:"advice--\uAC01-joinpoint\uC5D0-\uC0BD\uC785\uB418\uC5B4-\uB3D9\uC791\uD560-\uCF54\uB4DC\uB97C-\uB2F4\uC740-\uC624\uBE0C\uC81D\uD2B8",level:3},{value:"Adviser : Pointcut + Advice // \uC5B4\uB4DC\uBC14\uC774\uC2A4\uC640 \uD3EC\uC778\uD2B8\uCEF7\uC744 \uBB36\uC740 \uC624\uBE0C\uC81D\uD2B8",id:"adviser--pointcut--advice--\uC5B4\uB4DC\uBC14\uC774\uC2A4\uC640-\uD3EC\uC778\uD2B8\uCEF7\uC744-\uBB36\uC740-\uC624\uBE0C\uC81D\uD2B8",level:3},{value:"Weaving : Pointcut\uC5D0 \uC758\uD574\uC11C \uACB0\uC815\uB41C Joinpoint\uC5D0 \uC9C0\uC815\uB41C Advice \uB97C \uC0BD\uC785\uD558\uB294 \uACFC\uC815",id:"weaving--pointcut\uC5D0-\uC758\uD574\uC11C-\uACB0\uC815\uB41C-joinpoint\uC5D0-\uC9C0\uC815\uB41C-advice-\uB97C-\uC0BD\uC785\uD558\uB294-\uACFC\uC815",level:3},{value:"\uB3D9\uC791\uC6D0\uB9AC",id:"\uB3D9\uC791\uC6D0\uB9AC",level:2},{value:"\uB2E4\uC774\uB0B4\uBBF9 \uD504\uB85D\uC2DC",id:"\uB2E4\uC774\uB0B4\uBBF9-\uD504\uB85D\uC2DC",level:2}];function d(n){let e={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,o.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"aop",children:"AOP"})}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"Aspected Oriented Programming \uAD00\uC810 \uC9C0\uD5A5 \uD504\uB85C\uADF8\uB798\uBC0D"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"\uBD80\uAC00\uAE30\uB2A5\uC744 \uBD84\uB9AC"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"\uBE44\uC988\uB2C8\uC2A4 \uB17C\uB9AC\uC5D0 \uC9D1\uC911\uD560 \uC218 \uC788\uB3C4\uB85D \uB2E4\uB978 \uCF54\uB4DC\uB97C \uBD84\uB9AC\uD558\uB294 \uAC83"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"\uD504\uB85D\uC2DC \uD328\uD134, \uB370\uCF54\uB808\uC774\uD130 \uD328\uD134 \uC0AC\uC6A9"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"\uC6A9\uC5B4",children:"\uC6A9\uC5B4"}),"\n",(0,t.jsx)(e.h3,{id:"joinpoint--\uCF54\uB4DC\uAC00-\uB4E4\uC5B4\uAC08-\uC704\uCE58",children:"JoinPoint : \uCF54\uB4DC\uAC00 \uB4E4\uC5B4\uAC08 \uC704\uCE58"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"\uBA54\uC18C\uB4DC\uAC00 \uD638\uCD9C\uB418\uB294 \uBD80\uBD84 \uB610\uB294 \uB9AC\uD134\uB418\uB294 \uBD80\uBD84"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"\uC778\uC2A4\uD134\uC2A4\uAC00 \uB9CC\uB4E4\uC5B4\uC9C0\uB294 \uC9C0\uC810"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"\uC608\uC678\uAC00 \uB358\uC838\uC9C0\uB294 \uC9C0\uC810"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"\uD074\uB798\uC2A4\uAC00 \uCD08\uAE30\uD654 \uB418\uB294 \uACF3(\uBCC4\uB3C4\uC758 init\uBA54\uC18C\uB4DC\uAC00 \uD638\uCD9C\uB420\uB54C)"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"pointcut--\uD2B9\uC815-joinpoint\uB97C-\uACE8\uB77C\uB0B4\uB294-\uCF54\uB4DC\uB97C-\uB2F4\uC740-\uC624\uBE0C\uC81D\uD2B8--\uBA54\uC18C\uB4DC-\uC120\uC815-\uC54C\uACE0\uB9AC\uC998\uC744-\uB2F4\uC740-\uC624\uBE0C\uC81D\uD2B8",children:"Pointcut : \uD2B9\uC815 Joinpoint\uB97C \uACE8\uB77C\uB0B4\uB294 \uCF54\uB4DC\uB97C \uB2F4\uC740 \uC624\uBE0C\uC81D\uD2B8 // \uBA54\uC18C\uB4DC \uC120\uC815 \uC54C\uACE0\uB9AC\uC998\uC744 \uB2F4\uC740 \uC624\uBE0C\uC81D\uD2B8"}),"\n",(0,t.jsx)(e.h3,{id:"advice--\uAC01-joinpoint\uC5D0-\uC0BD\uC785\uB418\uC5B4-\uB3D9\uC791\uD560-\uCF54\uB4DC\uB97C-\uB2F4\uC740-\uC624\uBE0C\uC81D\uD2B8",children:"Advice : \uAC01 Joinpoint\uC5D0 \uC0BD\uC785\uB418\uC5B4 \uB3D9\uC791\uD560 \uCF54\uB4DC\uB97C \uB2F4\uC740 \uC624\uBE0C\uC81D\uD2B8"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-txt",children:"1. Before Advice : Joinpoint \uC804\uC5D0 \uC2E4\uD589\r\n2. Around Advice : Joinpoint \uC55E\uACFC \uB4A4\uC5D0\uC11C \uC2E4\uD589\r\n3. After Returning Advice : Joinpoint \uBA54\uC18C\uB4DC\uAC00 \uB9AC\uD134\uB420\uC2DC \uC2E4\uD589. Return\uB41C object\uC5D0 \uC811\uADFC\uAC00\uB2A5\r\n4. After Advice : Joinpoint\uD6C4\uC5D0 \uBB34\uC870\uAC74 \uC2E4\uD589\uB428(\uC608\uC678\uBC1C\uC0DD\uC2DC\uC5D0\uB3C4 \uC2E4\uD589. finally\uC640 \uC720\uC0AC\uD568.)\r\n5. After Throwing Advice : Jointpoint \uBA54\uC18C\uB4DC \uC2E4\uD589\uC911 \uC608\uC678\uBC1C\uC0DD\uC2DC \uC2E4\uD589\n"})}),"\n",(0,t.jsx)(e.h3,{id:"adviser--pointcut--advice--\uC5B4\uB4DC\uBC14\uC774\uC2A4\uC640-\uD3EC\uC778\uD2B8\uCEF7\uC744-\uBB36\uC740-\uC624\uBE0C\uC81D\uD2B8",children:"Adviser : Pointcut + Advice // \uC5B4\uB4DC\uBC14\uC774\uC2A4\uC640 \uD3EC\uC778\uD2B8\uCEF7\uC744 \uBB36\uC740 \uC624\uBE0C\uC81D\uD2B8"}),"\n",(0,t.jsx)(e.h3,{id:"weaving--pointcut\uC5D0-\uC758\uD574\uC11C-\uACB0\uC815\uB41C-joinpoint\uC5D0-\uC9C0\uC815\uB41C-advice-\uB97C-\uC0BD\uC785\uD558\uB294-\uACFC\uC815",children:"Weaving : Pointcut\uC5D0 \uC758\uD574\uC11C \uACB0\uC815\uB41C Joinpoint\uC5D0 \uC9C0\uC815\uB41C Advice \uB97C \uC0BD\uC785\uD558\uB294 \uACFC\uC815"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-txt",children:"1. \uCEF4\uD30C\uC77C\uC2DC\uC5D0 Weaving\uD558\uAE30\r\n2. \uD074\uB798\uC2A4 \uB85C\uB529 \uC2DC\uC5D0 Weaving\uD558\uAE30\r\n3. \uB7F0\uD0C0\uC784\uC2DC\uC5D0 Weaving\uD558\uAE30\n"})}),"\n",(0,t.jsx)(e.h2,{id:"\uB3D9\uC791\uC6D0\uB9AC",children:"\uB3D9\uC791\uC6D0\uB9AC"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"UserService -> UserServiceTx -> UserServiceImpl"}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-java",children:"@Service\r\npublic class UserServiceTx implements UserService{ // \uD504\uB85D\uC2DC \uAC1D\uCCB4\r\n    UserService userService; // <- UserServiceImpl \uC8FC\uC785\r\n    PlatformTransactionManager transactionManager;\r\n\r\n    public void doAOP(){\r\n        //transaction logic\r\n\r\n        /* business logic */\r\n\r\n        //transaction logic\r\n    }\r\n}\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-java",children:"@Controller\r\npublic class Controller{\r\n    UserService userService; // <- UserServiceTx \uD504\uB85D\uC2DC \uAC1D\uCCB4 \uC8FC\uC785\r\n}\n"})}),"\n",(0,t.jsx)(e.h2,{id:"\uB2E4\uC774\uB0B4\uBBF9-\uD504\uB85D\uC2DC",children:"\uB2E4\uC774\uB0B4\uBBF9 \uD504\uB85D\uC2DC"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"API\uB97C \uC774\uC6A9\uD574 \uD504\uB85D\uC2DC\uCC98\uB7FC \uB3D9\uC791\uD558\uB294 \uC624\uBE0C\uC81D\uD2B8\uB97C \uB2E4\uC774\uB0B4\uBBF9\uD558\uAC8C \uC0DD\uC131\uD558\uB294 \uAC83"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"InvocationHandler \uC778\uD130\uD398\uC774\uC2A4 or FactoryBean \uAD6C\uD604\uD558\uC5EC \uC0AC\uC6A9"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-java",children:'public class TransactionHandler implements InvocationHandler {\r\n  private Object target;\r\n  private PlatformTransactionManager platformTransactionManager;\r\n  private String pattern;\r\n\r\n  /*\r\n  \uC694\uCCAD\uC744 \uC704\uC784\uD560 \uD0C0\uAE43\uC744 DI\uB85C \uC81C\uACF5 \uBC1B\uB3C4\uB85D \uD568.\r\n  \uC5B4\uB5A0\uD55C \uD0C0\uAE43 \uC624\uBE0C\uC81D\uD2B8 \uC5D0\uB3C4 \uC801\uC6A9 \uD560 \uC218 \uC788\uB2E4.\r\n   */\r\n  public void setTarget(Object target) {\r\n    this.target = target;\r\n  }\r\n\r\n  public void setPlatformTransactionManager(PlatformTransactionManager platformTransactionManager) {\r\n    this.platformTransactionManager = platformTransactionManager;\r\n  }\r\n\r\n  /*\r\n  \uBAA8\uB4E0 \uBA54\uC18C\uB4DC\uC5D0 \uC801\uC6A9\uB418\uC9C0 \uC54A\uB3C4\uB85D \uD328\uD134\uC744 DI \uBC1B\uB294\uB2E4.\r\n  "get" \uC73C\uB85C \uC8FC\uBA74 get\uC73C\uB85C \uC2DC\uC791\uD558\uB294 \uBAA8\uB4E0 \uBA54\uC18C\uB4DC\uC5D0 \uD2B8\uB79C\uC7AD\uC158 \uC801\uC6A9\r\n   */\r\n  public void setPattern(String pattern) {\r\n    this.pattern = pattern;\r\n  }\r\n\r\n  @Override\r\n  public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\r\n    if (method.getName().startsWith(pattern)) { // \uD328\uD134\uC5D0 \uB9DE\uB294 \uBA54\uC18C\uB4DC \uC778\uC9C0 \uD655\uC778\r\n      return invokeInTransaction(method, args); // \uD328\uD134\uACFC \uC77C\uCE58\uD558\uBA74 \uD638\uCD9C\r\n    } else {\r\n      return method.invoke(target, args); // \uC544\uB2C8\uB77C\uBA74 \uBD80\uAC00\uAE30\uB2A5 \uC5C6\uC774 \uD638\uCD9C\r\n    }\r\n  }\r\n\r\n  private Object invokeInTransaction(Method method, Object[] args) throws Throwable {\r\n    TransactionStatus status = this.platformTransactionManager.getTransaction(new DefaultTransactionDefinition());\r\n    try {\r\n      Object ret = method.invoke(target, args);\r\n      this.platformTransactionManager.commit(status);\r\n      return ret;\r\n    } catch (InvocationTargetException e) {\r\n      this.platformTransactionManager.rollback(status);\r\n      throw e.getTargetException();\r\n    }\r\n  }\r\n}\n'})})]})}function p(n={}){let{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}},255511:function(n,e,r){r.d(e,{R:()=>a,x:()=>c});var i=r(596363);let t={},o=i.createContext(t);function a(n){let e=i.useContext(o);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:a(n.components),i.createElement(o.Provider,{value:e},n.children)}}}]);