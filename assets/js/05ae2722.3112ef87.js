"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["33930"],{337867:function(e,r,n){n.r(r),n.d(r,{frontMatter:()=>d,toc:()=>l,default:()=>p,metadata:()=>i,assets:()=>o,contentTitle:()=>t});var i=JSON.parse('{"id":"db-prisma/prisma migrate","title":"prisma migrate","description":"\uD504\uB85C\uD1A0\uD0C0\uC774\uD551 \uD560 \uB54C\uB294 \uBE60\uB974\uAC8C db push\uB97C \uD558\uACE0","source":"@site/docs/db-prisma/prisma migrate.md","sourceDirName":"db-prisma","slug":"/db-prisma/prisma migrate","permalink":"/docs/db-prisma/prisma migrate","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"prisma migrate flow","permalink":"/docs/db-prisma/prisma migrate workflow \uC21C\uC11C"},"next":{"title":"prisma \uB9C8\uC774\uADF8\uB808\uC774\uC158 \uD30C\uC77C","permalink":"/docs/db-prisma/prisma migration \uD30C\uC77C \uC218\uC815"}}'),s=n(447259),a=n(255511);let d={},t="prisma migrate",o={},l=[{value:"dev / deploy",id:"dev--deploy",level:2},{value:"diff",id:"diff",level:2},{value:"resolve",id:"resolve",level:2}];function c(e){let r={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"prisma-migrate",children:"prisma migrate"})}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"\uD504\uB85C\uD1A0\uD0C0\uC774\uD551 \uD560 \uB54C\uB294 \uBE60\uB974\uAC8C db push\uB97C \uD558\uACE0"}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"\uC2E4\uC11C\uBC84 \uBC30\uD3EC \uC804\uB2E8\uACC4\uC5D0\uC11C migrate dev\uB85C \uB9C8\uC774\uADF8\uB808\uC774\uC158 \uD30C\uC77C \uC0DD\uC131"}),"\n",(0,s.jsx)(r.p,{children:"\uC0DD\uC131\uB41C migration \uD30C\uC77C\uC744 ci/cd\uC5D0\uC11C migrate deploy"}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"\uC774\uD6C4\uB85C\uB294 \uACC4\uC18D migration dev\uB85C \uAC1C\uBC1C"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"dev--deploy",children:"dev / deploy"}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"dev\uB294 \uC2A4\uD0A4\uB9C8 \uBCC0\uACBD\uC744 \uAC10\uC9C0\uD574 \uB9C8\uC774\uADF8\uB808\uC774\uC158 \uD30C\uC77C\uC744 \uC0DD\uC131\uD558\uACE0 \uB370\uC774\uD130\uBCA0\uC774\uC2A4\uC5D0 \uC801\uC6A9\uD55C\uB2E4."}),"\n",(0,s.jsx)(r.p,{children:"dev\uB294 shadow database\uB97C \uC0AC\uC6A9\uD55C\uB2E4."}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"deploy\uB294 \uB9C8\uC774\uADF8\uB808\uC774\uC158 \uD30C\uC77C\uC744 \uC77D\uC5B4\uC11C \uB370\uC774\uD130\uBCA0\uC774\uC2A4\uC5D0 \uC801\uC6A9\uD55C\uB2E4."}),"\n",(0,s.jsx)(r.p,{children:"deploy\uB294 \uB85C\uCEEC\uC5D0\uC11C \uC2E4\uD589\uD558\uB294\uAC8C \uC544\uB2C8\uB77C ci/cd \uD30C\uC774\uD504\uB77C\uC778\uC5D0\uC11C \uC2E4\uD589\uB418\uC5B4\uC57C\uD55C\uB2E4."}),"\n",(0,s.jsx)(r.p,{children:'deploy\uB294 "development \uB370\uC774\uD130\uBCA0\uC774\uC2A4"\uB97C "production \uB370\uC774\uD130\uBCA0\uC774\uC2A4"\uC640 sync \uD558\uB294 \uAC83'}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"local\uC5D0\uC11C dev\uB97C \uC0AC\uC6A9\uD558\uACE0, ci/cd\uC5D0\uC11C deploy\uB97C \uC0AC\uC6A9\uD574 \uB9C8\uC774\uADF8\uB808\uC774\uC158 \uD30C\uC77C\uC744 \uC801\uC6A9\uD558\uC790"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sh",children:"prisma migrate dev --schema ./prisma\r\nprisma migrate deploy\n"})}),"\n",(0,s.jsx)(r.h2,{id:"diff",children:"diff"}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"\uBCC0\uACBD"}),"\n"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sh",children:"npx dotenv -e apps/server/.env.production -- \\\r\nnpx prisma migrate diff \\\r\n--from-migrations prisma/migrations \\\r\n--to-schema-datasource prisma/schema.prisma \\\r\n--shadow-database-url postgres://username:password*@59.3.87.92:5432/my-shadow-db?schema=public \\\r\n--script prisma/migrations/init/migration.sql\n"})}),"\n",(0,s.jsx)(r.h2,{id:"resolve",children:"resolve"}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"\uC2E4\uD328\uD55C \uB9C8\uC774\uADF8\uB808\uC774\uC158 \uD30C\uC77C\uC744 marking \uD558\uB294 \uAE30\uB2A5"}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"\uC774\uC804 migration\uC73C\uB85C rollback \uD558\uB294 \uAE30\uB2A5"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-sh",children:"dotenv -e apps/server/.env.production -- \\\r\nnpx prisma migrate resolve --applied init_migration\n"})})]})}function p(e={}){let{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},255511:function(e,r,n){n.d(r,{R:()=>d,x:()=>t});var i=n(596363);let s={},a=i.createContext(s);function d(e){let r=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function t(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),i.createElement(a.Provider,{value:r},e.children)}}}]);