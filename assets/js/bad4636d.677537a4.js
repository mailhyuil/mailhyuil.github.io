"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["259740"],{170763:function(e,r,s){s.r(r),s.d(r,{frontMatter:()=>o,toc:()=>d,default:()=>i,metadata:()=>n,assets:()=>c,contentTitle:()=>p});var n=JSON.parse('{"id":"db-postgres/postgres backup pg_basebackup","title":"postgres WAL \uC544\uCE74\uC774\uBE0C pg_basebackup","description":"pg_basebackup\uC740 \uBB3C\uB9AC\uC801 \uBC31\uC5C5 \uBC29\uBC95\uC73C\uB85C \uC2E4\uC81C \uB514\uC2A4\uD06C\uC758 \uB370\uC774\uD130 \uD30C\uC77C\uC744 \uBCF5\uC0AC\uD558\uC5EC \uBC31\uC5C5\uD558\uB294 \uBC29\uBC95\uC774\uB2E4.","source":"@site/docs/db-postgres/postgres backup pg_basebackup.md","sourceDirName":"db-postgres","slug":"/db-postgres/postgres backup pg_basebackup","permalink":"/docs/db-postgres/postgres backup pg_basebackup","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"docker postgresql script backup and upload s3","permalink":"/docs/db-postgres/postgres backup docker"},"next":{"title":"postgres pg_dump & pg_dumpall","permalink":"/docs/db-postgres/postgres backup pg_dump & pg_dumpall"}}'),t=s(447259),a=s(255511);let o={},p="postgres WAL \uC544\uCE74\uC774\uBE0C pg_basebackup",c={},d=[{value:"docker",id:"docker",level:2}];function l(e){let r={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.header,{children:(0,t.jsx)(r.h1,{id:"postgres-wal-\uC544\uCE74\uC774\uBE0C-pg_basebackup",children:"postgres WAL \uC544\uCE74\uC774\uBE0C pg_basebackup"})}),"\n",(0,t.jsxs)(r.blockquote,{children:["\n",(0,t.jsx)(r.p,{children:"pg_basebackup\uC740 \uBB3C\uB9AC\uC801 \uBC31\uC5C5 \uBC29\uBC95\uC73C\uB85C \uC2E4\uC81C \uB514\uC2A4\uD06C\uC758 \uB370\uC774\uD130 \uD30C\uC77C\uC744 \uBCF5\uC0AC\uD558\uC5EC \uBC31\uC5C5\uD558\uB294 \uBC29\uBC95\uC774\uB2E4."}),"\n",(0,t.jsx)(r.p,{children:"pg_basebackup\uC744 \uC2E4\uD589\uD558\uBA74 \uC2E4\uC81C \uB370\uC774\uD130 \uBE14\uB85D, WAL \uB85C\uADF8, \uD14C\uC774\uBE14 \uD30C\uC77C \uB4F1 \uD30C\uC77C \uB808\uBCA8 \uBCF5\uC0AC\uB97C \uC218\uD589\uD55C\uB2E4."}),"\n",(0,t.jsxs)(r.blockquote,{children:["\n",(0,t.jsx)(r.p,{children:"\uD074\uB7EC\uC2A4\uD130 \uB2E8\uC704\uB85C \uBC31\uC5C5"}),"\n",(0,t.jsxs)(r.blockquote,{children:["\n",(0,t.jsx)(r.p,{children:"\uB370\uC774\uD130 \uB514\uB809\uD1A0\uB9AC, \uD14C\uC774\uBE14 \uC2A4\uD398\uC774\uC2A4 \uB4F1 \uBAA8\uB4E0 \uD30C\uC77C\uC744 \uBC31\uC5C5\uD55C\uB2E4."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-sh",children:'-U # \uC720\uC800\r\n-h # \uD638\uC2A4\uD2B8\r\n-p # \uD3EC\uD2B8\r\n\r\n-X # WAL \uC804\uC1A1\uBC29\uBC95 /// none, stream, fetch\r\n\r\n--pgdata / -D # Standby DB \uC0C1\uC758 \uB370\uC774\uD130 \uC800\uC7A5 \uC704\uCE58 \uB514\uB809\uD1A0\uB9AC\r\n--checkpoint=fast / -c=fast # \uBE60\uB978 \uCCB4\uD06C\uD3EC\uC778\uD2B8 \uC218\uD589\r\n\r\n--slot # Replication Slot \uC124\uC815.\r\n# \uAE30\uBCF8\uC801\uC73C\uB85C WAL\uC740 Primary\uC5D0\uC11C \uB354 \uC774\uC0C1 \uC0AC\uC6A9\uB418\uC9C0 \uC54A\uAC8C \uB418\uBA74 \uC7AC\uC0AC\uC6A9\uB428.\r\n# \uADF8\uB7EC\uB098 Standby\uAC00 Primary\uC758 WAL\uC744 \uC544\uC9C1 \uBC18\uC601\uD558\uC9C0 \uC54A\uC740 \uC0C1\uD0DC\uC5D0\uC11C \uC7AC\uC0AC\uC6A9 \uB418\uAC8C \uB418\uBA74 \uB370\uC774\uD130\uC758 \uC720\uC2E4\uC774 \uBC1C\uC0DD\uD558\uAC8C \uB428.\r\n# Replication Slot\uC740 Standby\uC5D0 WAL\uC774 \uBC18\uC601\uB41C \uC774\uD6C4\uC5D0\uB9CC Primary WAL\uC744 \uC7AC\uD65C\uC6A9\uD560 \uC218 \uC788\uB3C4\uB85D \uD558\uB294 \uC5ED\uD560\uC744 \uD558\uACE0,\r\n# "--slot=some_name" \uB294 Replication Slot\uC774 \uC5C6\uC73C\uBA74 Standby\uAC00 \uC2E4\uD328\uD558\uB3C4\uB85D \uD558\uB294 \uC124\uC815\r\n\r\n-R # \uBCF5\uC81C\uB97C \uC704\uD55C Standby DB \uC124\uC815\uC744 \uC790\uB3D9\uC73C\uB85C \uC218\uD589\r\n\r\n\r\npg_basebackup -D /mnt/server/backupdir -c fast -X none\n'})}),"\n",(0,t.jsx)(r.h2,{id:"docker",children:"docker"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-sh",children:"docker exec -it postgres bash -c '\r\n  export PGPASSWORD=\"password\"\r\n  pg_basebackup \\\r\n    -h localhost \\\r\n    -U postgres \\\r\n    -D /var/lib/postgresql/basebackup_dir/$(date +%Y%m%d_%H%M%S) \\\r\n    -Ft -z -X fetch -P'\n"})})]})}function i(e={}){let{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},255511:function(e,r,s){s.d(r,{R:()=>o,x:()=>p});var n=s(596363);let t={},a=n.createContext(t);function o(e){let r=n.useContext(a);return n.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function p(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),n.createElement(a.Provider,{value:r},e.children)}}}]);