"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[851317],{529087:(n,e,r)=>{r.d(e,{R:()=>s,x:()=>c});var o=r(596363);const t={},i=o.createContext(t);function s(n){const e=o.useContext(i);return o.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:s(n.components),o.createElement(i.Provider,{value:e},n.children)}},603676:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>a,contentTitle:()=>c,default:()=>p,frontMatter:()=>s,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"nx/nx env","title":"nx env","description":".env.local, .env.development, .env.production \ub85c \ub098\ub204\uae30","source":"@site/docs/nx/nx env.md","sourceDirName":"nx","slug":"/nx/nx env","permalink":"/docs/nx/nx env","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"nx electron","permalink":"/docs/nx/nx electron"},"next":{"title":"nx error Module not found: Error: Can\'t resolve","permalink":"/docs/nx/nx error Module not found"}}');var t=r(447259),i=r(529087);const s={},c="nx env",a={},l=[{value:"project.json",id:"projectjson",level:2},{value:".env.local",id:"envlocal",level:2},{value:"webpack",id:"webpack",level:2},{value:"webpack.config.js",id:"webpackconfigjs",level:3}];function d(n){const e={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,i.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"nx-env",children:"nx env"})}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:".env.local, .env.development, .env.production \ub85c \ub098\ub204\uae30"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"projectjson",children:"project.json"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'# build\r\n# local \ucd94\uac00\r\n"configurations": {\r\n  "production": {\r\n    "budgets": [\r\n      {\r\n        "type": "initial",\r\n        "maximumWarning": "500kb",\r\n        "maximumError": "3mb"\r\n      },\r\n      {\r\n        "type": "anyComponentStyle",\r\n        "maximumWarning": "2kb",\r\n        "maximumError": "4kb"\r\n      }\r\n    ],\r\n    "outputHashing": "all"\r\n  },\r\n  "development": {\r\n    "buildOptimizer": false,\r\n    "optimization": false,\r\n    "vendorChunk": true,\r\n    "extractLicenses": false,\r\n    "sourceMap": true,\r\n    "namedChunks": true\r\n  },\r\n  "local": {\r\n    "buildOptimizer": false,\r\n    "optimization": false,\r\n    "vendorChunk": true,\r\n    "extractLicenses": false,\r\n    "sourceMap": true,\r\n    "namedChunks": true\r\n  }\r\n},\r\n\r\n# serve\r\n# local \ucd94\uac00\r\n"configurations": {\r\n  "production": {\r\n    "browserTarget": "donghang-client:build:production"\r\n  },\r\n  "development": {\r\n    "browserTarget": "donghang-client:build:development"\r\n  },\r\n  "local": {\r\n    "browserTarget": "donghang-client:build:local"\r\n  }\r\n},\n'})}),"\n",(0,t.jsx)(e.h2,{id:"envlocal",children:".env.local"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sh",children:'SERVER_PORT=3000\r\n\r\n# CLIENT\r\nNX_API_ENDPOINT=http://localhost:3000/api/v1\r\nNX_IMAGE_SERVER_URL=https://image.lepisode.team/api/upload.php\r\nNX_FILE_SERVER_URL=https://files.lepisode.team\r\nNX_FILE_SERVER_TOKEN=73532F8CBC421AD7B7EE43A2DE1C7\r\nNX_DISCORD_URL=https://discord.com/api/webhooks/1042266869769441341/GKK0-TI8jlw1k9aZ-G6pZHN4gddCigwmmzk-1hUyBXd0fCgbyB-MI2kdz8u-XO4hmo5A\r\n\r\nDATABASE_URL="postgresql://postgres:password@59.3.87.92:5432/wings-v2?schema=public"\r\n\r\n# JWT KEY\r\nJWT_SECRET_KEY=5BTENutJCTpGO2aHfDDs2u0KKKKpKV8s\r\nJWT_PUBLIC_KEY=Xv26XN6L86kGOvHMS2rfV2k9HsLVEEEp\r\nJWT_PRIVATE_KEY=PAwXjs5j7eLj8WIeczIRgZN2TdJqi2Bn\r\n\r\n# ADMIN\r\nADMIN_USERNAME=admin\r\nADMIN_REALNAME=admin\r\nADMIN_PASSWORD=admin\r\nADMIN_PHONE=01011111111\r\nADMIN_ROLE=MASTER\n'})}),"\n",(0,t.jsx)(e.h2,{id:"webpack",children:"webpack"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"client\uc5d0\uc11c webpack \uc0ac\uc6a9 \uc2dc NX_ prefix \ubd99\uc774\uae30"}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"webpackconfigjs",children:"webpack.config.js"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-js",children:'const webpack = require("webpack");\r\n\r\nfunction getClientEnvironment() {\r\n  // Grab NX_* environment variables and prepare them to be injected\r\n  // into the application via DefinePlugin in webpack configuration.\r\n  const NX_APP = /^NX_/i;\r\n\r\n  const raw = Object.keys(process.env)\r\n    .filter(key => NX_APP.test(key))\r\n    .reduce((env, key) => {\r\n      env[key] = process.env[key];\r\n      return env;\r\n    }, {});\r\n\r\n  // Stringify all values so we can feed into webpack DefinePlugin\r\n  return {\r\n    "process.env": Object.keys(raw).reduce((env, key) => {\r\n      env[key] = JSON.stringify(raw[key]);\r\n      return env;\r\n    }, {}),\r\n  };\r\n}\r\n\r\nmodule.exports = (config, options, context) => {\r\n  // Overwrite the mode set by Angular if the NODE_ENV is set\r\n  config.mode = config.mode;\r\n  config.plugins.push(new webpack.DefinePlugin(getClientEnvironment()));\r\n  config.resolve.fallback = {\r\n    util: false,\r\n    stream: false,\r\n  };\r\n  return config;\r\n};\n'})})]})}function p(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}}}]);