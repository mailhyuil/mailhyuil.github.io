"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[509463],{529087:(e,r,n)=>{n.d(r,{R:()=>l,x:()=>t});var o=n(596363);const c={},i=o.createContext(c);function l(e){const r=o.useContext(i);return o.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function t(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:l(e.components),o.createElement(i.Provider,{value:r},e.children)}},812394:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>s,contentTitle:()=>t,default:()=>u,frontMatter:()=>l,metadata:()=>o,toc:()=>a});const o=JSON.parse('{"id":"docker/Dockerfile basic","title":"Dockerfile basic","description":"Dockerfile basic","source":"@site/docs/docker/Dockerfile basic.md","sourceDirName":"docker","slug":"/docker/Dockerfile basic","permalink":"/docs/docker/Dockerfile basic","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Dockerfile angular SSR universal","permalink":"/docs/docker/Dockerfile angular SSR universal"},"next":{"title":"Dockerfile nginx","permalink":"/docs/docker/Dockerfile nginx"}}');var c=n(447259),i=n(529087);const l={},t=void 0,s={},a=[{value:"Dockerfile basic",id:"dockerfile-basic",level:2},{value:"build",id:"build",level:2},{value:"Dockerfile \uc555\ucd95",id:"dockerfile-\uc555\ucd95",level:2}];function d(e){const r={blockquote:"blockquote",code:"code",h2:"h2",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(r.h2,{id:"dockerfile-basic",children:"Dockerfile basic"}),"\n",(0,c.jsxs)(r.blockquote,{children:["\n",(0,c.jsx)(r.p,{children:"image\ub97c \uc0dd\uc131\ud558\uae30 \uc704\ud55c \uc2a4\ud06c\ub9bd\ud2b8\ud30c\uc77c"}),"\n",(0,c.jsxs)(r.blockquote,{children:["\n",(0,c.jsx)(r.p,{children:"Docker\ub294 Dockerfile\uc5d0 \ub098\uc5f4\ub41c \uba85\ub839\ubb38\uc744 \ucc28\ub840\ub300\ub85c \uc218\ud589"}),"\n",(0,c.jsxs)(r.blockquote,{children:["\n",(0,c.jsx)(r.p,{children:"package-lock.json \ud30c\uc77c\ub3c4 \ud568\uaed8 \ubcf5\uc0ac\ud574\uc57c \uce90\uc2dc\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-Dockerfile",children:'# \ubcc0\uc218 \uc120\uc5b8\r\nARG VERSION=lts-alpine\r\n\r\n# \ubca0\uc774\uc2a4 \uc774\ubbf8\uc9c0\r\nFROM node:${VERSION}\r\n\r\n# \uc774\ubbf8\uc9c0\uc758 \uba54\ud0c0\ub370\uc774\ud130\r\nLABEL description="Simple NodeJS Container"\r\n\r\n# \uc0ac\uc6a9\uc790 \uc9c0\uc815\r\nUSER node\r\n\r\n# \uba85\ub839\uc744 \uc2e4\ud589\ud55c \ub2e4\uc74c \uadf8 \uacb0\uacfc\ub97c \uc774\ubbf8\uc9c0 \ub808\uc774\uc5b4\uc5d0 \uc800\uc7a5\ud558\ub294 \uae30\ub2a5\r\nRUN echo \'Building...\' > /build.txt\r\n\r\n# -y \uc635\uc158\uc744 \uc0ac\uc6a9\ud574 \ubb34\uc870\uac74 \uc124\uce58\uac00 \ub418\ub3c4\ub85d\r\nRUN apt update && apt install -y something\r\n\r\n# \ucee8\ud14c\uc774\ub108\uc758 \ud658\uacbd\ubcc0\uc218 // ${TARGET}\uc73c\ub85c \ucc38\uc870\ud560 \uc218 \uc788\uc74c\r\nENV TARGET="blog.sixeyed.com"\r\nENV METHOD="HEAD"\r\nENV INTERVAL="3000"\r\n\r\n# \uc6cc\ud0b9 \ub514\ub809\ud1a0\ub9ac\ub97c \uc9c0\uc815 (cd \uba85\ub839\uc5b4\uc640 \ub3d9\uc77c)\r\nWORKDIR /app\r\n\r\n# ./\ud604\uc7ac \ub514\ub809\ud1a0\ub9ac -> ./\uc11c\ubc84\uc758 \ub514\ub809\ud1a0\ub9ac\r\nCOPY ./ ./\r\n\r\n# COPY \uba85\ub839\uacfc \ube44\uc2b7\ud568, \uc555\ucd95 \ud30c\uc77c\uc774\ub098 \ub124\ud2b8\uc6cc\ud06c \uc0c1\uc758 \ud30c\uc77c\uc5d0\ub3c4 \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4. (\ud2b9\uc218\ud55c \uacbd\uc6b0\uac00 \uc544\ub2c8\ub77c\uba74 COPY\uc0ac\uc6a9)\r\nADD app.js ./\r\n\r\n# "\uc774 \uc774\ubbf8\uc9c0\ub294 8080\ud3ec\ud2b8\ub97c \uc0ac\uc6a9\ud569\ub2c8\ub2e4" \ub77c\uace0\ub9cc \uc54c\ub824\uc8fc\ub294 \ubb38\uc11c\ud654 \uc6a9\ub3c4\r\nEXPOSE 8080\r\n\r\n# volume\r\nVOLUME /data\r\n\r\n# \ucee8\ud14c\uc774\ub108\uac00 \uc2e4\ud589\ub420 \ub54c \ud56d\uc0c1 \uc2e4\ud589\ub418\uc57c \ud558\ub294 \ucee4\ub9e8\ub4dc\ub97c \uc9c0\uc815 (\ud56d\uc0c1 \uc2e4\ud589)\r\nENTRYPOINT ["java", "-jar", "/app/*.jar"]\r\n\r\n# \ucee8\ud14c\uc774\ub108\uac00 \uc2e4\ud589\ub420 \ub54c \uae30\ubcf8\uc801\uc73c\ub85c \uc2e4\ud589\ub418\uc57c \ud558\ub294 \ucee4\ub9e8\ub4dc \uc9c0\uc815 (\uc0ac\uc6a9\uc790 \ud30c\ub77c\ubbf8\ud130 \uc785\ub825\uc5d0 \ub530\ub77c \ubcc0\ub3d9)\r\nCMD ["node", "/web-ping/app.js"]\r\nCMD sh -c "echo $TARGET && node /web-ping/app.js"\n'})}),"\n",(0,c.jsx)(r.h2,{id:"build",children:"build"}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-sh",children:"docker build -f <Dockerfile \uacbd\ub85c> -t <image \uc774\ub984> --target <stage target> <build context>\r\n# docker build -f Dockerfile.server -t hyuil/server:1.0 .\r\n# docker build -f Dockerfile.server -t hyuil/server:1.0 --target prod .\n"})}),"\n",(0,c.jsx)(r.h2,{id:"dockerfile-\uc555\ucd95",children:"Dockerfile \uc555\ucd95"}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-sh",children:"# \uc555\ucd95\ud558\uae30\r\ndocker save -o [output tar\ud30c\uc77c] [image]\r\n# \ubd88\ub7ec\uc624\uae30\r\ndocker load -i [input tar \ud30c\uc77c]\n"})})]})}function u(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,c.jsx)(r,{...e,children:(0,c.jsx)(d,{...e})}):d(e)}}}]);