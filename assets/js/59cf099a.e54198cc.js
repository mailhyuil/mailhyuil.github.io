"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[241965],{291555:(s,e,r)=>{r.r(e),r.d(e,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"db-postgres/postgres replication \uac04\ub2e8\ud558\uac8c \uad6c\ud604","title":"postgres replication","description":"primary(master)\uc5d0\uc11c\ub294 \uc4f0\uae30\ub97c \ub2f4\ub2f9","source":"@site/docs/db-postgres/postgres replication \uac04\ub2e8\ud558\uac8c \uad6c\ud604.md","sourceDirName":"db-postgres","slug":"/db-postgres/postgres replication \uac04\ub2e8\ud558\uac8c \uad6c\ud604","permalink":"/docs/db-postgres/postgres replication \uac04\ub2e8\ud558\uac8c \uad6c\ud604","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"postgres replication slots","permalink":"/docs/db-postgres/postgres replication slot"},"next":{"title":"postgres replication","permalink":"/docs/db-postgres/postgres replication"}}');var t=r(447259),o=r(529087);const a={},i="postgres replication",l={},c=[{value:"postgres_primary &amp; postgres_replica -&gt; pg_hba.conf",id:"postgres_primary--postgres_replica---pg_hbaconf",level:2},{value:"primary\uc758 \ub370\uc774\ud130\ub97c \ubcf5\uc81c",id:"primary\uc758-\ub370\uc774\ud130\ub97c-\ubcf5\uc81c",level:2},{value:"postgres_replica -&gt; postgresql.conf",id:"postgres_replica---postgresqlconf",level:2},{value:"postgres_primary -&gt; postgresql.conf",id:"postgres_primary---postgresqlconf",level:2},{value:"postgres_replica -&gt; standby.signal",id:"postgres_replica---standbysignal",level:2},{value:"\uc2e4\ud589",id:"\uc2e4\ud589",level:2}];function p(s){const e={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...s.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"postgres-replication",children:"postgres replication"})}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"primary(master)\uc5d0\uc11c\ub294 \uc4f0\uae30\ub97c \ub2f4\ub2f9"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"replica(standby)\uc5d0\uc11c\ub294 \uc77d\uae30\ub97c \ub2f4\ub2f9"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"postgres_primary--postgres_replica---pg_hbaconf",children:"postgres_primary & postgres_replica -> pg_hba.conf"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"\uc2e4\uc81c \uc0ac\uc6a9\ud560 \ub54c\ub294 readonly user\ub97c \uc0dd\uc131\ud574\uc11c \uc0ac\uc6a9\ud558\ub294 \uac83\uc774 \uc88b\uc74c"}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-conf",children:"# \ucd94\uac00\r\nhost replication postgres all md5\n"})}),"\n",(0,t.jsx)(e.h2,{id:"primary\uc758-\ub370\uc774\ud130\ub97c-\ubcf5\uc81c",children:"primary\uc758 \ub370\uc774\ud130\ub97c \ubcf5\uc81c"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sh",children:"mv data_standby data_standby.bak\r\ncp -R data_primary data_standby\n"})}),"\n",(0,t.jsx)(e.h2,{id:"postgres_replica---postgresqlconf",children:"postgres_replica -> postgresql.conf"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"primary connection\uc758 info\ub97c \uae30\uc785"}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-conf",children:"primary_conninfo = 'application_name=standby1 host=host.docker.internal port=5432 user=postgres password=postgres'\n"})}),"\n",(0,t.jsx)(e.h2,{id:"postgres_primary---postgresqlconf",children:"postgres_primary -> postgresql.conf"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"standby server\uc758 info\ub97c \uae30\uc785"}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-conf",children:"synchronous_standby_names = 'first 1 (standby1)' # \ucc98\uc74c 1\uac1c\uac00 \ub3d9\uae30\ud654 \ub418\uc5b4\uc57c \ud568\r\nsynchronous_standby_names = 'first 2 (standby1,standby2,standby3)' # \ucc98\uc74c 2\uac1c\uac00 \ub3d9\uae30\ud654 \ub418\uc5b4\uc57c \ud568\r\nsynchronous_standby_names = 'any 1 (standby1,standby2,standby3)' # \uc544\ubb34\uac70\ub098 1\uac1c\uac00 \ub3d9\uae30\ud654 \ub418\uc5b4\uc57c \ud568\n"})}),"\n",(0,t.jsx)(e.h2,{id:"postgres_replica---standbysignal",children:"postgres_replica -> standby.signal"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"standby.signal \ud30c\uc77c \uc0dd\uc131"}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sh",children:"touch standby.signal\n"})}),"\n",(0,t.jsx)(e.h2,{id:"\uc2e4\ud589",children:"\uc2e4\ud589"})]})}function d(s={}){const{wrapper:e}={...(0,o.R)(),...s.components};return e?(0,t.jsx)(e,{...s,children:(0,t.jsx)(p,{...s})}):p(s)}},529087:(s,e,r)=>{r.d(e,{R:()=>a,x:()=>i});var n=r(596363);const t={},o=n.createContext(t);function a(s){const e=n.useContext(o);return n.useMemo(function(){return"function"==typeof s?s(e):{...e,...s}},[e,s])}function i(s){let e;return e=s.disableParentContext?"function"==typeof s.components?s.components(t):s.components||t:a(s.components),n.createElement(o.Provider,{value:e},s.children)}}}]);