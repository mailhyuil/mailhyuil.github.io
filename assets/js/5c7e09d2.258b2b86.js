"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[594552],{204622:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>m,contentTitle:()=>a,default:()=>u,frontMatter:()=>l,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"angular/angular component segment","title":"angular form group","description":"segment-group.component.ts","source":"@site/docs/angular/angular component segment.md","sourceDirName":"angular","slug":"/angular/angular component segment","permalink":"/docs/angular/angular component segment","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"angular base component paginator","permalink":"/docs/angular/angular component paginator"},"next":{"title":"angular form component input-select","permalink":"/docs/angular/angular component select"}}');var s=t(447259),o=t(529087);const l={},a="angular form group",m={},c=[{value:"segment-group.component.ts",id:"segment-groupcomponentts",level:2},{value:"segment-group.component.html",id:"segment-groupcomponenthtml",level:2},{value:"segment-item.component.ts",id:"segment-itemcomponentts",level:2},{value:"segment-item.component.html",id:"segment-itemcomponenthtml",level:2},{value:"usage",id:"usage",level:2}];function i(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",pre:"pre",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"angular-form-group",children:"angular form group"})}),"\n",(0,s.jsx)(n.h2,{id:"segment-groupcomponentts",children:"segment-group.component.ts"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'import { ValueAccessorDirective } from "@/client/app/directives/value-accessor.directive";\r\nimport { AfterViewInit, Component, contentChildren, model, signal } from "@angular/core";\r\nimport { tap } from "rxjs";\r\nimport { SegmentItemComponent } from "../segment-item/segment-item.component";\r\n\r\n@Component({\r\n  selector: "app-segment-group",\r\n  templateUrl: "./segment-group.component.html",\r\n  styleUrls: ["./segment-group.component.scss"],\r\n  standalone: true,\r\n  imports: [],\r\n  hostDirectives: [ValueAccessorDirective],\r\n})\r\nexport class SegmentGroupComponent implements AfterViewInit {\r\n  segments = contentChildren(SegmentItemComponent);\r\n  value = signal<string | undefined>(undefined);\r\n\r\n  cursor = model<string | undefined>(undefined);\r\n  loading = model<boolean>(false);\r\n  data = model<unknown[]>([]);\r\n  private readonly valueAccessor = model(ValueAccessorDirective<string>);\r\n  constructor() {\r\n    this.valueAccessor.value.subscribe(v => {\r\n      if (v != null) {\r\n        this.value.set(v);\r\n        setTimeout(() => {\r\n          const segments = this.segments();\r\n          segments.forEach(segment => {\r\n            segment.selectedValue$.next(v);\r\n          });\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this._init();\r\n  }\r\n\r\n  _init() {\r\n    const segments = this.segments();\r\n    segments.forEach(segment => {\r\n      segment.select$\r\n        .pipe(\r\n          tap(value => {\r\n            segments.forEach(segment => {\r\n              segment.selectedValue$.next(value);\r\n            });\r\n          }),\r\n        )\r\n        .subscribe(v => {\r\n          this.setValue(v);\r\n        });\r\n    });\r\n  }\r\n\r\n  setValue(value: string) {\r\n    this.loading.set(true);\r\n    this.cursor.set(undefined);\r\n    this.data.set([]);\r\n\r\n    this.valueAccessor.writeValue(value);\r\n    this.valueAccessor.valueChange(value);\r\n  }\r\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"segment-groupcomponenthtml",children:"segment-group.component.html"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:'<div class="flex items-center gap-2">\r\n  <ng-content></ng-content>\r\n</div>\n'})}),"\n",(0,s.jsx)(n.h2,{id:"segment-itemcomponentts",children:"segment-item.component.ts"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'import { CommonModule } from "@angular/common";\r\nimport { Component, input, OnDestroy } from "@angular/core";\r\nimport { BehaviorSubject, Subject } from "rxjs";\r\n\r\n@Component({\r\n  selector: "app-segment-item",\r\n  templateUrl: "./segment-item.component.html",\r\n  styleUrls: ["./segment-item.component.scss"],\r\n  standalone: true,\r\n  imports: [CommonModule],\r\n})\r\nexport class SegmentItemComponent implements OnDestroy {\r\n  value = input<string | undefined>(undefined);\r\n  select$ = new Subject<string>();\r\n  selectedValue$ = new BehaviorSubject<string | undefined>(undefined);\r\n\r\n  ngOnDestroy(): void {\r\n    this.select$.complete();\r\n    this.selectedValue$.complete();\r\n  }\r\n\r\n  _select() {\r\n    const value = this.value();\r\n    if (value) {\r\n      this.select$.next(value);\r\n    }\r\n  }\r\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"segment-itemcomponenthtml",children:"segment-item.component.html"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:'@let v = value();\r\n\r\n<button\r\n  class="w-full px-5 py-2 font-bold rounded-full"\r\n  [class.bg-primary]="selectedValue$.value === v"\r\n  [class.text-white]="selectedValue$.value === v"\r\n  [class.text-gray-400]="selectedValue$.value !== v"\r\n  (click)="_select()"\r\n>\r\n  <ng-content></ng-content>\r\n</button>\n'})}),"\n",(0,s.jsx)(n.h2,{id:"usage",children:"usage"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:'<app-segment [(ngModel)]="selectedSegment">\r\n  <app-segment-item value="\uc804\uccb4">\uc804\uccb4</app-segment-item>\r\n  <app-segment-item value="\uc624\ud508\uc608\uc815">\uc624\ud508\uc608\uc815</app-segment-item>\r\n  <app-segment-item value="\uc624\ud508\uc644\ub8cc">\uc624\ud508\uc644\ub8cc</app-segment-item>\r\n</app-segment>\n'})})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(i,{...e})}):i(e)}},529087:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>a});var r=t(596363);const s={},o=r.createContext(s);function l(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);