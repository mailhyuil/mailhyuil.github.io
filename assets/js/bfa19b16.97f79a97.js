"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[82409],{152491:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>t,contentTitle:()=>s,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"cloud/cloud \ubc30\ud3ec \uc21c\uc11c","title":"\ubc30\ud3ec","description":"1. .env \ub098\ub204\uae30 local, development, production NODE_ENV \uc9c0\uc815","source":"@site/docs/cloud/cloud \ubc30\ud3ec \uc21c\uc11c.md","sourceDirName":"cloud","slug":"/cloud/cloud \ubc30\ud3ec \uc21c\uc11c","permalink":"/docs/cloud/cloud \ubc30\ud3ec \uc21c\uc11c","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"VPC cidr \uc138\ud305","permalink":"/docs/cloud/cloud vpc cidr \uc138\ud305"},"next":{"title":"cloudflare cdn (cache)","permalink":"/docs/cloud/cloudflare CDN - cache"}}');var l=r(447259),c=r(529087);const i={},s="\ubc30\ud3ec",t={},d=[{value:"shell script",id:"shell-script",level:2}];function a(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,c.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"\ubc30\ud3ec",children:"\ubc30\ud3ec"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:".env \ub098\ub204\uae30 local, development, production NODE_ENV \uc9c0\uc815"}),"\n",(0,l.jsx)(n.li,{children:".env SERVER \uc124\uc815"}),"\n",(0,l.jsx)(n.li,{children:"\uc11c\ubc84\uc5d0 clone"}),"\n",(0,l.jsx)(n.li,{children:"build"}),"\n",(0,l.jsx)(n.li,{children:"ecosystem local, development, production NODE_ENV \uc9c0\uc815"}),"\n",(0,l.jsx)(n.li,{children:"ecosystem.config.js NOTRO_PORT \uc815\ud574\uc8fc\uae30 // notion\uc5d0 \uc548 \ubb3c\ub824\uc788\ub294 \ud3ec\ud2b8 \ud655\uc778"}),"\n",(0,l.jsx)(n.li,{children:"pm2 start ecosystem.config.js"}),"\n",(0,l.jsx)(n.li,{children:"nginx available \ud3f4\ub354\uc5d0 config \ud30c\uc77c \uc0dd\uc131"}),"\n",(0,l.jsx)(n.li,{children:"nginx enabled \ud3f4\ub354\uc5d0 \uc2ec\ubcfc\ub9ad \ub9c1\ud06c \uc0dd\uc131 // sudo ln samil.lepisode.team /etc/nginx/sites-enabled/samil.lepisode.team"}),"\n",(0,l.jsx)(n.li,{children:"sudo service nginx restart"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"shell-script",children:"shell script"}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"shell script \uc0ac\uc6a9"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"#!/bin/bash\r\nPEM_PATH=./scripts/lepisode.pem # .pem \uc2dc\ud06c\ub9bf \ud0a4 \uc704\uce58\r\nif [ ! -f $PEM_PATH ]; then # .pem \uc2dc\ud06c\ub9bf \ud0a4\uac00 \uc5c6\uc73c\uba74 \uc5d0\ub7ec\r\n    echo \"[ERROR] PRIVATE KEY FILE NOT FOUND \\\"$PEM_PATH\\\"\"\r\n    exit 1;\r\nfi\r\n\r\n# ng build --configuration production\r\n\r\nBUILD=$? # build\ud558\uae30\r\nif [ $BUILD -eq 1 ]; then # build \uc2e4\ud328\uc2dc \uc5d0\ub7ec\r\n    echo -e '\\n======================================\\n'\r\n    echo '[ERROR] BUILD FAILED'\r\n    echo -e '\\n======================================\\n'\r\n    exit 1;\r\nfi\r\n\r\nUSER=lepisode # \uc11c\ubc84 \uc720\uc800\ub124\uc784\r\nHOST=192.168.0.23 # \uc11c\ubc84 \uc8fc\uc18c\r\nDEPLOY_PATH=/opt/smart-solution # \uc11c\ubc84 deploy path\r\n\r\nSERVER=$USER@$HOST # \uc720\uc800\ub124\uc784@\uc11c\ubc84\uc8fc\uc18c\r\nREMOTE_PATH=$SERVER:$DEPLOY_PATH # \uc720\uc800\ub124\uc784@\uc11c\ubc84\uc8fc\uc18c:/deployPath\r\n\r\n# ssh -oStrictHostKeyChecking=no -i $PEM_PATH $SERVER \"rm -rf $DEPLOY_PATH/dist\"\r\nssh -i $PEM_PATH $SERVER \"rm -rf $DEPLOY_PATH/www\" # ssh\ub85c www \ud3f4\ub354 \uc9c0\uc6b0\uae30\r\nssh -i $PEM_PATH $SERVER \"mkdir $DEPLOY_PATH/www\" # ssh\ub85c www \ud3f4\ub354 \uc7ac\uc0dd\uc131\r\n\r\n# for window\r\nscp -i $PEM_PATH -r www $REMOTE_PATH # scp\ub85c www \ud3f4\ub354\uc5d0 \ud30c\uc77c \ub123\uae30\r\n\r\necho -e '\\n======================================\\n'\r\necho 'FILE UPLOAD DONE.'\r\necho -e '\\n======================================\\n'\n"})})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}},529087:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>s});var o=r(596363);const l={},c=o.createContext(l);function i(e){const n=o.useContext(c);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),o.createElement(c.Provider,{value:n},e.children)}}}]);