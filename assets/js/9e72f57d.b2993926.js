"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["182385"],{248291:function(e,r,s){s.r(r),s.d(r,{frontMatter:()=>i,toc:()=>a,default:()=>p,metadata:()=>n,assets:()=>c,contentTitle:()=>l});var n=JSON.parse('{"id":"db-postgres/postgres WAL archive restore","title":"postgres WAL restore","description":"\uC21C\uC11C","source":"@site/docs/db-postgres/postgres WAL archive restore.md","sourceDirName":"db-postgres","slug":"/db-postgres/postgres WAL archive restore","permalink":"/docs/db-postgres/postgres WAL archive restore","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"postgres WAL \uC544\uCE74\uC774\uBE0C backup","permalink":"/docs/db-postgres/postgres WAL archive backup"},"next":{"title":"postgres WAL options","permalink":"/docs/db-postgres/postgres WAL options"}}'),t=s(447259),o=s(255511);let i={},l="postgres WAL restore",c={},a=[{value:"\uC21C\uC11C",id:"\uC21C\uC11C",level:2},{value:"restore",id:"restore",level:2},{value:"\uBCF5\uAD6C\uAC00 \uC644\uB8CC\uB418\uC5C8\uB2E4\uBA74 \uBCF5\uAD6C\uBAA8\uB4DC\uB97C \uD574\uC81C\uD574\uC57C \uD55C\uB2E4.",id:"\uBCF5\uAD6C\uAC00-\uC644\uB8CC\uB418\uC5C8\uB2E4\uBA74-\uBCF5\uAD6C\uBAA8\uB4DC\uB97C-\uD574\uC81C\uD574\uC57C-\uD55C\uB2E4",level:2}];function d(e){let r={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.header,{children:(0,t.jsx)(r.h1,{id:"postgres-wal-restore",children:"postgres WAL restore"})}),"\n",(0,t.jsx)(r.h2,{id:"\uC21C\uC11C",children:"\uC21C\uC11C"}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsx)(r.p,{children:"postgres \uC911\uC9C0"}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsx)(r.p,{children:"data \uACBD\uB85C\uC758 \uD30C\uC77C\uB4E4\uC744 \uB2E4\uB978 \uACF3\uC73C\uB85C \uC774\uB3D9\uC2DC\uD0A4\uACE0 \uC804\uBD80 \uC0AD\uC81C"}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsx)(r.p,{children:"pg_basebackup \uD30C\uC77C\uC744 data\uACBD\uB85C\uB85C \uBCF5\uC0AC (pg_wal \uC81C\uC678)"}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsx)(r.p,{children:"data\uACBD\uB85C\uC5D0 recovery.signal \uD30C\uC77C \uC0DD\uC131"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"recovery.signal \uD30C\uC77C\uC740 postgres\uAC00 \uBCF5\uAD6C\uBAA8\uB4DC\uB85C \uC2E4\uD589\uB418\uB3C4\uB85D \uC54C\uB824\uC90C"}),"\n",(0,t.jsx)(r.li,{children:"(\uD2B9\uC815 \uC2DC\uC810\uC73C\uB85C \uBCF5\uAD6C\uB97C \uC6D0\uD558\uBA74 \uC774 \uD30C\uC77C\uC5D0 recovery_target_time\uC744 \uC124\uC815)"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsx)(r.p,{children:"\uC11C\uBC84\uB97C \uC2E4\uD589\uD558\uBA74 \uBCF5\uAD6C\uBAA8\uB4DC\uB85C \uC2E4\uD589\uB41C\uB2E4"}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsx)(r.p,{children:"\uBCF5\uAD6C\uAC00 \uC644\uB8CC\uB418\uBA74 recovery.signal\uC774 \uC0AC\uB77C\uC9D0"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"restore",children:"restore"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-conf",children:"restore_command = 'cp /mnt/server/archivedir/%f %p'\r\n\r\n# \uAC00\uC7A5 \uCD5C\uADFC WAL\uAE4C\uC9C0 \uBCF5\uAD6C \uC2DC\r\nrestore_target_time = 'latest'\r\n# \uD2B9\uC815 \uC2DC\uC810\uC73C\uB85C \uBCF5\uAD6C \uC2DC\r\nrestore_target_time = '2021-04-05 00:21:28'\r\n# \uD2B9\uC815 transaction\uAE4C\uC9C0 \uBCF5\uAD6C \uC2DC\r\nrestore_target_xid = '123456'\n"})}),"\n",(0,t.jsx)(r.h2,{id:"\uBCF5\uAD6C\uAC00-\uC644\uB8CC\uB418\uC5C8\uB2E4\uBA74-\uBCF5\uAD6C\uBAA8\uB4DC\uB97C-\uD574\uC81C\uD574\uC57C-\uD55C\uB2E4",children:"\uBCF5\uAD6C\uAC00 \uC644\uB8CC\uB418\uC5C8\uB2E4\uBA74 \uBCF5\uAD6C\uBAA8\uB4DC\uB97C \uD574\uC81C\uD574\uC57C \uD55C\uB2E4."}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-sql",children:"-- \uBCF5\uAD6C\uBAA8\uB4DC \uD655\uC778\r\nSELECT pg_is_in_recovery();\r\n-- \uBCF5\uAD6C\uBAA8\uB4DC\uC5D0\uC11C \uC2B9\uACA9\r\nSELECT pg_promote();\n"})})]})}function p(e={}){let{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},255511:function(e,r,s){s.d(r,{R:()=>i,x:()=>l});var n=s(596363);let t={},o=n.createContext(t);function i(e){let r=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),n.createElement(o.Provider,{value:r},e.children)}}}]);