"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["42386"],{976004:function(e,n,r){r.r(n),r.d(n,{frontMatter:()=>c,toc:()=>d,default:()=>u,metadata:()=>l,assets:()=>s,contentTitle:()=>t});var l=JSON.parse('{"id":"cloud/cloud \uBC30\uD3EC \uC21C\uC11C","title":"\uBC30\uD3EC","description":"1. .env \uB098\uB204\uAE30 local, development, production NODE_ENV \uC9C0\uC815","source":"@site/docs/cloud/cloud \uBC30\uD3EC \uC21C\uC11C.md","sourceDirName":"cloud","slug":"/cloud/cloud \uBC30\uD3EC \uC21C\uC11C","permalink":"/docs/cloud/cloud \uBC30\uD3EC \uC21C\uC11C","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"VPC cidr \uC138\uD305","permalink":"/docs/cloud/cloud vpc cidr \uC138\uD305"},"next":{"title":"cloudflare cdn (cache)","permalink":"/docs/cloud/cloudflare CDN - cache"}}'),i=r(447259),o=r(255511);let c={},t="\uBC30\uD3EC",s={},d=[{value:"shell script",id:"shell-script",level:2}];function a(e){let n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"\uBC30\uD3EC",children:"\uBC30\uD3EC"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:".env \uB098\uB204\uAE30 local, development, production NODE_ENV \uC9C0\uC815"}),"\n",(0,i.jsx)(n.li,{children:".env SERVER \uC124\uC815"}),"\n",(0,i.jsx)(n.li,{children:"\uC11C\uBC84\uC5D0 clone"}),"\n",(0,i.jsx)(n.li,{children:"build"}),"\n",(0,i.jsx)(n.li,{children:"ecosystem local, development, production NODE_ENV \uC9C0\uC815"}),"\n",(0,i.jsx)(n.li,{children:"ecosystem.config.js NOTRO_PORT \uC815\uD574\uC8FC\uAE30 // notion\uC5D0 \uC548 \uBB3C\uB824\uC788\uB294 \uD3EC\uD2B8 \uD655\uC778"}),"\n",(0,i.jsx)(n.li,{children:"pm2 start ecosystem.config.js"}),"\n",(0,i.jsx)(n.li,{children:"nginx available \uD3F4\uB354\uC5D0 config \uD30C\uC77C \uC0DD\uC131"}),"\n",(0,i.jsx)(n.li,{children:"nginx enabled \uD3F4\uB354\uC5D0 \uC2EC\uBCFC\uB9AD \uB9C1\uD06C \uC0DD\uC131 // sudo ln samil.lepisode.team /etc/nginx/sites-enabled/samil.lepisode.team"}),"\n",(0,i.jsx)(n.li,{children:"sudo service nginx restart"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"shell-script",children:"shell script"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"shell script \uC0AC\uC6A9"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"#!/bin/bash\r\nPEM_PATH=./scripts/lepisode.pem # .pem \uC2DC\uD06C\uB9BF \uD0A4 \uC704\uCE58\r\nif [ ! -f $PEM_PATH ]; then # .pem \uC2DC\uD06C\uB9BF \uD0A4\uAC00 \uC5C6\uC73C\uBA74 \uC5D0\uB7EC\r\n    echo \"[ERROR] PRIVATE KEY FILE NOT FOUND \\\"$PEM_PATH\\\"\"\r\n    exit 1;\r\nfi\r\n\r\n# ng build --configuration production\r\n\r\nBUILD=$? # build\uD558\uAE30\r\nif [ $BUILD -eq 1 ]; then # build \uC2E4\uD328\uC2DC \uC5D0\uB7EC\r\n    echo -e '\\n======================================\\n'\r\n    echo '[ERROR] BUILD FAILED'\r\n    echo -e '\\n======================================\\n'\r\n    exit 1;\r\nfi\r\n\r\nUSER=lepisode # \uC11C\uBC84 \uC720\uC800\uB124\uC784\r\nHOST=192.168.0.23 # \uC11C\uBC84 \uC8FC\uC18C\r\nDEPLOY_PATH=/opt/smart-solution # \uC11C\uBC84 deploy path\r\n\r\nSERVER=$USER@$HOST # \uC720\uC800\uB124\uC784@\uC11C\uBC84\uC8FC\uC18C\r\nREMOTE_PATH=$SERVER:$DEPLOY_PATH # \uC720\uC800\uB124\uC784@\uC11C\uBC84\uC8FC\uC18C:/deployPath\r\n\r\n# ssh -oStrictHostKeyChecking=no -i $PEM_PATH $SERVER \"rm -rf $DEPLOY_PATH/dist\"\r\nssh -i $PEM_PATH $SERVER \"rm -rf $DEPLOY_PATH/www\" # ssh\uB85C www \uD3F4\uB354 \uC9C0\uC6B0\uAE30\r\nssh -i $PEM_PATH $SERVER \"mkdir $DEPLOY_PATH/www\" # ssh\uB85C www \uD3F4\uB354 \uC7AC\uC0DD\uC131\r\n\r\n# for window\r\nscp -i $PEM_PATH -r www $REMOTE_PATH # scp\uB85C www \uD3F4\uB354\uC5D0 \uD30C\uC77C \uB123\uAE30\r\n\r\necho -e '\\n======================================\\n'\r\necho 'FILE UPLOAD DONE.'\r\necho -e '\\n======================================\\n'\n"})})]})}function u(e={}){let{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},255511:function(e,n,r){r.d(n,{R:()=>c,x:()=>t});var l=r(596363);let i={},o=l.createContext(i);function c(e){let n=l.useContext(o);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),l.createElement(o.Provider,{value:n},e.children)}}}]);