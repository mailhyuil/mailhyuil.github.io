"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["159141"],{163154:function(e,n,o){o.r(n),o.d(n,{frontMatter:()=>a,toc:()=>d,default:()=>p,metadata:()=>t,assets:()=>l,contentTitle:()=>s});var t=JSON.parse('{"id":"nx/nx webpack module federation","title":"nx webpack module federation","description":"remote","source":"@site/docs/nx/nx webpack module federation.md","sourceDirName":"nx","slug":"/nx/nx webpack module federation","permalink":"/docs/nx/nx webpack module federation","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"nx generate packagejson","permalink":"/docs/nx/nx webpack generatePackageJson"},"next":{"title":"nx webpack nest","permalink":"/docs/nx/nx webpack nestjs"}}'),r=o(447259),i=o(255511);let a={},s="nx webpack module federation",l={},d=[{value:"remote",id:"remote",level:2},{value:"webpack.config.js",id:"webpackconfigjs",level:3},{value:"routes.ts",id:"routests",level:3},{value:"app.config.ts",id:"appconfigts",level:3},{value:"host",id:"host",level:2},{value:"webpack.config.js",id:"webpackconfigjs-1",level:3},{value:"routes.ts",id:"routests-1",level:3},{value:"module-federation.manifest.json",id:"module-federationmanifestjson",level:3},{value:"main.ts",id:"maints",level:3},{value:"component",id:"component",level:2}];function c(e){let n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"nx-webpack-module-federation",children:"nx webpack module federation"})}),"\n",(0,r.jsx)(n.h2,{id:"remote",children:"remote"}),"\n",(0,r.jsx)(n.h3,{id:"webpackconfigjs",children:"webpack.config.js"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'import { withModuleFederation } from "@nx/angular/module-federation";\r\nimport { ModuleFederationConfig } from "@nx/webpack";\r\n\r\nconst config: ModuleFederationConfig = {\r\n  name: "login",\r\n  exposes: {\r\n    "./Routes": "apps/login/src/app/remote-entry/entry.routes.ts",\r\n  },\r\n};\r\n\r\nexport default withModuleFederation(config);\n'})}),"\n",(0,r.jsx)(n.h3,{id:"routests",children:"routes.ts"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'import { Route } from "@angular/router";\r\nimport { RemoteEntryComponent } from "./entry.component";\r\n\r\nexport const remoteRoutes: Route[] = [{ path: "", component: RemoteEntryComponent }];\n'})}),"\n",(0,r.jsx)(n.h3,{id:"appconfigts",children:"app.config.ts"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'import { ApplicationConfig } from "@angular/core";\r\nimport { provideRouter } from "@angular/router";\r\nimport { remoteRoutes } from "./remote-entry/entry.routes";\r\n\r\nexport const appConfig: ApplicationConfig = {\r\n  providers: [provideRouter(remoteRoutes)],\r\n};\n'})}),"\n",(0,r.jsx)(n.h2,{id:"host",children:"host"}),"\n",(0,r.jsx)(n.h3,{id:"webpackconfigjs-1",children:"webpack.config.js"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'import { withModuleFederation } from "@nx/angular/module-federation";\r\nimport { ModuleFederationConfig } from "@nx/webpack";\r\n\r\nconst config: ModuleFederationConfig = {\r\n  name: "dashboard",\r\n  remotes: [],\r\n};\r\n\r\nexport default withModuleFederation(config);\n'})}),"\n",(0,r.jsx)(n.h3,{id:"routests-1",children:"routes.ts"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"loadRemoteModule \uD568\uC218\uB294 module federation\uC744 \uD1B5\uD574 remote module\uC744 \uB85C\uB4DC\uD55C\uB2E4."}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'import { Route } from "@angular/router";\r\nimport { loadRemoteModule } from "@nx/angular/mf";\r\nimport { AppComponent } from "./app.component";\r\n\r\nexport const appRoutes: Route[] = [\r\n  {\r\n    path: "login",\r\n    loadChildren: () => loadRemoteModule("login", "./Routes").then((m) => m.remoteRoutes),\r\n  },\r\n  {\r\n    path: "",\r\n    component: AppComponent,\r\n  },\r\n];\n'})}),"\n",(0,r.jsx)(n.h3,{id:"module-federationmanifestjson",children:"module-federation.manifest.json"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"module federation manifest \uD30C\uC77C\uC744 \uD1B5\uD574\uC11C remote module\uC758 \uACBD\uB85C\uB97C \uC815\uC758\uD55C\uB2E4."}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\r\n  "login": "http://localhost:4201"\r\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"maints",children:"main.ts"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"module-federation.manifest.json \uD30C\uC77C\uC744 fetch\uD558\uC5EC setRemoteDefinitions \uD568\uC218\uB97C \uD1B5\uD574 remote module\uC744 \uC815\uC758\uD55C\uB2E4."}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"import\uAC00 \uC544\uB2CC fetch\uB97C \uC0AC\uC6A9\uD558\uB294 \uC774\uC720\uB294 module federation manifest \uD30C\uC77C\uC744 \uBE4C\uB4DC \uC2DC\uC810\uC5D0 \uC0DD\uC131\uD558\uAE30 \uB54C\uBB38\uC774\uB2E4."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'import { bootstrapApplication } from "@angular/platform-browser";\r\nimport { setRemoteDefinitions } from "@nx/angular/mf";\r\nimport { AppComponent } from "./app/app.component";\r\nimport { appConfig } from "./app/app.config";\r\n\r\nfetch("/assets/module-federation.manifest.json")\r\n  .then((res) => res.json())\r\n  .then((definitions) => setRemoteDefinitions(definitions))\r\n  .then(() => bootstrapApplication(AppComponent, appConfig))\r\n  .catch((err) => console.error(err));\n'})}),"\n",(0,r.jsx)(n.h2,{id:"component",children:"component"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'@Component({\r\n  selector: "app-host",\r\n  template: ` <div #buttonContainer></div> `,\r\n})\r\nexport class HostComponent implements OnInit {\r\n  @ViewChild("buttonContainer", { read: ViewContainerRef }) buttonContainer: ViewContainerRef;\r\n\r\n  async ngOnInit() {\r\n    const { ButtonComponent } = await loadRemoteModule("login", "./button");\r\n    this.buttonContainer.createComponent(ButtonComponent);\r\n  }\r\n}\n'})})]})}function p(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},255511:function(e,n,o){o.d(n,{R:()=>a,x:()=>s});var t=o(596363);let r={},i=t.createContext(r);function a(e){let n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);