"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[947086],{529087:(n,e,r)=>{r.d(e,{R:()=>s,x:()=>c});var o=r(596363);const t={},i=o.createContext(t);function s(n){const e=o.useContext(i);return o.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:s(n.components),o.createElement(i.Provider,{value:e},n.children)}},646010:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>d,contentTitle:()=>c,default:()=>x,frontMatter:()=>s,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"nginx/nginx WAF ModeSecurity","title":"nginx WAF ModeSecurity","description":"nginx\uac00 \ubc1b\uc740 \uc694\uccad\uc744 ModSecurity \ubaa8\ub4c8(\ubbf8\ub4e4\uc6e8\uc5b4)\uc744 \ud1b5\ud574 \uc694\uccad\uc744 \uac80\uc0ac","source":"@site/docs/nginx/nginx WAF ModeSecurity.md","sourceDirName":"nginx","slug":"/nginx/nginx WAF ModeSecurity","permalink":"/docs/nginx/nginx WAF ModeSecurity","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"nginx routing","permalink":"/docs/nginx/nginx SPA routing \uc548\ub420 \ub54c"},"next":{"title":"nginx ip X-Forwarded-For","permalink":"/docs/nginx/nginx X-Forwarded-For Original IP - $remote_addr, $proxy_add_x_forwarded_for"}}');var t=r(447259),i=r(529087);const s={},c="nginx WAF ModeSecurity",d={},l=[{value:"nginx with ModSecurity",id:"nginx-with-modsecurity",level:2},{value:"proxy.conf",id:"proxyconf",level:2}];function a(n){const e={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,i.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"nginx-waf-modesecurity",children:"nginx WAF ModeSecurity"})}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"nginx\uac00 \ubc1b\uc740 \uc694\uccad\uc744 ModSecurity \ubaa8\ub4c8(\ubbf8\ub4e4\uc6e8\uc5b4)\uc744 \ud1b5\ud574 \uc694\uccad\uc744 \uac80\uc0ac"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"ModSecurity\uac00 Core Rule Set (CRS)\ub97c \uc774\uc6a9\ud574 \uacf5\uaca9 \uc5ec\ubd80 \ud310\ubcc4 (SQL Injection, XSS \ub4f1 \uc545\uc758\uc801\uc778 \uc694\uccad \ucc28\ub2e8)"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"\uc815\uc0c1 \uc694\uccad: Nginx\uac00 \uadf8\ub300\ub85c \ubc31\uc5d4\ub4dc \uc11c\ubc84(\uc608: PHP, Node.js)\ub85c \uc804\ub2ec"}),"\n",(0,t.jsx)(e.p,{children:"\ucc28\ub2e8\ub41c \uc694\uccad: ModSecurity\uac00 HTTP 403(Forbidden) \ub4f1\uc758 \uc751\ub2f5 \ubc18\ud658"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"nginx-with-modsecurity",children:"nginx with ModSecurity"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"modsecurity-crs (Core Rule Set)\ub97c \uc0ac\uc6a9\ud558\uc5ec ModSecurity\ub97c \uc801\uc6a9\ud55c nginx"}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'services:\r\n  nginx:\r\n    container_name: nginx\r\n    image: owasp/modsecurity-crs:nginx-alpine\r\n    ports:\r\n      - "80:80"\r\n      - "443:443"\r\n    volumes:\r\n      - /opt/nginx/proxy.conf:/etc/nginx/conf.d/proxy.conf:ro\r\n      - /opt/nginx/ssl/private.pem:/etc/nginx/ssl/private.pem:ro\r\n      - /opt/nginx/ssl/crt.pem:/etc/nginx/ssl/crt.pem:ro\r\n      - /opt/nginx/ssl/ca-bundle.pem:/etc/nginx/ssl/ca-bundle.pem:ro\r\n    environment:\r\n      - PROXY=1\r\n    networks:\r\n      nginx:\r\nnetworks:\r\n  nginx:\n'})}),"\n",(0,t.jsx)(e.h2,{id:"proxyconf",children:"proxy.conf"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-conf",children:"server {\r\n    listen 443 ssl;\r\n    server_name example.com;\r\n    ssl_certificate /etc/nginx/ssl/crt.pem;\r\n    ssl_certificate_key /etc/nginx/ssl/private.pem;\r\n    ssl_trusted_certificate /etc/nginx/ssl/ca-bundle.pem;\r\n\r\n    location / {\r\n        proxy_set_header Host $host;\r\n        proxy_set_header X-Real-IP $remote_addr;\r\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\r\n        proxy_set_header X-Forwarded-Proto $scheme;\r\n        add_header 'Access-Control-Allow-Origin' 'https://example.com';\r\n        proxy_set_header Cache-Control $http_cache_control;\r\n\r\n        proxy_pass https://origin_host.com;\r\n    }\r\n}\n"})})]})}function x(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(a,{...n})}):a(n)}}}]);