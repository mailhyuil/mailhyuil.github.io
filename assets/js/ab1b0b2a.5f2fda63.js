"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["450663"],{755650:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>c,toc:()=>i,default:()=>d,metadata:()=>r,assets:()=>l,contentTitle:()=>o});var r=JSON.parse('{"id":"javascript/js Mutex \uBBA4\uD14D\uC2A4","title":"js Mutex \uBBA4\uD14D\uC2A4","description":"\uBE44\uAD00\uC801 \uB77D","source":"@site/docs/javascript/js Mutex \uBBA4\uD14D\uC2A4.md","sourceDirName":"javascript","slug":"/javascript/js Mutex \uBBA4\uD14D\uC2A4","permalink":"/docs/javascript/js Mutex \uBBA4\uD14D\uC2A4","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Math","permalink":"/docs/javascript/js Math"},"next":{"title":"js Object.assign()","permalink":"/docs/javascript/js Object.assign"}}'),s=t(447259),a=t(255511);let c={},o="js Mutex \uBBA4\uD14D\uC2A4",l={},i=[{value:"mutex.js",id:"mutexjs",level:2},{value:"usage",id:"usage",level:2}];function u(e){let n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"js-mutex-\uBBA4\uD14D\uC2A4",children:"js Mutex \uBBA4\uD14D\uC2A4"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"\uBE44\uAD00\uC801 \uB77D"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"mutexjs",children:"mutex.js"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"const _awaitUnlock = async (mutex) => {\r\n  if (mutex._locked) {\r\n    // \uC7A0\uAE08 \uC0C1\uD0DC 0.1\uCD08 \uD6C4\uC5D0 \uB2E4\uC2DC \uD655\uC778\r\n    return new Promise((resolve) => {\r\n      setTimeout(() => {\r\n        _awaitUnlock(mutex).then(() => resolve());\r\n      }, 100);\r\n    });\r\n  }\r\n  return Promise.resolve();\r\n};\r\n\r\nclass Mutex {\r\n  constructor() {\r\n    this._locked = false;\r\n  }\r\n\r\n  async lock() {\r\n    // \uC7A0\uAE08 \uC0C1\uD0DC\uAC00 \uD480\uB9B4 \uB54C \uAE4C\uC9C0 \uB300\uAE30\r\n    await _awaitUnlock(this);\r\n    this._locked = true;\r\n  }\r\n\r\n  // \uC7A0\uAE08 \uD574\uC81C\uB294 \uBCC4\uB3C4\uC758 \uC81C\uC57D\uC744 \uC8FC\uC9C0 \uC54A\uC74C.\r\n  release() {\r\n    this._locked = false;\r\n  }\r\n}\r\n\r\nexport default Mutex;\n"})}),"\n",(0,s.jsx)(n.h2,{id:"usage",children:"usage"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"const mutex = new Mutex();\r\n\r\nconst parallelLogic = async () => {\r\n  await mutex.lock(); // \uC5EC\uAE30\uC11C mutex\uAC00 \uC720\uD734 \uC0C1\uD0DC\uC77C \uB54C \uAE4C\uC9C0 \uB300\uAE30\uD558\uBA70, \uC720\uD734 \uC0C1\uD0DC\uAC00 \uB418\uBA74 \uC7A0\uAE08\uC744 \uAC78\uACE0 \uC9C4\uD589\uD55C\uB2E4.\r\n  try {\r\n    // ..\uBE44\uC988\uB2C8\uC2A4 \uB85C\uC9C1..\r\n  } finally {\r\n    mutex.release(); // \uBC18\uB4DC\uC2DC \uC2E4\uD589\uD55C\uB2E4. \uADF8\uB807\uC9C0 \uC54A\uC73C\uBA74 Dead-lock \uBC1C\uC0DD\uD568.\r\n  }\r\n};\n"})})]})}function d(e={}){let{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},255511:function(e,n,t){t.d(n,{R:()=>c,x:()=>o});var r=t(596363);let s={},a=r.createContext(s);function c(e){let n=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);