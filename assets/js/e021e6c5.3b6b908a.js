"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[881270],{380332:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>i,contentTitle:()=>l,default:()=>p,frontMatter:()=>c,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"kubernetes/kube object Ingress","title":"kubernetes Ingress","description":"L7 \uc2a4\uc704\uce58 \uc5ed\ud560\uc744 \ub17c\ub9ac\uc801\uc73c\ub85c \uc218\ud589","source":"@site/docs/kubernetes/kube object Ingress.md","sourceDirName":"kubernetes","slug":"/kubernetes/kube object Ingress","permalink":"/docs/kubernetes/kube object Ingress","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"kubernetes Ingress settings","permalink":"/docs/kubernetes/kube object Ingress settings"},"next":{"title":"kube object CronJob","permalink":"/docs/kubernetes/kube object Job CronJob"}}');var t=r(447259),o=r(529087);const c={},l="kubernetes Ingress",i={},a=[{value:"IngressController \uc124\uce58",id:"ingresscontroller-\uc124\uce58",level:2},{value:"pod \ub610\ub294 deployment \uc0dd\uc131",id:"pod-\ub610\ub294-deployment-\uc0dd\uc131",level:2},{value:"service \uc0dd\uc131",id:"service-\uc0dd\uc131",level:2},{value:"ingress \uc0dd\uc131",id:"ingress-\uc0dd\uc131",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"kubernetes-ingress",children:"kubernetes Ingress"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"L7 \uc2a4\uc704\uce58 \uc5ed\ud560\uc744 \ub17c\ub9ac\uc801\uc73c\ub85c \uc218\ud589"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"\ud074\ub7ec\uc2a4\ud130\ub85c \uc811\uadfc\ud558\ub294 URL \ubcc4\ub85c \ub2e4\ub978 \uc11c\ube44\uc2a4\uc5d0 \ud2b8\ub798\ud53d \ubd84\uc0b0"}),"\n",(0,t.jsx)(n.p,{children:"\ub178\ucd9c \ub41c \uc5ec\ub7ec\uac1c\uc758 Service\ub4e4\uc744 \ud558\ub098\uc758 \uc5d4\ub4dc\ud3ec\uc778\ud2b8\ub85c \uc678\ubd80\uc5d0 \ub178\ucd9c"}),"\n",(0,t.jsxs)(n.p,{children:["(e.g. ",(0,t.jsx)(n.a,{href:"https://myapp.com/order",children:"https://myapp.com/order"}),", ",(0,t.jsx)(n.a,{href:"https://myapp.com/payment",children:"https://myapp.com/payment"}),", ",(0,t.jsx)(n.a,{href:"https://order.myapp.com",children:"https://order.myapp.com"}),", ",(0,t.jsx)(n.a,{href:"https://payment.myapp.com",children:"https://payment.myapp.com"}),")"]}),"\n",(0,t.jsx)(n.p,{children:"(e.g. example.com/order\ub97c nestjs service\ub85c \ub77c\uc6b0\ud305 \uc2dc\ucf1c\ub193\uc558\ub2e4\uba74, nestjs service\uc758 /user \ud578\ub4e4\ub7ec \ub85c \uc811\uadfc\ud558\ub824\uba74 example.com/order/user\ub85c \uc811\uadfc\ud558\uba74 \ub41c\ub2e4.)"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"rules\uc5d0 \uc815\uc758\ub41c host\ub85c \uc811\uadfc\ud558\uba74 \ud574\ub2f9 service\ub85c \ub77c\uc6b0\ud305"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"\uc9c0\uc6d0\ud558\ub294 \uae30\ub2a5"}),"\n",(0,t.jsx)(n.p,{children:"Service\uc5d0 \uc678\ubd80 URL\uc744 \uc81c\uacf5"}),"\n",(0,t.jsx)(n.p,{children:"\ud2b8\ub798\ud53d\uc744 \ub85c\ub4dc\ubc38\ub7f0\uc2f1"}),"\n",(0,t.jsx)(n.p,{children:"SSL \uc778\uc99d\uc11c \ucc98\ub9ac"}),"\n",(0,t.jsx)(n.p,{children:"Virtual hosting \uc9c0\uc815"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"ingresscontroller-\uc124\uce58",children:"IngressController \uc124\uce58"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Ingress Controller\ub97c deploy\ud558\uae30 \uc704\ud55c manifest \ud30c\uc77c\uc744 \ub2e4\uc6b4\ub85c\ub4dc \ubc0f \uc801\uc6a9"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"CloudProvider\uc744 \uc0ac\uc6a9\ud560 \uc2dc LoadBalancer\ub97c IngressController\ub85c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4."}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"IngressController\ub294 HOST headers\uc758 \uc815\ubcf4\ub97c \uc77d\uace0 \uc5b4\ub5a4 Service\ub85c \ub77c\uc6b0\ud305 \ud560\uc9c0 \uacb0\uc815\ud55c\ub2e4"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"\ub77c\uc6b0\ud305 \uaddc\uce59\uc740 \ub0b4\uac00 \uc0dd\uc131\ud55c Ingress\ub97c \ucc38\uc870\ud55c\ub2e4."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v0.44.0/deploy/static/provider/cloud/deploy.yaml\n"})}),"\n",(0,t.jsx)(n.h2,{id:"pod-\ub610\ub294-deployment-\uc0dd\uc131",children:"pod \ub610\ub294 deployment \uc0dd\uc131"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"ingress controller\uc758 namespace\uc5d0"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"kubectl run nginx --image=nginx --port=80 --dry-run=client -o yaml > nginx.yaml\n"})}),"\n",(0,t.jsx)(n.h2,{id:"service-\uc0dd\uc131",children:"service \uc0dd\uc131"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"kubectl expose deployment nginx --port=80 --type=NodePort --dry-run=client -o yaml > nginx-svc.yaml\n"})}),"\n",(0,t.jsx)(n.h2,{id:"ingress-\uc0dd\uc131",children:"ingress \uc0dd\uc131"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"tls\ub97c \uc801\uc6a9\ud558\ub824\uba74 Secret\uc744 \uc0dd\uc131\ud558\uace0 Ingress\uc5d0 tls\ub97c \uc801\uc6a9\ud574\uc57c \ud55c\ub2e4."}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yml",children:"apiVersion: networking.k8s.io/v1\r\nkind: Ingress\r\nmetadata:\r\n  namespace: ingress-nginx\r\n  name: app-ingress\r\n  annotations:\r\n    nginx.ingress.kubernetes.io/rewrite-target: /\r\nspec:\r\n  tls:\r\n    - hosts:\r\n        - example.com\r\n      secretName: testsecret-tls\r\n  rules:\r\n    - host: example.com\r\n    - http:\r\n        paths:\r\n          - path: /<path_1>\r\n            pathType: Prefix\r\n            backend:\r\n              service:\r\n                name: <service-name>\r\n                port:\r\n                  number: 80\r\n          - path: /<path_2>\r\n            pathType: Prefix\r\n            backend:\r\n              service:\r\n                name: <service-name>\r\n                port:\r\n                  number: 3000\n"})})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},529087:(e,n,r)=>{r.d(n,{R:()=>c,x:()=>l});var s=r(596363);const t={},o=s.createContext(t);function c(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);