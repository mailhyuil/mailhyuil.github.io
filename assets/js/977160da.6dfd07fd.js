"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[654288],{401120:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>s,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"x algorithm/algorithm Distribution \ubd84\ubc30","title":"\ubd84\ubc30 \uae30\ubc95","description":"Weighted Distribution","source":"@site/docs/x algorithm/algorithm Distribution \ubd84\ubc30.md","sourceDirName":"x algorithm","slug":"/x algorithm/algorithm Distribution \ubd84\ubc30","permalink":"/docs/x algorithm/algorithm Distribution \ubd84\ubc30","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\uac10\uc9c0","permalink":"/docs/x algorithm/algorithm Detection \uac10\uc9c0"},"next":{"title":"Dynamic Programming (\ub3d9\uc801 \uacc4\ud68d\ubc95)","permalink":"/docs/x algorithm/algorithm Dynamic Programming - \ub3d9\uc801 \uacc4\ud68d\ubc95"}}');var i=r(447259),o=r(529087);const s={},a="\ubd84\ubc30 \uae30\ubc95",c={},l=[{value:"Weighted Distribution",id:"weighted-distribution",level:2},{value:"latency Distribution",id:"latency-distribution",level:2}];function d(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"\ubd84\ubc30-\uae30\ubc95",children:"\ubd84\ubc30 \uae30\ubc95"})}),"\n",(0,i.jsx)(n.h2,{id:"weighted-distribution",children:"Weighted Distribution"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"\ub09c\uc218\ub97c \uc774\uc6a9\ud574\uc11c \uc120\ud0dd\uc744 \uacb0\uc815\ud55c\ub2e4."}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"weight\ub300\uc2e0 \ub2e4\ub978 \uac12\uc744 \uc0ac\uc6a9\uac00\ub2a5 (e.g. latency...)"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'const servers = [\r\n  { name: "Server1", weight: 0.5 },\r\n  { name: "Server2", weight: 0.5 },\r\n  { name: "Server3", weight: 0.5 },\r\n];\r\n\r\nfunction getWeightedServer() {\r\n  const totalWeight = servers.reduce((a, b) => a + b.weight, 0);\r\n  const random = Math.random() * totalWeight;\r\n  let cumulativeWeight = 0;\r\n\r\n  for (const server of servers) {\r\n    cumulativeWeight += server.weight;\r\n    console.log("cumulativeWeight:", cumulativeWeight);\r\n    console.log("random:", random);\r\n    if (random < cumulativeWeight) {\r\n      return server.name;\r\n    }\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nconst selectedServer = getWeightedServer();\r\nconsole.log("Selected Server:", selectedServer);\n'})}),"\n",(0,i.jsx)(n.h2,{id:"latency-distribution",children:"latency Distribution"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"\ub09c\uc218\ub97c \uc774\uc6a9\ud574\uc11c \uc120\ud0dd\uc744 \uacb0\uc815\ud55c\ub2e4."}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"\ud655\ub960 \uacc4\uc0b0! = \uc120\ud0dd\ud55c \ub300\uc0c1 / (\ube44\uad50\ub300\uc0c1 + \ube44\uad50\ub300\uc0c1 + \ube44\uad50\ub300\uc0c1)"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'// \uc11c\ubc84 \uc751\ub2f5 \uc9c0\uc5f0 \uc2dc\uac04\r\nconst currentVersion = {\r\n  name: "CurrentVersion",\r\n  latency: 100, // \ud604\uc7ac \ubc84\uc804\uc758 \uc751\ub2f5 \uc9c0\uc5f0 \uc2dc\uac04 (\uc608: \ubc00\ub9ac\ucd08 \ub2e8\uc704)\r\n};\r\n\r\nconst canaryVersion = {\r\n  name: "CanaryVersion",\r\n  latency: 50, // \uce74\ub098\ub9ac \ubc84\uc804\uc758 \uc751\ub2f5 \uc9c0\uc5f0 \uc2dc\uac04 (\uc608: \ubc00\ub9ac\ucd08 \ub2e8\uc704)\r\n};\r\n\r\n// \uc11c\ubc84 \uc120\ud0dd\r\nfunction getServer() {\r\n  const random = Math.random(); // 0 \uc774\uc0c1 1 \ubbf8\ub9cc\uc758 \ub09c\uc218 \uc0dd\uc131\r\n\r\n  // \uce74\ub098\ub9ac \uc11c\ubc84 \uc120\ud0dd *\ud655\ub960 \uacc4\uc0b0*\r\n  const canaryProbability = canaryVersion.latency / (currentVersion.latency + canaryVersion.latency);\r\n\r\n  if (random < canaryProbability) {\r\n    return canaryVersion.name; // \uce74\ub098\ub9ac \uc11c\ubc84 \uc120\ud0dd\r\n  } else {\r\n    return currentVersion.name; // \ud604\uc7ac \ubc84\uc804 \uc11c\ubc84 \uc120\ud0dd\r\n  }\r\n}\r\n\r\n// \ud14c\uc2a4\ud2b8\r\nconst selectedServer = getServer();\r\nconsole.log("Selected Server:", selectedServer);\n'})})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},529087:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>a});var t=r(596363);const i={},o=t.createContext(i);function s(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);