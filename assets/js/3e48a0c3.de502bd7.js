"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["277031"],{155489:function(n,e,r){r.r(e),r.d(e,{frontMatter:()=>s,toc:()=>a,default:()=>u,metadata:()=>o,assets:()=>i,contentTitle:()=>t});var o=JSON.parse('{"id":"go/go base goroutine sync","title":"go package sync","description":"Go\uC5D0\uC11C \uB3D9\uC2DC\uC131(concurrency)\uC744 \uC548\uC804\uD558\uAC8C \uB2E4\uB8F0 \uC218 \uC788\uAC8C \uD574\uC8FC\uB294 \uAE30\uBCF8\uC801\uC778 \uB3D9\uAE30\uD654 \uB3C4\uAD6C\uB4E4\uC744 \uC81C\uACF5","source":"@site/docs/go/go base goroutine sync.md","sourceDirName":"go","slug":"/go/go base goroutine sync","permalink":"/docs/go/go base goroutine sync","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"go base conditional select","permalink":"/docs/go/go base goroutine select"},"next":{"title":"go base goroutine","permalink":"/docs/go/go base goroutine"}}'),c=r(447259),l=r(255511);let s={},t="go package sync",i={},a=[{value:"Mutex",id:"mutex",level:2},{value:"RWMutex",id:"rwmutex",level:2},{value:"Once",id:"once",level:2},{value:"WaitGroup",id:"waitgroup",level:2},{value:"Cond",id:"cond",level:2},{value:"Map",id:"map",level:2},{value:"Pool",id:"pool",level:2}];function d(n){let e={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,l.R)(),...n.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(e.header,{children:(0,c.jsx)(e.h1,{id:"go-package-sync",children:"go package sync"})}),"\n",(0,c.jsxs)(e.blockquote,{children:["\n",(0,c.jsx)(e.p,{children:"Go\uC5D0\uC11C \uB3D9\uC2DC\uC131(concurrency)\uC744 \uC548\uC804\uD558\uAC8C \uB2E4\uB8F0 \uC218 \uC788\uAC8C \uD574\uC8FC\uB294 \uAE30\uBCF8\uC801\uC778 \uB3D9\uAE30\uD654 \uB3C4\uAD6C\uB4E4\uC744 \uC81C\uACF5"}),"\n",(0,c.jsxs)(e.blockquote,{children:["\n",(0,c.jsx)(e.p,{children:"\uBA40\uD2F0 \uACE0\uB8E8\uD2F4 \uD658\uACBD\uC5D0\uC11C **\uB370\uC774\uD130 \uACBD\uC7C1(race condition)**\uC744 \uD53C\uD558\uAE30 \uC704\uD574 \uC544\uC8FC \uC790\uC8FC \uC0AC\uC6A9\uB428"}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(e.h2,{id:"mutex",children:"Mutex"}),"\n",(0,c.jsxs)(e.blockquote,{children:["\n",(0,c.jsx)(e.p,{children:'\uC77D\uAE30/\uC4F0\uAE30 \uAD00\uACC4\uC5C6\uC774 "\uD55C \uBC88\uC5D0 \uD558\uB098\uB9CC \uC811\uADFC \uAC00\uB2A5"\uD55C \uB77D'}),"\n",(0,c.jsxs)(e.blockquote,{children:["\n",(0,c.jsx)(e.p,{children:"\uB2E8\uC21C\uD568, \uC77D\uAE30 \uC791\uC5C5\uC870\uCC28 \uBCD1\uB82C \uCC98\uB9AC \uC548 \uB428"}),"\n",(0,c.jsxs)(e.blockquote,{children:["\n",(0,c.jsx)(e.p,{children:"\uB3D9\uC2DC\uC131\uC774 \uB0AE\uC74C (\uD558\uC9C0\uB9CC \uC548\uC804)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-txt",children:"Lock() \u2192 \uB2E4\uB978 \uACE0\uB8E8\uD2F4\uC740 \uB2E4 \uB9C9\uD798\r\nUnlock() \u2192 \uB2E4\uC74C \uACE0\uB8E8\uD2F4 \uC2E4\uD589 \uAC00\uB2A5\n"})}),"\n",(0,c.jsx)(e.h2,{id:"rwmutex",children:"RWMutex"}),"\n",(0,c.jsxs)(e.blockquote,{children:["\n",(0,c.jsx)(e.p,{children:"\uC77D\uAE30\uC640 \uC4F0\uAE30\uB97C \uBD84\uB9AC\uD574\uC11C \uB354 \uB192\uC740 \uB3D9\uC2DC\uC131 \uC81C\uACF5"}),"\n",(0,c.jsxs)(e.blockquote,{children:["\n",(0,c.jsx)(e.p,{children:"\uC77D\uAE30 \uB9CE\uC740 \uC0C1\uD669\uC5D0\uC11C \uC131\uB2A5 \u2191"}),"\n",(0,c.jsxs)(e.blockquote,{children:["\n",(0,c.jsx)(e.p,{children:"\uC4F0\uAE30 \uC911\uC77C \uB550 \uC77D\uAE30\uB3C4 \uBABB\uD568"}),"\n",(0,c.jsxs)(e.blockquote,{children:["\n",(0,c.jsx)(e.p,{children:"\uC798\uBABB \uC4F0\uBA74 \uB370\uB4DC\uB77D \uC0DD\uAE30\uAE30 \uC26C\uC6C0 (RLock \uC548 \uD480\uAC70\uB098, Lock \uC911\uBCF5 \uB4F1)"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-txt",children:"RLock() / RUnlock() \u2192 \uC5EC\uB7EC \uACE0\uB8E8\uD2F4 \uB3D9\uC2DC \uC77D\uAE30 \uAC00\uB2A5\r\n\r\nLock() / Unlock() \u2192 \uC4F0\uAE30 \uC2DC \uB2E8\uB3C5 \uC810\uC720\n"})}),"\n",(0,c.jsx)(e.h2,{id:"once",children:"Once"}),"\n",(0,c.jsxs)(e.blockquote,{children:["\n",(0,c.jsx)(e.p,{children:"\uD568\uC218\uAC00 \uD55C\uBC88\uB9CC \uD638\uCD9C\uB418\uB3C4\uB85D \uBCF4\uC7A5"}),"\n",(0,c.jsxs)(e.blockquote,{children:["\n",(0,c.jsx)(e.p,{children:"\uCD08\uAE30\uD654, \uC2F1\uAE00\uD1A4 \uD328\uD134 \uB4F1\uC5D0\uC11C \uC720\uC6A9"}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-go",children:"var once sync.Once\r\nvar instance *Config\r\n\r\nfunc GetConfig() *Config {\r\n	once.Do(func() {\r\n		instance = loadConfig()\r\n	})\r\n	return instance\r\n}\n"})}),"\n",(0,c.jsx)(e.h2,{id:"waitgroup",children:"WaitGroup"}),"\n",(0,c.jsxs)(e.blockquote,{children:["\n",(0,c.jsx)(e.p,{children:"\uC5EC\uB7EC \uACE0\uB8E8\uD2F4\uC774 \uB05D\uB0A0 \uB54C\uAE4C\uC9C0 \uB300\uAE30"}),"\n"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-go",children:"for i := 0; i < 5; i++ {\r\n	wg.Add(1) // \u{1F525} \uACE0\uB8E8\uD2F4 \uC2E4\uD589 \uC804\uC5D0 \uBC18\uB4DC\uC2DC \uD638\uCD9C\r\n	go func(i int) {\r\n		defer wg.Done() // \u{1F525} defer\uB85C \uACE0\uB8E8\uD2F4 \uC885\uB8CC \uC2DC \uBC18\uB4DC\uC2DC \uD638\uCD9C\r\n		fmt.Println(i)\r\n	}(i) // \u{1F448} \uB8E8\uD504 \uBCC0\uC218 \uCEA1\uCCD0\uB3C4 \uBC29\uC9C0!\r\n}\r\nwg.Wait()\r\n\n"})}),"\n",(0,c.jsx)(e.h2,{id:"cond",children:"Cond"}),"\n",(0,c.jsxs)(e.blockquote,{children:["\n",(0,c.jsx)(e.p,{children:"\uC870\uAC74 \uBCC0\uC218"}),"\n"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-go",children:'var mu sync.Mutex\r\nvar cond = sync.NewCond(&mu)\r\nvar ready = false\r\n\r\nfunc worker() {\r\n	mu.Lock()\r\n	for !ready {\r\n		cond.Wait() // \uC870\uAC74 \uB9CC\uC871 \uC804\uAE4C\uC9C0 \uBE14\uB85D\r\n	}\r\n	fmt.Println("\uC791\uC5C5 \uC2DC\uC791!")\r\n	mu.Unlock()\r\n}\r\n\r\nfunc main() {\r\n	go worker()\r\n\r\n	time.Sleep(1 * time.Second)\r\n	mu.Lock()\r\n	ready = true\r\n	cond.Signal() // \uD558\uB098 \uAE68\uC6C0 (Broadcast()\uB294 \uBAA8\uB450 \uAE68\uC6C0)\r\n	mu.Unlock()\r\n}\n'})}),"\n",(0,c.jsx)(e.h2,{id:"map",children:"Map"}),"\n",(0,c.jsxs)(e.blockquote,{children:["\n",(0,c.jsx)(e.p,{children:"\uB3D9\uC2DC\uC131 \uC548\uC804\uD55C \uB9F5"}),"\n"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-go",children:'var m sync.Map\r\n\r\nfunc main() {\r\n	m.Store("name", "hyuil")\r\n	m.Store("age", 99)\r\n\r\n	val, ok := m.Load("name")\r\n	if ok {\r\n		fmt.Println(val)\r\n	}\r\n\r\n	m.Range(func(k, v any) bool {\r\n		fmt.Printf("%v: %v\\n", k, v)\r\n		return true\r\n	})\r\n}\n'})}),"\n",(0,c.jsx)(e.h2,{id:"pool",children:"Pool"}),"\n",(0,c.jsxs)(e.blockquote,{children:["\n",(0,c.jsx)(e.p,{children:"\uB3D9\uC2DC\uC131 \uC548\uC804\uD55C \uBA54\uBAA8\uB9AC \uD480"}),"\n"]}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-go",children:"var bufPool = sync.Pool{\r\n	New: func() any {\r\n		return new(bytes.Buffer)\r\n	},\r\n}\r\n\r\nfunc handler() {\r\n	buf := bufPool.Get().(*bytes.Buffer) // \uAEBC\uB0C4\r\n	buf.Reset()\r\n	defer bufPool.Put(buf) // \uBC18\uD658\r\n}\n"})})]})}function u(n={}){let{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,c.jsx)(e,{...n,children:(0,c.jsx)(d,{...n})}):d(n)}},255511:function(n,e,r){r.d(e,{R:()=>s,x:()=>t});var o=r(596363);let c={},l=o.createContext(c);function s(n){let e=o.useContext(l);return o.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(c):n.components||c:s(n.components),o.createElement(l.Provider,{value:e},n.children)}}}]);