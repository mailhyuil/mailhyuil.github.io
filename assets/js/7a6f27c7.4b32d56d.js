"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["505321"],{481589:function(e,o,n){n.r(o),n.d(o,{frontMatter:()=>l,toc:()=>u,default:()=>m,metadata:()=>r,assets:()=>d,contentTitle:()=>i});var r=JSON.parse('{"id":"nestjs/nest base module Dynamic Module - Configurable Module","title":"nestjs base Dynamic Module (Configurable Module)","description":"register: import \uD560\uB54C\uB9C8\uB2E4 \uB2E4\uB978 \uC124\uC815\uC744 \uD558\uACE0\uC2F6\uC744 \uB54C","source":"@site/docs/nestjs/nest base module Dynamic Module - Configurable Module.md","sourceDirName":"nestjs","slug":"/nestjs/nest base module Dynamic Module - Configurable Module","permalink":"/docs/nestjs/nest base module Dynamic Module - Configurable Module","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"nest base DI sub-trees","permalink":"/docs/nestjs/nest base module DI & DI sub-trees"},"next":{"title":"nest base module dynamic module register & forRoot & forFeature","permalink":"/docs/nestjs/nest base module dynamic module register & forRoot & forFeature"}}'),t=n(447259),s=n(255511);let l={},i="nestjs base Dynamic Module (Configurable Module)",d={},u=[{value:"\uC9C1\uC811 \uB9CC\uB4E4\uAE30",id:"\uC9C1\uC811-\uB9CC\uB4E4\uAE30",level:2},{value:"some.token.ts",id:"sometokents",level:2},{value:"some.module.ts",id:"somemodulets",level:2},{value:"Builder\uB97C \uC0AC\uC6A9\uD558\uAE30",id:"builder\uB97C-\uC0AC\uC6A9\uD558\uAE30",level:2}];function a(e){let o={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.header,{children:(0,t.jsx)(o.h1,{id:"nestjs-base-dynamic-module-configurable-module",children:"nestjs base Dynamic Module (Configurable Module)"})}),"\n",(0,t.jsxs)(o.blockquote,{children:["\n",(0,t.jsx)(o.p,{children:"register: import \uD560\uB54C\uB9C8\uB2E4 \uB2E4\uB978 \uC124\uC815\uC744 \uD558\uACE0\uC2F6\uC744 \uB54C"}),"\n",(0,t.jsx)(o.p,{children:"forRoot: \uD55C\uBC88 import\uD558\uACE0 \uACC4\uC18D \uAC19\uC740 \uC124\uC815\uC744 \uC0AC\uC6A9\uD558\uACE0 \uC2F6\uC744 \uB54C (global: true \uB85C \uC124\uC815\uD574\uC918\uC57C\uD55C\uB2E4!)"}),"\n",(0,t.jsx)(o.p,{children:"forFeature: \uD55C\uBC88 import\uD558\uACE0 \uACC4\uC18D \uAC19\uC740 \uC124\uC815\uC744 \uD558\uB418 \uC870\uAE08 \uBC14\uAFB8\uACE0 \uC2F6\uC744 \uB54C"}),"\n"]}),"\n",(0,t.jsx)(o.h2,{id:"\uC9C1\uC811-\uB9CC\uB4E4\uAE30",children:"\uC9C1\uC811 \uB9CC\uB4E4\uAE30"}),"\n",(0,t.jsxs)(o.blockquote,{children:["\n",(0,t.jsx)(o.p,{children:"token\uC740 \uB2E4\uB978 \uD30C\uC77C\uC5D0 \uC815\uC758\uD574\uC57C\uD55C\uB2E4!"}),"\n"]}),"\n",(0,t.jsx)(o.h2,{id:"sometokents",children:"some.token.ts"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-ts",children:'export const SOME_MODULE_OPTIONS = Symbol("SOME_MODULE_OPTIONS");\r\nexport type SomeModuleOptions = {};\n'})}),"\n",(0,t.jsx)(o.h2,{id:"somemodulets",children:"some.module.ts"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-ts",children:'import { DynamicModule, Module } from "@nestjs/common";\r\nimport { SomeService } from "./some.service";\r\nimport { SOME_MODULE_OPTIONS, SomeModuleOptions } from "./some.token";\r\n\r\n@Module({})\r\nexport class SomeModule {\r\n  static forRoot(options: SomeModuleOptions): DynamicModule {\r\n    return {\r\n      global: true,\r\n      module: SomeModule,\r\n      providers: [\r\n        {\r\n          provide: SOME_MODULE_OPTIONS,\r\n          useValue: options,\r\n        },\r\n        SomeService,\r\n      ],\r\n      exports: [SomeService],\r\n    };\r\n  }\r\n}\n'})}),"\n",(0,t.jsx)(o.h2,{id:"builder\uB97C-\uC0AC\uC6A9\uD558\uAE30",children:"Builder\uB97C \uC0AC\uC6A9\uD558\uAE30"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-ts",children:'import { ConfigurableModuleBuilder } from "@nestjs/common";\r\nimport { SOME_MODULE_OPTIONS, SomeModuleOptions } from "./some.token";\r\n\r\nexport const {\r\n  ConfigurableModuleClass: SomeModule,\r\n  MODULE_OPTIONS_TOKEN: SomeModuleOptionsToken,\r\n  OPTIONS_TYPE: SomeModuleOptionsType,\r\n  ASYNC_OPTIONS_TYPE: SomeModuleAsyncOptionsType,\r\n} = new ConfigurableModuleBuilder<SomeModuleOptions>()\r\n  // setClassMethodName: register by default\r\n  .setClassMethodName("forRoot")\r\n  // setFactoryMethodName: useClass\uB85C \uC0AC\uC6A9\uB418\uB294 Class\uC5D0 \uB4E4\uC5B4\uAC00\uB294 FactoryMethod\uC758 \uC774\uB984\r\n  .setFactoryMethodName("createConfigOptions")\r\n  // setExtras: when your module may need to take extra options that determine how it is supposed to behave\r\n  .setExtras(\r\n    {\r\n      isGlobal: true, // forRoot\uC640 forFeature\uC758 \uB3D9\uC791\uBC29\uC2DD\uC73C\uB85C \uC0AC\uC6A9\uD560 \uC218 \uC788\uB2E4.\r\n    },\r\n    (definition, extras) => ({\r\n      ...definition,\r\n      global: extras.isGlobal,\r\n    }),\r\n  )\r\n  .build();\n'})})]})}function m(e={}){let{wrapper:o}={...(0,s.R)(),...e.components};return o?(0,t.jsx)(o,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},255511:function(e,o,n){n.d(o,{R:()=>l,x:()=>i});var r=n(596363);let t={},s=r.createContext(t);function l(e){let o=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(o):{...o,...e}},[o,e])}function i(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),r.createElement(s.Provider,{value:o},e.children)}}}]);