"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[936030],{529087:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>l});var t=r(596363);const a={},s=t.createContext(a);function i(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),t.createElement(s.Provider,{value:n},e.children)}},737254:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>m,frontMatter:()=>i,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"x design pattern/x DI reflect-metadata \uc0ac\uc6a9","title":"DI reflect-metadata \uc0ac\uc6a9","description":"install","source":"@site/docs/x design pattern/x DI reflect-metadata \uc0ac\uc6a9.md","sourceDirName":"x design pattern","slug":"/x design pattern/x DI reflect-metadata \uc0ac\uc6a9","permalink":"/docs/x design pattern/x DI reflect-metadata \uc0ac\uc6a9","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"DI","permalink":"/docs/x design pattern/x DI angular & nestjs"},"next":{"title":"DI","permalink":"/docs/x design pattern/x DI"}}');var a=r(447259),s=r(529087);const i={},l="DI reflect-metadata \uc0ac\uc6a9",c={},o=[{value:"install",id:"install",level:2},{value:"service",id:"service",level:2},{value:"controller",id:"controller",level:2},{value:"di-container",id:"di-container",level:2},{value:"main",id:"main",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",pre:"pre",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"di-reflect-metadata-\uc0ac\uc6a9",children:"DI reflect-metadata \uc0ac\uc6a9"})}),"\n",(0,a.jsx)(n.h2,{id:"install",children:"install"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"npm i reflect-metadata\n"})}),"\n",(0,a.jsx)(n.h2,{id:"service",children:"service"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:'export class MyService {\r\n  getHello() {\r\n    return "Hello World!";\r\n  }\r\n}\n'})}),"\n",(0,a.jsx)(n.h2,{id:"controller",children:"controller"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"export class MyController {\r\n  constructor(myService) {\r\n    this.myService = myService;\r\n  }\r\n\r\n  getHello() {\r\n    return this.myService.getHello();\r\n  }\r\n}\n"})}),"\n",(0,a.jsx)(n.h2,{id:"di-container",children:"di-container"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:'export class DIContainer {\r\n  constructor() {\r\n    this.services = {};\r\n  }\r\n\r\n  // \uc11c\ube44\uc2a4 \ub4f1\ub85d\r\n  register(serviceName, serviceInstance) {\r\n    this.services[serviceName] = serviceInstance;\r\n  }\r\n\r\n  // \uc11c\ube44\uc2a4 \ud574\uacb0 (\uc8fc\uc785)\r\n  resolve(targetClass) {\r\n    const dependencies = Reflect.getMetadata("design:paramtypes", targetClass) || [];\r\n    const injections = dependencies.map(dep => this.services[dep.name]);\r\n    return new targetClass(...injections);\r\n  }\r\n}\n'})}),"\n",(0,a.jsx)(n.h2,{id:"main",children:"main"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:'import "reflect-metadata";\r\nimport { DIContainer } from "./DI-container.js";\r\nimport { MyController } from "./controller.js";\r\nimport { MyService } from "./service.js";\r\n\r\nfunction main() {\r\n  // \uba54\ud0c0\ub370\uc774\ud130 \uc124\uc815 (\uc0dd\uc131\uc790 \ud30c\ub77c\ubbf8\ud130 \ud0c0\uc785 \uc800\uc7a5) Controller\uc5d0 Service\ub97c \uc8fc\uc785\r\n  Reflect.defineMetadata("design:paramtypes", [MyService], MyController);\r\n\r\n  // DI \ucee8\ud14c\uc774\ub108 \uc0dd\uc131\r\n  const container = new DIContainer();\r\n\r\n  // \uc11c\ube44\uc2a4 \ub4f1\ub85d\r\n  container.register("MyService", new MyService());\r\n\r\n  // \ucee8\ud2b8\ub864\ub7ec \uc0dd\uc131 \ubc0f \uc758\uc874\uc131 \uc8fc\uc785\r\n  const myController = container.resolve(MyController);\r\n\r\n  // \uba54\uc11c\ub4dc \ud638\ucd9c\r\n  console.log(myController.getHello()); // "Hello World!"\r\n}\r\nmain();\n'})})]})}function m(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}}}]);