"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[968025],{344162:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>t,metadata:()=>a,toc:()=>i});const a=JSON.parse('{"id":"cache/cache WeakMap & WeakSet","title":"cache WeakMap & WeakSet","description":"\uc5b4\ub518\uac00\uc5d0\uc11c \ub098\ub3c4 \ubaa8\ub974\uac8c \ucc38\uc870 \ub418\uace0\uc788\ub294 \uac1d\uccb4\ub294 \uac00\ube44\uc9c0 \uceec\ub809\ud305 \ub418\uc9c0 \uc54a\ub294\ub2e4..!","source":"@site/docs/cache/cache WeakMap & WeakSet.md","sourceDirName":"cache","slug":"/cache/cache WeakMap & WeakSet","permalink":"/docs/cache/cache WeakMap & WeakSet","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"cache Thundering Herd Problem","permalink":"/docs/cache/cache Thundering Herd Problem"},"next":{"title":"Age","permalink":"/docs/cache/cache browser cache Age"}}');var c=r(447259),s=r(529087);const t={},o="cache WeakMap & WeakSet",l={},i=[{value:"\ubb38\uc81c",id:"\ubb38\uc81c",level:2},{value:"WeakMap",id:"weakmap",level:2},{value:"usage \uc608",id:"usage-\uc608",level:2},{value:"\uce90\uc2f1\uc5d0 \uc0ac\uc6a9",id:"\uce90\uc2f1\uc5d0-\uc0ac\uc6a9",level:2},{value:"WeakSet",id:"weakset",level:2}];function h(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.header,{children:(0,c.jsx)(n.h1,{id:"cache-weakmap--weakset",children:"cache WeakMap & WeakSet"})}),"\n",(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsx)(n.p,{children:"\uc5b4\ub518\uac00\uc5d0\uc11c \ub098\ub3c4 \ubaa8\ub974\uac8c \ucc38\uc870 \ub418\uace0\uc788\ub294 \uac1d\uccb4\ub294 \uac00\ube44\uc9c0 \uceec\ub809\ud305 \ub418\uc9c0 \uc54a\ub294\ub2e4..!"}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"\ubb38\uc81c",children:"\ubb38\uc81c"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-js",children:'let john = { name: "John" };\r\n\r\nlet map = new Map();\r\nmap.set(john, "add some value.."); // \ub9f5\uc774 \uac1d\uccb4\ub97c \ucc38\uc870\ud558\uac8c \ub428\r\n\r\njohn = null; // \ucc38\uc870\ub97c null\ub85c \ub36e\uc5b4\uc368\ub3c4 \uac00\ube44\uc9c0 \uceec\ub809\ud130\uc758 \ub300\uc0c1\uc774 \ub418\uc9c0 \uc54a\ub294\ub2e4.\r\n\r\nconsole.log(map.get(john)); // undefined \uac1d\uccb4\ub294 \uc0ac\ub77c\uc84c\uc9c0\ub9cc..\r\nconsole.log(map.size); // 1 \uc5ec\uc804\ud788 \ub0a8\uc544\uc788\uc74c..\n'})}),"\n",(0,c.jsx)(n.h2,{id:"weakmap",children:"WeakMap"}),"\n",(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsx)(n.p,{children:"Key\uac12\uc73c\ub85c \uac1d\uccb4\ub9cc \uc0ac\uc6a9 \uac00\ub2a5"}),"\n",(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsx)(n.p,{children:"\uac1d\uccb4\uc758 \ucc38\uc870\uac00 \uc0ac\ub77c\uc9c0\uba74 WeakMap\uc758 \ucc38\uc870\ub3c4 \ud574\uc81c\ub41c\ub2e4."}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-js",children:'let john = { name: "John" };\r\n\r\nlet weakMap = new WeakMap();\r\nweakMap.set(john, "...");\r\n\r\njohn = null; // \ucc38\uc870\ub97c \ub36e\uc5b4\uc500\r\n\r\n// john\uc744 \ub098\ud0c0\ub0b4\ub294 \uac1d\uccb4\ub294 \uc774\uc81c \uba54\ubaa8\ub9ac\uc5d0\uc11c \uc9c0\uc6cc\uc9d1\ub2c8\ub2e4!\n'})}),"\n",(0,c.jsx)(n.h2,{id:"usage-\uc608",children:"usage \uc608"}),"\n",(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsx)(n.p,{children:"\uc704\ud06c\ub9f5\uc740 \ubd80\ucc28\uc801\uc778 \ub370\uc774\ud130\ub97c \uc800\uc7a5\ud560 \uacf3\uc774 \ud544\uc694\ud560 \ub54c \uadf8 \uc9c4\uac00\ub97c \ubc1c\ud718\ud569\ub2c8\ub2e4."}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-js",children:"// \ud83d\udcc1 visitsCount.js\r\nconst visitsCountMap = new WeakMap(); // \uc704\ud06c\ub9f5\uc5d0 \uc0ac\uc6a9\uc790\uc758 \ubc29\ubb38 \ud69f\uc218\ub97c \uc800\uc7a5\ud568\r\n\r\n// \uc0ac\uc6a9\uc790\uac00 \ubc29\ubb38\ud558\uba74 \ubc29\ubb38 \ud69f\uc218\ub97c \ub298\ub824\uc90d\ub2c8\ub2e4.\r\nfunction countUser(user) {\r\n  let count = visitsCountMap.get(user) || 0;\r\n  visitsCountMap.set(user, count + 1);\r\n}\n"})}),"\n",(0,c.jsx)(n.h2,{id:"\uce90\uc2f1\uc5d0-\uc0ac\uc6a9",children:"\uce90\uc2f1\uc5d0 \uc0ac\uc6a9"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-js",children:"// \ud83d\udcc1 cache.js\r\nconst cache = new WeakMap();\r\n\r\n// \uc5f0\uc0b0\uc744 \uc218\ud589\ud558\uace0 \uadf8 \uacb0\uacfc\ub97c \uc704\ud06c\ub9f5\uc5d0 \uc800\uc7a5\ud569\ub2c8\ub2e4.\r\nfunction process(obj) {\r\n  if (!cache.has(obj)) {\r\n    const result = /* \uc5f0\uc0b0 \uc218\ud589 */ obj;\r\n\r\n    cache.set(obj, result);\r\n  }\r\n\r\n  return cache.get(obj);\r\n}\r\n\r\n// \ud83d\udcc1 main.js\r\nconst obj = {\r\n  /* ... \uac1d\uccb4 ... */\r\n};\r\n\r\nconst result1 = process(obj);\r\nconst result2 = process(obj);\r\n\r\n// \uac1d\uccb4\uac00 \uc4f8\ubaa8\uc5c6\uc5b4\uc9c0\uba74 \uc544\ub798\uc640 \uac19\uc774 null\ub85c \ub36e\uc5b4\uc501\ub2c8\ub2e4.\r\nobj = null;\r\n\r\n// \uadf8\ub0e5 Map\uc744 \uc0ac\uc6a9\uc2dc cache.size\ub294 1\uc744 \ub9ac\ud134\ud569\ub2c8\ub2e4.\r\n// \ud558\uc9c0\ub9cc WeakMap\uc740 obj\uac00 \uac00\ube44\uc9c0 \uceec\ub809\uc158\uc758 \ub300\uc0c1\uc774 \ub418\ubbc0\ub85c, \uce90\uc2f1\ub41c \ub370\uc774\ud130 \uc5ed\uc2dc \uba54\ubaa8\ub9ac\uc5d0\uc11c \uc0ad\uc81c\ub420 \uac81\ub2c8\ub2e4.\r\n// \uc0ad\uc81c\uac00 \uc9c4\ud589\ub418\uba74 cache\uc5d4 \uadf8 \uc5b4\ub5a4 \uc694\uc18c\ub3c4 \ub0a8\uc544\uc788\uc9c0 \uc54a\uc744\uac81\ub2c8\ub2e4.\n"})}),"\n",(0,c.jsx)(n.h2,{id:"weakset",children:"WeakSet"}),"\n",(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsx)(n.p,{children:"\uac1d\uccb4\ub9cc \uc800\uc7a5 \uac00\ub2a5"}),"\n",(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsx)(n.p,{children:"'\uc704\ud06c\u2019\ub9f5\uacfc \uc720\uc0ac\ud558\uac8c '\uc704\ud06c\u2019\uc14b\ub3c4 \ubd80\ucc28\uc801\uc778 \ub370\uc774\ud130\ub97c \uc800\uc7a5\ud560 \ub54c \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsx)(n.p,{children:"\ub2e4\ub9cc, \uc704\ud06c\uc14b\uc5d4 \uc704\ud06c\ub9f5\ucc98\ub7fc \ubcf5\uc7a1\ud55c \ub370\uc774\ud130\ub97c \uc800\uc7a5\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."}),"\n",(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsx)(n.p,{children:'\ub300\uc2e0 "\uc608"\ub098 \u201c\uc544\ub2c8\uc624\u201d \uac19\uc740 \uac04\ub2e8\ud55c \ub2f5\ubcc0\uc744 \uc5bb\ub294 \uc6a9\ub3c4\ub85c \uc0ac\uc6a9\ub429\ub2c8\ub2e4.'}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-js",children:'let visitedSet = new WeakSet();\r\n\r\nlet john = { name: "John" };\r\nlet pete = { name: "Pete" };\r\nlet mary = { name: "Mary" };\r\n\r\nvisitedSet.add(john); // John\uc774 \uc0ac\uc774\ud2b8\ub97c \ubc29\ubb38\ud569\ub2c8\ub2e4.\r\nvisitedSet.add(pete); // \uc774\uc5b4\uc11c Pete\uac00 \uc0ac\uc774\ud2b8\ub97c \ubc29\ubb38\ud569\ub2c8\ub2e4.\r\nvisitedSet.add(john); // \uc774\uc5b4\uc11c John\uc774 \ub2e4\uc2dc \uc0ac\uc774\ud2b8\ub97c \ubc29\ubb38\ud569\ub2c8\ub2e4.\r\n\r\n// visitedSet\uc5d4 \ub450 \uba85\uc758 \uc0ac\uc6a9\uc790\uac00 \uc800\uc7a5\ub420 \uac81\ub2c8\ub2e4.\r\n\r\n// John\uc758 \ubc29\ubb38 \uc5ec\ubd80\ub97c \ud655\uc778\ud574\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.\r\nalert(visitedSet.has(john)); // true \uc608\r\n\r\n// Mary\uc758 \ubc29\ubb38 \uc5ec\ubd80\ub97c \ud655\uc778\ud574\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.\r\nalert(visitedSet.has(mary)); // false \uc544\ub2c8\uc694\r\n\r\njohn = null;\r\n\r\n// visitedSet\uc5d0\uc11c john\uc744 \ub098\ud0c0\ub0b4\ub294 \uac1d\uccb4\uac00 \uc790\ub3d9\uc73c\ub85c \uc0ad\uc81c\ub429\ub2c8\ub2e4.\n'})})]})}function d(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(h,{...e})}):h(e)}},529087:(e,n,r)=>{r.d(n,{R:()=>t,x:()=>o});var a=r(596363);const c={},s=a.createContext(c);function t(e){const n=a.useContext(s);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:t(e.components),a.createElement(s.Provider,{value:n},e.children)}}}]);