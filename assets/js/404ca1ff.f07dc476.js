"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[160346],{529087:(e,c,n)=>{n.d(c,{R:()=>s,x:()=>o});var t=n(596363);const a={},r=t.createContext(a);function s(e){const c=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(c):{...c,...e}},[c,e])}function o(e){let c;return c=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),t.createElement(r.Provider,{value:c},e.children)}},787391:(e,c,n)=>{n.r(c),n.d(c,{assets:()=>i,contentTitle:()=>o,default:()=>d,frontMatter:()=>s,metadata:()=>t,toc:()=>h});const t=JSON.parse('{"id":"cache/cache browser cache etag","title":"cache Etag","description":"Express.js\ub294 \uae30\ubcf8\uc801\uc73c\ub85c \ubaa8\ub4e0 \uc751\ub2f5\uc5d0 Etag\ub97c \uc790\ub3d9\uc73c\ub85c \uc0dd\uc131\ud574\uc11c \ud5e4\ub354\uc5d0 \ucd94\uac00\ud55c\ub2e4.","source":"@site/docs/cache/cache browser cache etag.md","sourceDirName":"cache","slug":"/cache/cache browser cache etag","permalink":"/docs/cache/cache browser cache etag","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"cache browser cache Vary","permalink":"/docs/cache/cache browser cache Vary"},"next":{"title":"cache browser stale-while-revalidate","permalink":"/docs/cache/cache browser cache stale-while-revalidate"}}');var a=n(447259),r=n(529087);const s={},o="cache Etag",i={},h=[{value:"If-Match vs If-None-Match vs If-Modified-Since",id:"if-match-vs-if-none-match-vs-if-modified-since",level:2}];function l(e){const c={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.header,{children:(0,a.jsx)(c.h1,{id:"cache-etag",children:"cache Etag"})}),"\n",(0,a.jsxs)(c.blockquote,{children:["\n",(0,a.jsx)(c.p,{children:"Express.js\ub294 \uae30\ubcf8\uc801\uc73c\ub85c \ubaa8\ub4e0 \uc751\ub2f5\uc5d0 Etag\ub97c \uc790\ub3d9\uc73c\ub85c \uc0dd\uc131\ud574\uc11c \ud5e4\ub354\uc5d0 \ucd94\uac00\ud55c\ub2e4."}),"\n",(0,a.jsxs)(c.blockquote,{children:["\n",(0,a.jsx)(c.p,{children:"\ub370\uc774\ud130\uac00 \ubc14\ub00c\uba74 \ud574\uc2dc\uac12\uc774 \ubc14\ub010\ub2e4"}),"\n",(0,a.jsxs)(c.blockquote,{children:["\n",(0,a.jsx)(c.p,{children:"npm etag \ud328\ud0a4\uc9c0\ub97c \uc0ac\uc6a9\ud574\ub3c4 \ub41c\ub2e4."}),"\n",(0,a.jsxs)(c.blockquote,{children:["\n",(0,a.jsx)(c.p,{children:"If-Match or If-None-Match or If-Modified-Since\ub85c \ud655\uc778"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(c.h2,{id:"if-match-vs-if-none-match-vs-if-modified-since",children:"If-Match vs If-None-Match vs If-Modified-Since"}),"\n",(0,a.jsxs)(c.blockquote,{children:["\n",(0,a.jsx)(c.p,{children:"\uc11c\ubc84\ub85c\ubd80\ud130 \ub118\uaca8\ubc1b\uc740 \uc751\ub2f5 \ud5e4\ub354\uc5d0 Etag\uac00 \uc788\ub2e4\uba74, \ube0c\ub77c\uc6b0\uc800(\ud06c\ub86c\ub9cc \ud655\uc778)\ub294 Etag\uc758 \uac12\uacfc \uc751\ub2f5\uc744 \ubc1b\uc740 \uc2dc\uac04\uc744 \uae30\ub85d\ud574\ub450\uc5c8\ub2e4\uac00, \ub2e4\uc74c \ubc88\uc5d0 \ub3d9\uc77c\ud55c \uc694\uccad\uc744 \uc804\uc1a1\ud560 \ub54c \uc544\ub798 \ub450 \uac1c\uc758 \ud544\ub4dc\ub97c \ud5e4\ub354\uc5d0 \ucd94\uac00\ud558\uc5ec \uc11c\ubc84\ub85c \uc804\uc1a1\ud55c\ub2e4."}),"\n",(0,a.jsxs)(c.blockquote,{children:["\n",(0,a.jsx)(c.p,{children:"\uc800\uc7a5\ud574\ub454 Etag \uac12\uc744 \ub123\uc5b4\uc11c \uc11c\ubc84\uc5d0 \ub9ac\ud018\uc2a4\ud2b8"}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(c.h1,{id:"\uad6c\ud604",children:"\uad6c\ud604"}),"\n",(0,a.jsx)(c.pre,{children:(0,a.jsx)(c.code,{className:"language-js",children:'const oldEtag = request.headers["if-none-match"]; // request headers\uc5d0\uc11c Etag \uac12\uc744 \uac00\uc838\uc628\ub2e4.\r\nconst currentEtag = etag(JSON.stringify(data), { weak: true }); // data\ub97c \ud574\uc2dc\ud574\uc11c Etag\ub97c \uc0dd\uc131\ud55c\ub2e4.\r\n\r\n// Etag\ub97c \ube44\uad50\r\nif (oldEtag && oldEtag === currentEtag) {\r\n  response.status(304); // Etag\uac00 \uac19\ub2e4\uba74 304 \uc751\ub2f5\uc744 \ubcf4\ub0b8\ub2e4.\r\n  return null; // null\uc744 \ubc18\ud658\ud574\uc11c \ub354 \uc774\uc0c1\uc758 \ucc98\ub9ac\ub97c \ud558\uc9c0 \uc54a\ub294\ub2e4.\r\n} else {\r\n  response.set("Etag", currentEtag); // Etag\uac00 \ub2e4\ub974\ub2e4\uba74 \uc751\ub2f5 \ud5e4\ub354\uc5d0 Etag\ub97c \ucd94\uac00\ud55c\ub2e4.\r\n  return data; // Etag\uac00 \ub2e4\ub974\ub2e4\uba74 \uc751\ub2f5\uc744 \ubcf4\ub0b8\ub2e4.\r\n}\n'})})]})}function d(e={}){const{wrapper:c}={...(0,r.R)(),...e.components};return c?(0,a.jsx)(c,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}}}]);