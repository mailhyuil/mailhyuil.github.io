"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["285812"],{919223:function(n,r,e){e.r(r),e.d(r,{frontMatter:()=>i,toc:()=>c,default:()=>u,metadata:()=>t,assets:()=>s,contentTitle:()=>o});var t=JSON.parse('{"id":"angular/angular SSR nginx","title":"angular SSR nginx","description":"browser\uC5D0\uC11C \uBA3C\uC800 \uB9AC\uC18C\uC2A4\uB97C \uCC3E\uACE0 \uC5C6\uC73C\uBA74 rendering \uC11C\uBC84 (universal)\uB85C \uC694\uCCAD","source":"@site/docs/angular/angular SSR nginx.md","sourceDirName":"angular","slug":"/angular/angular SSR nginx","permalink":"/docs/angular/angular SSR nginx","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"angular SSR hydration","permalink":"/docs/angular/angular SSR ngSkipHydration"},"next":{"title":"angular SSR root path\uAC00 SSR\uC774 \uC801\uC6A9 \uC548\uB420 \uB54C","permalink":"/docs/angular/angular SSR root path\uAC00 SSR\uC774 \uC801\uC6A9 \uC548\uB420 \uB54C"}}'),a=e(447259),l=e(255511);let i={},o="angular SSR nginx",s={},c=[{value:"default.conf",id:"defaultconf",level:2}];function p(n){let r={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,l.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.header,{children:(0,a.jsx)(r.h1,{id:"angular-ssr-nginx",children:"angular SSR nginx"})}),"\n",(0,a.jsxs)(r.blockquote,{children:["\n",(0,a.jsx)(r.p,{children:"browser\uC5D0\uC11C \uBA3C\uC800 \uB9AC\uC18C\uC2A4\uB97C \uCC3E\uACE0 \uC5C6\uC73C\uBA74 rendering \uC11C\uBC84 (universal)\uB85C \uC694\uCCAD"}),"\n"]}),"\n",(0,a.jsx)(r.h2,{id:"defaultconf",children:"default.conf"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-conf",children:"gzip on;\r\ngzip_disable \"MSIE [1-6]\\.(?!.*SV1)\";\r\ngzip_vary on;\r\ngzip_comp_level 7;\r\ngzip_proxied any;\r\ngzip_types text/plain text/css text/javascript image/svg+xml image/x-icon application/javascript application/x-javascript text/xml application/xml application/xml+rss application/json;\r\n\r\nclient_max_body_size 1G;\r\n\r\nserver {\r\n    server_name example.com;\r\n\r\n    listen 80;\r\n    listen [::]:80;\r\n\r\n    location /.well-known/acme-challenge/ {\r\n        allow all;\r\n        root /var/www/certbot;\r\n    }\r\n\r\n    return 301 https://$host$request_uri;\r\n}\r\n\r\nserver {\r\n    server_name example.com;\r\n\r\n    http2 on;\r\n    listen 443 ssl;\r\n    listen [::]:443 ssl;\r\n\r\n    ssl_protocols TLSv1.2 TLSv1.3;\r\n    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;\r\n    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;\r\n    ssl_trusted_certificate /etc/letsencrypt/live/example.com/chain.pem;\r\n\r\n    location = / {\r\n        try_files '' @ssr;\r\n    }\r\n\r\n    location / {\r\n        root /app/client/browser;\r\n        index index.html index.htm;\r\n        try_files $uri $uri/ @ssr;\r\n    }\r\n\r\n    location /admin {\r\n        alias /app/admin;\r\n        index index.html index.htm;\r\n        try_files $uri $uri/ /admin/index.html =404;\r\n    }\r\n\r\n    location /api/v1/ {\r\n        proxy_pass http://server:3000;\r\n    }\r\n\r\n    location @ssr {\r\n        internal;\r\n        proxy_pass http://localhost:4000;\r\n        error_page 500 502 503 504 = @fallback;\r\n    }\r\n\r\n    location @fallback {\r\n        internal;\r\n        root /app/client/browser;\r\n        index index.csr.html index.html;\r\n        try_files $uri $uri/ /index.csr.html =404;\r\n    }\r\n}\n"})})]})}function u(n={}){let{wrapper:r}={...(0,l.R)(),...n.components};return r?(0,a.jsx)(r,{...n,children:(0,a.jsx)(p,{...n})}):p(n)}},255511:function(n,r,e){e.d(r,{R:()=>i,x:()=>o});var t=e(596363);let a={},l=t.createContext(a);function i(n){let r=t.useContext(l);return t.useMemo(function(){return"function"==typeof n?n(r):{...r,...n}},[r,n])}function o(n){let r;return r=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:i(n.components),t.createElement(l.Provider,{value:r},n.children)}}}]);