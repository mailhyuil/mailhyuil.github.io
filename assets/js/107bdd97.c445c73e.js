"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["680572"],{235031:function(n,t,r){r.r(t),r.d(t,{frontMatter:()=>i,toc:()=>c,default:()=>u,metadata:()=>e,assets:()=>a,contentTitle:()=>l});var e=JSON.parse('{"id":"testing/load testing k6","title":"load testing k6","description":"grafana\uC5D0\uC11C \uAC1C\uBC1C\uD55C \uC624\uD508\uC18C\uC2A4 \uBD80\uD558\uD14C\uC2A4\uD2B8 \uB3C4\uAD6C","source":"@site/docs/testing/load testing k6.md","sourceDirName":"testing","slug":"/testing/load testing k6","permalink":"/docs/testing/load testing k6","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"load testing k6 grafana + influxdb","permalink":"/docs/testing/load testing k6 grafana + influxdb"},"next":{"title":"load testing pgbench","permalink":"/docs/testing/load testing pgbench"}}'),s=r(447259),o=r(255511);let i={},l="load testing k6",a={},c=[{value:"install",id:"install",level:2},{value:"script.ts",id:"scriptts",level:2}];function d(n){let t={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"load-testing-k6",children:"load testing k6"})}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsx)(t.p,{children:"grafana\uC5D0\uC11C \uAC1C\uBC1C\uD55C \uC624\uD508\uC18C\uC2A4 \uBD80\uD558\uD14C\uC2A4\uD2B8 \uB3C4\uAD6C"}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsx)(t.p,{children:"jmeter\uBCF4\uB2E4 \uB354 \uACBD\uB7C9\uD654 \uBC0F \uCD5C\uC801\uD654 \uB418\uC5B4\uC788\uC74C"}),"\n",(0,s.jsx)(t.p,{children:"\uB2E8 GUI\uAC00 \uC5C6\uC74C"}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsx)(t.p,{children:"\uC2A4\uD06C\uB9BD\uD2B8\uB97C js\uB85C \uC791\uC131"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"install",children:"install"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-sh",children:"# mac\r\nbrew install k6\r\n# window\r\nchoco install k6\r\n# linux\r\napt install k6\r\n# docker\r\ndocker pull grafana/k6\r\n# vscode \uC790\uB3D9\uC644\uC131\uC6A9\r\nnpm i -D @types/k6\r\n\r\n# run\r\nk6 run script.ts\r\n\r\n# report \uC0DD\uC131\r\n## json\uC73C\uB85C \uCD9C\uB825\r\nk6 run --out json=result.json script.ts\r\n## csv\uB85C \uCD9C\uB825\r\nk6 run --out csv=result.csv script.ts\r\n## influxdb\uB85C \uCD9C\uB825\r\nk6 run --out influxdb=http://localhost:8086/k6 script.ts\n"})}),"\n",(0,s.jsx)(t.h2,{id:"scriptts",children:"script.ts"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:'//@ts-ignore\r\nimport { htmlReport } from "https://raw.githubusercontent.com/benc-uk/k6-reporter/main/dist/bundle.js";\r\n//@ts-ignore\r\nimport { textSummary } from "https://jslib.k6.io/k6-summary/0.0.1/index.js";\r\nimport { check, sleep } from "k6";\r\nimport http from "k6/http";\r\nimport { Options } from "k6/options";\r\n\r\nexport const options: Options = {\r\n  vus: 6,\r\n  duration: "30s",\r\n};\r\n\r\nexport default function () {\r\n  const url = "https://www.dep.team/api/v1";\r\n\r\n  const res = http.get(url);\r\n\r\n  check(res, {\r\n    "status is 200": r => r.status === 200,\r\n    "response time < 200ms": r => r.timings.duration < 200,\r\n  });\r\n\r\n  sleep(1); // 1\uCD08 \uB300\uAE30 \uD6C4 \uB2E4\uC74C \uC694\uCCAD\r\n}\r\n\r\n// report html \uC0DD\uC131 \uC6A9\r\nexport function handleSummary(data) {\r\n  return {\r\n    "result.html": htmlReport(data),\r\n    stdout: textSummary(data, { indent: " ", enableColors: true }),\r\n  };\r\n}\n'})})]})}function u(n={}){let{wrapper:t}={...(0,o.R)(),...n.components};return t?(0,s.jsx)(t,{...n,children:(0,s.jsx)(d,{...n})}):d(n)}},255511:function(n,t,r){r.d(t,{R:()=>i,x:()=>l});var e=r(596363);let s={},o=e.createContext(s);function i(n){let t=e.useContext(o);return e.useMemo(function(){return"function"==typeof n?n(t):{...t,...n}},[t,n])}function l(n){let t;return t=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:i(n.components),e.createElement(o.Provider,{value:t},n.children)}}}]);