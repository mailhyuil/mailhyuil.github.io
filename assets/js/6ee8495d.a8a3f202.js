"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[375993],{529087:(e,r,n)=>{n.d(r,{R:()=>l,x:()=>t});var o=n(596363);const s={},c=o.createContext(s);function l(e){const r=o.useContext(c);return o.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function t(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),o.createElement(c.Provider,{value:r},e.children)}},680356:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>i,contentTitle:()=>t,default:()=>a,frontMatter:()=>l,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"nodejs/nodejs module multicore cluster","title":"nodejs cluster","description":"multi processing\uc744 \uad6c\ud604","source":"@site/docs/nodejs/nodejs module multicore cluster.md","sourceDirName":"nodejs","slug":"/nodejs/nodejs module multicore cluster","permalink":"/docs/nodejs/nodejs module multicore cluster","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"node module cluster vs child_process vs worker_threads","permalink":"/docs/nodejs/nodejs module multicore cluster vs child_process vs worker_thread"},"next":{"title":"node worker_threads SharedArrayBuffer & Atomics","permalink":"/docs/nodejs/nodejs module multicore worker_threads SharedArrayBuffer & Atomics"}}');var s=n(447259),c=n(529087);const l={},t="nodejs cluster",i={},d=[{value:"usage",id:"usage",level:2},{value:"\uc2a4\ucf00\uc904\ub9c1 \uc815\ucc45",id:"\uc2a4\ucf00\uc904\ub9c1-\uc815\ucc45",level:2}];function u(e){const r={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,c.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"nodejs-cluster",children:"nodejs cluster"})}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"multi processing\uc744 \uad6c\ud604"}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"\uac01 \ucf54\uc5b4\uc5d0 process\ub97c \uc0dd\uc131"}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"child_process\ub85c \uad6c\ud604\ub418\uc5c8\uc74c"}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"nodejs \uc571 \uc790\uccb4\ub97c \uba40\ud2f0\ucf54\uc5b4\uc5d0\uc11c \uc2e4\ud589\ud558\ub294 \uac83"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"usage",children:"usage"}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"cluster.fork()\ub85c worker process\uc0dd\uc131"}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"\uc791\uc5c5\uad00\ub9ac\uc790\ub85c \ud655\uc778\ud574\ubcf4\uba74 \ub450\uac1c\uc758 \ud504\ub85c\uc138\uc2a4\uac00 \uc0dd\uc131\ub41c \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsx)(r.p,{children:"\ub450\uac1c\uc758 \ud504\ub85c\uc138\uc2a4\ub294 \ub3d9\uc2dc\uc5d0 \uc791\uc5c5\uc744 \uc218\ud589\ud569\ub2c8\ub2e4."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-js",children:'const cluster = require("cluster");\r\nconst process = require("process");\r\n\r\nif (cluster.isPrimary) {\r\n  // \ub9c8\uc2a4\ud130 \ud504\ub85c\uc138\uc2a4\r\n  console.log(`Main ${process.pid} is running`);\r\n  cluster.fork(); // worker \uc0dd\uc131\r\n  for (let i = 0; i < 1000000; i++) {\r\n    console.log("i\'m a main! nice to meet you!");\r\n  }\r\n} else {\r\n  // \uc6cc\ucee4 \ud504\ub85c\uc138\uc2a4\r\n  console.log(`Worker ${process.pid} started`);\r\n  for (let i = 0; i < 1000000; i++) {\r\n    console.log("i\'m a worker! nice to meet you!");\r\n  }\r\n}\n'})}),"\n",(0,s.jsx)(r.h2,{id:"\uc2a4\ucf00\uc904\ub9c1-\uc815\ucc45",children:"\uc2a4\ucf00\uc904\ub9c1 \uc815\ucc45"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-js",children:'const cluster = require("cluster");\r\n\r\ncluster.schedulingPolicy = cluster.SCHED_NONE; // \uc2a4\ucf00\uc904\ub9c1 \uc815\ucc45\uc744 \uc218\ub3d9\uc73c\ub85c \uc124\uc815\r\n// cluster.schedulingPolicy = cluster.SCHED_RR; // \uc2a4\ucf00\uc904\ub9c1 \uc815\ucc45\uc744 \ub77c\uc6b4\ub4dc \ub85c\ube48\uc73c\ub85c \uc124\uc815\r\n\r\ncluster.on("online", (worker) => {\r\n  console.log("online worker \uc544\uc774\ub514", worker.id);\r\n});\r\n\r\ncluster.on("exit", function (worker, code, signal) {\r\n  console.log("\uc8fd\uc740 \uc6cc\ucee4\uc758 \uc544\uc774\ub514 : " + worker.process.pid);\r\n  console.log("\uc8fd\uc740 \uc6cc\ucee4\uc758 exit code : " + code);\r\n  console.log("\uc8fd\uc740 \uc6cc\ucee4\uc758 signal : " + signal);\r\n});\r\n\r\nif (cluster.isMaster) {\r\n  console.log("I am master");\r\n  cluster.fork(); // worker \uc0dd\uc131\r\n  cluster.fork(); // worker \uc0dd\uc131\r\n  cluster.fork(); // worker \uc0dd\uc131\r\n  cluster.fork(); // worker \uc0dd\uc131\r\n} else if (cluster.isWorker) {\r\n  console.log("I am worker");\r\n}\n'})})]})}function a(e={}){const{wrapper:r}={...(0,c.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}}}]);