"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[825325],{502760:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>i,contentTitle:()=>c,default:()=>p,frontMatter:()=>l,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"nodejs/pm2 reload - \ubb34\uc911\ub2e8 \ubc30\ud3ec","title":"pm2 reload","description":"restart \uc2dc\uc5d0\ub294 \uc11c\ubc84\uac00 \ub0b4\ub824\uac00\ub294 \uc2dc\uac04\uc774 \uc788\uc9c0\ub9cc, reload\ub294 \ub0b4\ub824\uac00\uc9c0 \uc54a\uace0 \uc7ac\uc2dc\uc791\ud55c\ub2e4.","source":"@site/docs/nodejs/pm2 reload - \ubb34\uc911\ub2e8 \ubc30\ud3ec.md","sourceDirName":"nodejs","slug":"/nodejs/pm2 reload - \ubb34\uc911\ub2e8 \ubc30\ud3ec","permalink":"/docs/nodejs/pm2 reload - \ubb34\uc911\ub2e8 \ubc30\ud3ec","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"pm2 port 80, 443 permission","permalink":"/docs/nodejs/pm2 port 80, 443 permission"},"next":{"title":"pm2 script","permalink":"/docs/nodejs/pm2 script"}}');var o=r(447259),t=r(529087);const l={},c="pm2 reload",i={},a=[{value:"ecosystem.config.js",id:"ecosystemconfigjs",level:2},{value:"\uc694\uccad \uc911\uc778 \uc791\uc5c5 \ucc98\ub9ac\ud560 \ub54c\uae4c\uc9c0 \uc11c\ubc84\uc758 \uc885\ub8cc\ub97c \ub300\uae30\uc2dc\ud0a4\uae30",id:"\uc694\uccad-\uc911\uc778-\uc791\uc5c5-\ucc98\ub9ac\ud560-\ub54c\uae4c\uc9c0-\uc11c\ubc84\uc758-\uc885\ub8cc\ub97c-\ub300\uae30\uc2dc\ud0a4\uae30",level:2}];function d(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"pm2-reload",children:"pm2 reload"})}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsx)(n.p,{children:"restart \uc2dc\uc5d0\ub294 \uc11c\ubc84\uac00 \ub0b4\ub824\uac00\ub294 \uc2dc\uac04\uc774 \uc788\uc9c0\ub9cc, reload\ub294 \ub0b4\ub824\uac00\uc9c0 \uc54a\uace0 \uc7ac\uc2dc\uc791\ud55c\ub2e4."}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsx)(n.p,{children:"restart === kill + start"}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsx)(n.p,{children:"reload === a 0-second-downtime reload. // \ubb34\uc911\ub2e8 \uc7ac\uc2dc\uc791"}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsx)(n.p,{children:"reload\ub97c \uc0ac\uc6a9\ud558\uba74 \uc0c8\ub85c\uc6b4 \ud504\ub85c\uc138\uc2a4\ub97c \uba3c\uc800 spawn\ud558\uace0, \uc774\ud6c4\uc5d0 \uae30\uc874 \ud504\ub85c\uc138\uc2a4\ub97c kill\ud55c\ub2e4."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"ecosystemconfigjs",children:"ecosystem.config.js"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'module.exports = {\r\n  apps: [\r\n    {\r\n      name: "@hyuil/server",\r\n      script: "./main.js",\r\n      watch: ".",\r\n      instances: -1, // \ud074\ub7ec\uc2a4\ud130 \ubaa8\ub4dc\r\n    },\r\n  ],\r\n};\n'})}),"\n",(0,o.jsx)(n.h2,{id:"\uc694\uccad-\uc911\uc778-\uc791\uc5c5-\ucc98\ub9ac\ud560-\ub54c\uae4c\uc9c0-\uc11c\ubc84\uc758-\uc885\ub8cc\ub97c-\ub300\uae30\uc2dc\ud0a4\uae30",children:"\uc694\uccad \uc911\uc778 \uc791\uc5c5 \ucc98\ub9ac\ud560 \ub54c\uae4c\uc9c0 \uc11c\ubc84\uc758 \uc885\ub8cc\ub97c \ub300\uae30\uc2dc\ud0a4\uae30"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'// server.js\r\n\r\nconst app = express();\r\n\r\nlet disableKeepAlive = false;\r\n\r\n// \uc911\ub2e8 \uc2dc\uadf8\ub110\uc774 disableKeepAlive\ub97c true\ub85c \ubc14\uafb8\uba74\r\n// \uc774\ud6c4 \uc694\uccad\uc740 \ubaa8\ub450 close\ub85c \uc751\ub2f5\ud55c\ub2e4.\r\n// \uc694\uccad, \uc751\ub2f5 \ucc98\ub9ac\uac00 \ub05d\ub098\uba74 \ucee4\ub125\uc158\uc744 \ub2eb\ub294\ub2e4.\r\napp.use((req, res, next) => {\r\n  if (disableKeepAlive) {\r\n    res.set("Connection", "close");\r\n  }\r\n  next();\r\n});\r\n\r\nconst server = app.listen(process.env.PORT, () => {\r\n  console.log(`The application is listening on port ${process.env.PORT}`);\r\n  if (process.send) {\r\n    console.log("send");\r\n    process.send("ready");\r\n  }\r\n});\r\n\r\nprocess.on("SIGINT", async () => {\r\n  disableKeepAlive = true;\r\n  server.close();\r\n  process.exit(0);\r\n});\n'})})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},529087:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>c});var s=r(596363);const o={},t=s.createContext(o);function l(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);