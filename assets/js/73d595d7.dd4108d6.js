"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[547153],{261624:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>m,frontMatter:()=>i,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"nodejs/nodejs event loop main thread \uc791\uc5c5 \ub098\ub204\uae30","title":"nodejs event-loop setImmediate or setTimeout","description":"main thread\uc5d0\uc11c \ubb34\uac70\uc6b4 \uc791\uc5c5\uc744 \ud558\uba74 \uc774\ubca4\ud2b8 \ub8e8\ud504\ub97c block\ud558\uac8c \ub41c\ub2e4","source":"@site/docs/nodejs/nodejs event loop main thread \uc791\uc5c5 \ub098\ub204\uae30.md","sourceDirName":"nodejs","slug":"/nodejs/nodejs event loop main thread \uc791\uc5c5 \ub098\ub204\uae30","permalink":"/docs/nodejs/nodejs event loop main thread \uc791\uc5c5 \ub098\ub204\uae30","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"nodejs event loop timer","permalink":"/docs/nodejs/nodejs event loop libuv timer"},"next":{"title":"nodejs event-loop phase","permalink":"/docs/nodejs/nodejs event loop phase"}}');var r=t(447259),s=t(529087);const i={},a="nodejs event-loop setImmediate or setTimeout",l={},c=[{value:"setImmediate / setTimeout / Promise.resolve().then() / queueMicrotask",id:"setimmediate--settimeout--promiseresolvethen--queuemicrotask",level:2},{value:"async-iterator",id:"async-iterator",level:2}];function d(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"nodejs-event-loop-setimmediate-or-settimeout",children:"nodejs event-loop setImmediate or setTimeout"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"main thread\uc5d0\uc11c \ubb34\uac70\uc6b4 \uc791\uc5c5\uc744 \ud558\uba74 \uc774\ubca4\ud2b8 \ub8e8\ud504\ub97c block\ud558\uac8c \ub41c\ub2e4"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"\uc774\ub54c setImmediate\uc744 \uc0ac\uc6a9\ud558\uc5ec \ubb34\uac70\uc6b4 \uc791\uc5c5\uc744 \ub098\ub220\uc11c \uc2e4\ud589\ud558\uc5ec block\uc744 \ud53c\ud560 \uc218 \uc788\ub2e4 (nextTick\uc740 \uc0ac\uc6a9\ud558\uba74 \uc548\ub428)"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"bcryptjs \uac19\uc740 main thread\ub9cc \uc0ac\uc6a9\ud558\ub294 \ud328\ud0a4\uc9c0\ub4e4\uc744 \uc774\ub7f0 \ubc29\ubc95\uc73c\ub85c block\uc744 \ud53c\ud55c\ub2e4"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"setimmediate--settimeout--promiseresolvethen--queuemicrotask",children:"setImmediate / setTimeout / Promise.resolve().then() / queueMicrotask"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'function heavyTask() {\r\n  let i = 0;\r\n  const inner = () => {\r\n    if (i >= 1_000_000_000) return console.log("done");\r\n    for (let j = 0; j < 100_000; j++) {\r\n      i++;\r\n    }\r\n    setImmediate(inner); // \ud83d\udc48 \ub2e4\uc74c tick\uc5d0\uc11c \uc774\uc5b4\uc11c (setTimeout\uc73c\ub85c\ub3c4 \uad6c\ud604\uac00\ub2a5) (Promise.resolve().then(), queueMicrotask\ub85c\ub3c4 \uad6c\ud604\uac00\ub2a5)\r\n  };\r\n  inner();\r\n}\r\n\r\nheavyTask();\r\nconsole.log("next work");\n'})}),"\n",(0,r.jsx)(n.h2,{id:"async-iterator",children:"async-iterator"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'async function* heavyTaskGenerator() {\r\n  let i = 0;\r\n  while (i < 1_000_000_000) {\r\n    for (let j = 0; j < 100_000; j++) {\r\n      i++;\r\n    }\r\n    yield; // \ub2e4\uc74c tick\uc73c\ub85c \ub118\uc5b4\uac10\r\n  }\r\n  console.log("done");\r\n}\r\n\r\nasync function heavyTask() {\r\n  for await (const _ of heavyTaskGenerator()) {\r\n    // \uac01 yield\ub9c8\ub2e4 \uc774\ubca4\ud2b8 \ub8e8\ud504\uac00 \ub2e4\ub978 \uc791\uc5c5\uc744 \ucc98\ub9ac\ud560 \uc218 \uc788\uc74c\r\n  }\r\n}\r\n\r\nheavyTask();\r\nconsole.log("next work");\n'})})]})}function m(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},529087:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>a});var o=t(596363);const r={},s=o.createContext(r);function i(e){const n=o.useContext(s);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);