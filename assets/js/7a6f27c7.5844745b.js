"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[906256],{494794:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>d,contentTitle:()=>i,default:()=>m,frontMatter:()=>l,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"nestjs/nest base module Dynamic Module - Configurable Module","title":"nestjs base Dynamic Module (Configurable Module)","description":"register: import \ud560\ub54c\ub9c8\ub2e4 \ub2e4\ub978 \uc124\uc815\uc744 \ud558\uace0\uc2f6\uc744 \ub54c","source":"@site/docs/nestjs/nest base module Dynamic Module - Configurable Module.md","sourceDirName":"nestjs","slug":"/nestjs/nest base module Dynamic Module - Configurable Module","permalink":"/docs/nestjs/nest base module Dynamic Module - Configurable Module","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"nest base DI sub-trees","permalink":"/docs/nestjs/nest base module DI & DI sub-trees"},"next":{"title":"nest base module dynamic module register & forRoot & forFeature","permalink":"/docs/nestjs/nest base module dynamic module register & forRoot & forFeature"}}');var s=n(447259),t=n(529087);const l={},i="nestjs base Dynamic Module (Configurable Module)",d={},a=[{value:"\uc9c1\uc811 \ub9cc\ub4e4\uae30",id:"\uc9c1\uc811-\ub9cc\ub4e4\uae30",level:2},{value:"some.token.ts",id:"sometokents",level:2},{value:"some.module.ts",id:"somemodulets",level:2},{value:"Builder\ub97c \uc0ac\uc6a9\ud558\uae30",id:"builder\ub97c-\uc0ac\uc6a9\ud558\uae30",level:2}];function u(e){const o={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.header,{children:(0,s.jsx)(o.h1,{id:"nestjs-base-dynamic-module-configurable-module",children:"nestjs base Dynamic Module (Configurable Module)"})}),"\n",(0,s.jsxs)(o.blockquote,{children:["\n",(0,s.jsx)(o.p,{children:"register: import \ud560\ub54c\ub9c8\ub2e4 \ub2e4\ub978 \uc124\uc815\uc744 \ud558\uace0\uc2f6\uc744 \ub54c"}),"\n",(0,s.jsx)(o.p,{children:"forRoot: \ud55c\ubc88 import\ud558\uace0 \uacc4\uc18d \uac19\uc740 \uc124\uc815\uc744 \uc0ac\uc6a9\ud558\uace0 \uc2f6\uc744 \ub54c (global: true \ub85c \uc124\uc815\ud574\uc918\uc57c\ud55c\ub2e4!)"}),"\n",(0,s.jsx)(o.p,{children:"forFeature: \ud55c\ubc88 import\ud558\uace0 \uacc4\uc18d \uac19\uc740 \uc124\uc815\uc744 \ud558\ub418 \uc870\uae08 \ubc14\uafb8\uace0 \uc2f6\uc744 \ub54c"}),"\n"]}),"\n",(0,s.jsx)(o.h2,{id:"\uc9c1\uc811-\ub9cc\ub4e4\uae30",children:"\uc9c1\uc811 \ub9cc\ub4e4\uae30"}),"\n",(0,s.jsxs)(o.blockquote,{children:["\n",(0,s.jsx)(o.p,{children:"token\uc740 \ub2e4\ub978 \ud30c\uc77c\uc5d0 \uc815\uc758\ud574\uc57c\ud55c\ub2e4!"}),"\n"]}),"\n",(0,s.jsx)(o.h2,{id:"sometokents",children:"some.token.ts"}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-ts",children:'export const SOME_MODULE_OPTIONS = Symbol("SOME_MODULE_OPTIONS");\r\nexport type SomeModuleOptions = {};\n'})}),"\n",(0,s.jsx)(o.h2,{id:"somemodulets",children:"some.module.ts"}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-ts",children:'import { DynamicModule, Module } from "@nestjs/common";\r\nimport { SomeService } from "./some.service";\r\nimport { SOME_MODULE_OPTIONS, SomeModuleOptions } from "./some.token";\r\n\r\n@Module({})\r\nexport class SomeModule {\r\n  static forRoot(options: SomeModuleOptions): DynamicModule {\r\n    return {\r\n      global: true,\r\n      module: SomeModule,\r\n      providers: [\r\n        {\r\n          provide: SOME_MODULE_OPTIONS,\r\n          useValue: options,\r\n        },\r\n        SomeService,\r\n      ],\r\n      exports: [SomeService],\r\n    };\r\n  }\r\n}\n'})}),"\n",(0,s.jsx)(o.h2,{id:"builder\ub97c-\uc0ac\uc6a9\ud558\uae30",children:"Builder\ub97c \uc0ac\uc6a9\ud558\uae30"}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-ts",children:'import { ConfigurableModuleBuilder } from "@nestjs/common";\r\nimport { SOME_MODULE_OPTIONS, SomeModuleOptions } from "./some.token";\r\n\r\nexport const {\r\n  ConfigurableModuleClass: SomeModule,\r\n  MODULE_OPTIONS_TOKEN: SomeModuleOptionsToken,\r\n  OPTIONS_TYPE: SomeModuleOptionsType,\r\n  ASYNC_OPTIONS_TYPE: SomeModuleAsyncOptionsType,\r\n} = new ConfigurableModuleBuilder<SomeModuleOptions>()\r\n  // setClassMethodName: register by default\r\n  .setClassMethodName("forRoot")\r\n  // setFactoryMethodName: useClass\ub85c \uc0ac\uc6a9\ub418\ub294 Class\uc5d0 \ub4e4\uc5b4\uac00\ub294 FactoryMethod\uc758 \uc774\ub984\r\n  .setFactoryMethodName("createConfigOptions")\r\n  // setExtras: when your module may need to take extra options that determine how it is supposed to behave\r\n  .setExtras(\r\n    {\r\n      isGlobal: true, // forRoot\uc640 forFeature\uc758 \ub3d9\uc791\ubc29\uc2dd\uc73c\ub85c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4.\r\n    },\r\n    (definition, extras) => ({\r\n      ...definition,\r\n      global: extras.isGlobal,\r\n    }),\r\n  )\r\n  .build();\n'})})]})}function m(e={}){const{wrapper:o}={...(0,t.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},529087:(e,o,n)=>{n.d(o,{R:()=>l,x:()=>i});var r=n(596363);const s={},t=r.createContext(s);function l(e){const o=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(o):{...o,...e}},[o,e])}function i(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),r.createElement(t.Provider,{value:o},e.children)}}}]);