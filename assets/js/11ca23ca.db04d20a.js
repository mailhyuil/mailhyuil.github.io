"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[535684],{529087:(e,n,o)=>{o.d(n,{R:()=>a,x:()=>s});var t=o(596363);const r={},i=t.createContext(r);function a(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(i.Provider,{value:n},e.children)}},714922:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>p,frontMatter:()=>a,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"nx/nx webpack module federation","title":"nx webpack module federation","description":"remote","source":"@site/docs/nx/nx webpack module federation.md","sourceDirName":"nx","slug":"/nx/nx webpack module federation","permalink":"/docs/nx/nx webpack module federation","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"nx generate packagejson","permalink":"/docs/nx/nx webpack generatePackageJson"},"next":{"title":"nx webpack nest","permalink":"/docs/nx/nx webpack nestjs"}}');var r=o(447259),i=o(529087);const a={},s="nx webpack module federation",l={},d=[{value:"remote",id:"remote",level:2},{value:"webpack.config.js",id:"webpackconfigjs",level:3},{value:"routes.ts",id:"routests",level:3},{value:"app.config.ts",id:"appconfigts",level:3},{value:"host",id:"host",level:2},{value:"webpack.config.js",id:"webpackconfigjs-1",level:3},{value:"routes.ts",id:"routests-1",level:3},{value:"module-federation.manifest.json",id:"module-federationmanifestjson",level:3},{value:"main.ts",id:"maints",level:3},{value:"component",id:"component",level:2}];function c(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"nx-webpack-module-federation",children:"nx webpack module federation"})}),"\n",(0,r.jsx)(n.h2,{id:"remote",children:"remote"}),"\n",(0,r.jsx)(n.h3,{id:"webpackconfigjs",children:"webpack.config.js"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'import { withModuleFederation } from "@nx/angular/module-federation";\r\nimport { ModuleFederationConfig } from "@nx/webpack";\r\n\r\nconst config: ModuleFederationConfig = {\r\n  name: "login",\r\n  exposes: {\r\n    "./Routes": "apps/login/src/app/remote-entry/entry.routes.ts",\r\n  },\r\n};\r\n\r\nexport default withModuleFederation(config);\n'})}),"\n",(0,r.jsx)(n.h3,{id:"routests",children:"routes.ts"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'import { Route } from "@angular/router";\r\nimport { RemoteEntryComponent } from "./entry.component";\r\n\r\nexport const remoteRoutes: Route[] = [{ path: "", component: RemoteEntryComponent }];\n'})}),"\n",(0,r.jsx)(n.h3,{id:"appconfigts",children:"app.config.ts"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'import { ApplicationConfig } from "@angular/core";\r\nimport { provideRouter } from "@angular/router";\r\nimport { remoteRoutes } from "./remote-entry/entry.routes";\r\n\r\nexport const appConfig: ApplicationConfig = {\r\n  providers: [provideRouter(remoteRoutes)],\r\n};\n'})}),"\n",(0,r.jsx)(n.h2,{id:"host",children:"host"}),"\n",(0,r.jsx)(n.h3,{id:"webpackconfigjs-1",children:"webpack.config.js"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'import { withModuleFederation } from "@nx/angular/module-federation";\r\nimport { ModuleFederationConfig } from "@nx/webpack";\r\n\r\nconst config: ModuleFederationConfig = {\r\n  name: "dashboard",\r\n  remotes: [],\r\n};\r\n\r\nexport default withModuleFederation(config);\n'})}),"\n",(0,r.jsx)(n.h3,{id:"routests-1",children:"routes.ts"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"loadRemoteModule \ud568\uc218\ub294 module federation\uc744 \ud1b5\ud574 remote module\uc744 \ub85c\ub4dc\ud55c\ub2e4."}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'import { Route } from "@angular/router";\r\nimport { loadRemoteModule } from "@nx/angular/mf";\r\nimport { AppComponent } from "./app.component";\r\n\r\nexport const appRoutes: Route[] = [\r\n  {\r\n    path: "login",\r\n    loadChildren: () => loadRemoteModule("login", "./Routes").then((m) => m.remoteRoutes),\r\n  },\r\n  {\r\n    path: "",\r\n    component: AppComponent,\r\n  },\r\n];\n'})}),"\n",(0,r.jsx)(n.h3,{id:"module-federationmanifestjson",children:"module-federation.manifest.json"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"module federation manifest \ud30c\uc77c\uc744 \ud1b5\ud574\uc11c remote module\uc758 \uacbd\ub85c\ub97c \uc815\uc758\ud55c\ub2e4."}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\r\n  "login": "http://localhost:4201"\r\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"maints",children:"main.ts"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"module-federation.manifest.json \ud30c\uc77c\uc744 fetch\ud558\uc5ec setRemoteDefinitions \ud568\uc218\ub97c \ud1b5\ud574 remote module\uc744 \uc815\uc758\ud55c\ub2e4."}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"import\uac00 \uc544\ub2cc fetch\ub97c \uc0ac\uc6a9\ud558\ub294 \uc774\uc720\ub294 module federation manifest \ud30c\uc77c\uc744 \ube4c\ub4dc \uc2dc\uc810\uc5d0 \uc0dd\uc131\ud558\uae30 \ub54c\ubb38\uc774\ub2e4."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'import { bootstrapApplication } from "@angular/platform-browser";\r\nimport { setRemoteDefinitions } from "@nx/angular/mf";\r\nimport { AppComponent } from "./app/app.component";\r\nimport { appConfig } from "./app/app.config";\r\n\r\nfetch("/assets/module-federation.manifest.json")\r\n  .then((res) => res.json())\r\n  .then((definitions) => setRemoteDefinitions(definitions))\r\n  .then(() => bootstrapApplication(AppComponent, appConfig))\r\n  .catch((err) => console.error(err));\n'})}),"\n",(0,r.jsx)(n.h2,{id:"component",children:"component"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'@Component({\r\n  selector: "app-host",\r\n  template: ` <div #buttonContainer></div> `,\r\n})\r\nexport class HostComponent implements OnInit {\r\n  @ViewChild("buttonContainer", { read: ViewContainerRef }) buttonContainer: ViewContainerRef;\r\n\r\n  async ngOnInit() {\r\n    const { ButtonComponent } = await loadRemoteModule("login", "./button");\r\n    this.buttonContainer.createComponent(ButtonComponent);\r\n  }\r\n}\n'})})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);