"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[591861],{529087:(n,e,r)=>{r.d(e,{R:()=>a,x:()=>c});var i=r(596363);const t={},o=i.createContext(t);function a(n){const e=i.useContext(o);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:a(n.components),i.createElement(o.Provider,{value:e},n.children)}},705157:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>s,contentTitle:()=>c,default:()=>p,frontMatter:()=>a,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"spring/spring AOP","title":"AOP","description":"Aspected Oriented Programming \uad00\uc810 \uc9c0\ud5a5 \ud504\ub85c\uadf8\ub798\ubc0d","source":"@site/docs/spring/spring AOP.md","sourceDirName":"spring","slug":"/spring/spring AOP","permalink":"/docs/spring/spring AOP","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Spring basic","permalink":"/docs/spring/Spring basic"},"next":{"title":"ActiveMQ","permalink":"/docs/spring/spring ActiveMQ"}}');var t=r(447259),o=r(529087);const a={},c="AOP",s={},l=[{value:"\uc6a9\uc5b4",id:"\uc6a9\uc5b4",level:2},{value:"JoinPoint : \ucf54\ub4dc\uac00 \ub4e4\uc5b4\uac08 \uc704\uce58",id:"joinpoint--\ucf54\ub4dc\uac00-\ub4e4\uc5b4\uac08-\uc704\uce58",level:3},{value:"Pointcut : \ud2b9\uc815 Joinpoint\ub97c \uace8\ub77c\ub0b4\ub294 \ucf54\ub4dc\ub97c \ub2f4\uc740 \uc624\ube0c\uc81d\ud2b8 // \uba54\uc18c\ub4dc \uc120\uc815 \uc54c\uace0\ub9ac\uc998\uc744 \ub2f4\uc740 \uc624\ube0c\uc81d\ud2b8",id:"pointcut--\ud2b9\uc815-joinpoint\ub97c-\uace8\ub77c\ub0b4\ub294-\ucf54\ub4dc\ub97c-\ub2f4\uc740-\uc624\ube0c\uc81d\ud2b8--\uba54\uc18c\ub4dc-\uc120\uc815-\uc54c\uace0\ub9ac\uc998\uc744-\ub2f4\uc740-\uc624\ube0c\uc81d\ud2b8",level:3},{value:"Advice : \uac01 Joinpoint\uc5d0 \uc0bd\uc785\ub418\uc5b4 \ub3d9\uc791\ud560 \ucf54\ub4dc\ub97c \ub2f4\uc740 \uc624\ube0c\uc81d\ud2b8",id:"advice--\uac01-joinpoint\uc5d0-\uc0bd\uc785\ub418\uc5b4-\ub3d9\uc791\ud560-\ucf54\ub4dc\ub97c-\ub2f4\uc740-\uc624\ube0c\uc81d\ud2b8",level:3},{value:"Adviser : Pointcut + Advice // \uc5b4\ub4dc\ubc14\uc774\uc2a4\uc640 \ud3ec\uc778\ud2b8\ucef7\uc744 \ubb36\uc740 \uc624\ube0c\uc81d\ud2b8",id:"adviser--pointcut--advice--\uc5b4\ub4dc\ubc14\uc774\uc2a4\uc640-\ud3ec\uc778\ud2b8\ucef7\uc744-\ubb36\uc740-\uc624\ube0c\uc81d\ud2b8",level:3},{value:"Weaving : Pointcut\uc5d0 \uc758\ud574\uc11c \uacb0\uc815\ub41c Joinpoint\uc5d0 \uc9c0\uc815\ub41c Advice \ub97c \uc0bd\uc785\ud558\ub294 \uacfc\uc815",id:"weaving--pointcut\uc5d0-\uc758\ud574\uc11c-\uacb0\uc815\ub41c-joinpoint\uc5d0-\uc9c0\uc815\ub41c-advice-\ub97c-\uc0bd\uc785\ud558\ub294-\uacfc\uc815",level:3},{value:"\ub3d9\uc791\uc6d0\ub9ac",id:"\ub3d9\uc791\uc6d0\ub9ac",level:2},{value:"\ub2e4\uc774\ub0b4\ubbf9 \ud504\ub85d\uc2dc",id:"\ub2e4\uc774\ub0b4\ubbf9-\ud504\ub85d\uc2dc",level:2}];function d(n){const e={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,o.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"aop",children:"AOP"})}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"Aspected Oriented Programming \uad00\uc810 \uc9c0\ud5a5 \ud504\ub85c\uadf8\ub798\ubc0d"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"\ubd80\uac00\uae30\ub2a5\uc744 \ubd84\ub9ac"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"\ube44\uc988\ub2c8\uc2a4 \ub17c\ub9ac\uc5d0 \uc9d1\uc911\ud560 \uc218 \uc788\ub3c4\ub85d \ub2e4\ub978 \ucf54\ub4dc\ub97c \ubd84\ub9ac\ud558\ub294 \uac83"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"\ud504\ub85d\uc2dc \ud328\ud134, \ub370\ucf54\ub808\uc774\ud130 \ud328\ud134 \uc0ac\uc6a9"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"\uc6a9\uc5b4",children:"\uc6a9\uc5b4"}),"\n",(0,t.jsx)(e.h3,{id:"joinpoint--\ucf54\ub4dc\uac00-\ub4e4\uc5b4\uac08-\uc704\uce58",children:"JoinPoint : \ucf54\ub4dc\uac00 \ub4e4\uc5b4\uac08 \uc704\uce58"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"\uba54\uc18c\ub4dc\uac00 \ud638\ucd9c\ub418\ub294 \ubd80\ubd84 \ub610\ub294 \ub9ac\ud134\ub418\ub294 \ubd80\ubd84"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"\uc778\uc2a4\ud134\uc2a4\uac00 \ub9cc\ub4e4\uc5b4\uc9c0\ub294 \uc9c0\uc810"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"\uc608\uc678\uac00 \ub358\uc838\uc9c0\ub294 \uc9c0\uc810"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"\ud074\ub798\uc2a4\uac00 \ucd08\uae30\ud654 \ub418\ub294 \uacf3(\ubcc4\ub3c4\uc758 init\uba54\uc18c\ub4dc\uac00 \ud638\ucd9c\ub420\ub54c)"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"pointcut--\ud2b9\uc815-joinpoint\ub97c-\uace8\ub77c\ub0b4\ub294-\ucf54\ub4dc\ub97c-\ub2f4\uc740-\uc624\ube0c\uc81d\ud2b8--\uba54\uc18c\ub4dc-\uc120\uc815-\uc54c\uace0\ub9ac\uc998\uc744-\ub2f4\uc740-\uc624\ube0c\uc81d\ud2b8",children:"Pointcut : \ud2b9\uc815 Joinpoint\ub97c \uace8\ub77c\ub0b4\ub294 \ucf54\ub4dc\ub97c \ub2f4\uc740 \uc624\ube0c\uc81d\ud2b8 // \uba54\uc18c\ub4dc \uc120\uc815 \uc54c\uace0\ub9ac\uc998\uc744 \ub2f4\uc740 \uc624\ube0c\uc81d\ud2b8"}),"\n",(0,t.jsx)(e.h3,{id:"advice--\uac01-joinpoint\uc5d0-\uc0bd\uc785\ub418\uc5b4-\ub3d9\uc791\ud560-\ucf54\ub4dc\ub97c-\ub2f4\uc740-\uc624\ube0c\uc81d\ud2b8",children:"Advice : \uac01 Joinpoint\uc5d0 \uc0bd\uc785\ub418\uc5b4 \ub3d9\uc791\ud560 \ucf54\ub4dc\ub97c \ub2f4\uc740 \uc624\ube0c\uc81d\ud2b8"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-txt",children:"1. Before Advice : Joinpoint \uc804\uc5d0 \uc2e4\ud589\r\n2. Around Advice : Joinpoint \uc55e\uacfc \ub4a4\uc5d0\uc11c \uc2e4\ud589\r\n3. After Returning Advice : Joinpoint \uba54\uc18c\ub4dc\uac00 \ub9ac\ud134\ub420\uc2dc \uc2e4\ud589. Return\ub41c object\uc5d0 \uc811\uadfc\uac00\ub2a5\r\n4. After Advice : Joinpoint\ud6c4\uc5d0 \ubb34\uc870\uac74 \uc2e4\ud589\ub428(\uc608\uc678\ubc1c\uc0dd\uc2dc\uc5d0\ub3c4 \uc2e4\ud589. finally\uc640 \uc720\uc0ac\ud568.)\r\n5. After Throwing Advice : Jointpoint \uba54\uc18c\ub4dc \uc2e4\ud589\uc911 \uc608\uc678\ubc1c\uc0dd\uc2dc \uc2e4\ud589\n"})}),"\n",(0,t.jsx)(e.h3,{id:"adviser--pointcut--advice--\uc5b4\ub4dc\ubc14\uc774\uc2a4\uc640-\ud3ec\uc778\ud2b8\ucef7\uc744-\ubb36\uc740-\uc624\ube0c\uc81d\ud2b8",children:"Adviser : Pointcut + Advice // \uc5b4\ub4dc\ubc14\uc774\uc2a4\uc640 \ud3ec\uc778\ud2b8\ucef7\uc744 \ubb36\uc740 \uc624\ube0c\uc81d\ud2b8"}),"\n",(0,t.jsx)(e.h3,{id:"weaving--pointcut\uc5d0-\uc758\ud574\uc11c-\uacb0\uc815\ub41c-joinpoint\uc5d0-\uc9c0\uc815\ub41c-advice-\ub97c-\uc0bd\uc785\ud558\ub294-\uacfc\uc815",children:"Weaving : Pointcut\uc5d0 \uc758\ud574\uc11c \uacb0\uc815\ub41c Joinpoint\uc5d0 \uc9c0\uc815\ub41c Advice \ub97c \uc0bd\uc785\ud558\ub294 \uacfc\uc815"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-txt",children:"1. \ucef4\ud30c\uc77c\uc2dc\uc5d0 Weaving\ud558\uae30\r\n2. \ud074\ub798\uc2a4 \ub85c\ub529 \uc2dc\uc5d0 Weaving\ud558\uae30\r\n3. \ub7f0\ud0c0\uc784\uc2dc\uc5d0 Weaving\ud558\uae30\n"})}),"\n",(0,t.jsx)(e.h2,{id:"\ub3d9\uc791\uc6d0\ub9ac",children:"\ub3d9\uc791\uc6d0\ub9ac"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"UserService -> UserServiceTx -> UserServiceImpl"}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-java",children:"@Service\r\npublic class UserServiceTx implements UserService{ // \ud504\ub85d\uc2dc \uac1d\uccb4\r\n    UserService userService; // <- UserServiceImpl \uc8fc\uc785\r\n    PlatformTransactionManager transactionManager;\r\n\r\n    public void doAOP(){\r\n        //transaction logic\r\n\r\n        /* business logic */\r\n\r\n        //transaction logic\r\n    }\r\n}\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-java",children:"@Controller\r\npublic class Controller{\r\n    UserService userService; // <- UserServiceTx \ud504\ub85d\uc2dc \uac1d\uccb4 \uc8fc\uc785\r\n}\n"})}),"\n",(0,t.jsx)(e.h2,{id:"\ub2e4\uc774\ub0b4\ubbf9-\ud504\ub85d\uc2dc",children:"\ub2e4\uc774\ub0b4\ubbf9 \ud504\ub85d\uc2dc"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"API\ub97c \uc774\uc6a9\ud574 \ud504\ub85d\uc2dc\ucc98\ub7fc \ub3d9\uc791\ud558\ub294 \uc624\ube0c\uc81d\ud2b8\ub97c \ub2e4\uc774\ub0b4\ubbf9\ud558\uac8c \uc0dd\uc131\ud558\ub294 \uac83"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"InvocationHandler \uc778\ud130\ud398\uc774\uc2a4 or FactoryBean \uad6c\ud604\ud558\uc5ec \uc0ac\uc6a9"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-java",children:'public class TransactionHandler implements InvocationHandler {\r\n  private Object target;\r\n  private PlatformTransactionManager platformTransactionManager;\r\n  private String pattern;\r\n\r\n  /*\r\n  \uc694\uccad\uc744 \uc704\uc784\ud560 \ud0c0\uae43\uc744 DI\ub85c \uc81c\uacf5 \ubc1b\ub3c4\ub85d \ud568.\r\n  \uc5b4\ub5a0\ud55c \ud0c0\uae43 \uc624\ube0c\uc81d\ud2b8 \uc5d0\ub3c4 \uc801\uc6a9 \ud560 \uc218 \uc788\ub2e4.\r\n   */\r\n  public void setTarget(Object target) {\r\n    this.target = target;\r\n  }\r\n\r\n  public void setPlatformTransactionManager(PlatformTransactionManager platformTransactionManager) {\r\n    this.platformTransactionManager = platformTransactionManager;\r\n  }\r\n\r\n  /*\r\n  \ubaa8\ub4e0 \uba54\uc18c\ub4dc\uc5d0 \uc801\uc6a9\ub418\uc9c0 \uc54a\ub3c4\ub85d \ud328\ud134\uc744 DI \ubc1b\ub294\ub2e4.\r\n  "get" \uc73c\ub85c \uc8fc\uba74 get\uc73c\ub85c \uc2dc\uc791\ud558\ub294 \ubaa8\ub4e0 \uba54\uc18c\ub4dc\uc5d0 \ud2b8\ub79c\uc7ad\uc158 \uc801\uc6a9\r\n   */\r\n  public void setPattern(String pattern) {\r\n    this.pattern = pattern;\r\n  }\r\n\r\n  @Override\r\n  public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\r\n    if (method.getName().startsWith(pattern)) { // \ud328\ud134\uc5d0 \ub9de\ub294 \uba54\uc18c\ub4dc \uc778\uc9c0 \ud655\uc778\r\n      return invokeInTransaction(method, args); // \ud328\ud134\uacfc \uc77c\uce58\ud558\uba74 \ud638\ucd9c\r\n    } else {\r\n      return method.invoke(target, args); // \uc544\ub2c8\ub77c\uba74 \ubd80\uac00\uae30\ub2a5 \uc5c6\uc774 \ud638\ucd9c\r\n    }\r\n  }\r\n\r\n  private Object invokeInTransaction(Method method, Object[] args) throws Throwable {\r\n    TransactionStatus status = this.platformTransactionManager.getTransaction(new DefaultTransactionDefinition());\r\n    try {\r\n      Object ret = method.invoke(target, args);\r\n      this.platformTransactionManager.commit(status);\r\n      return ret;\r\n    } catch (InvocationTargetException e) {\r\n      this.platformTransactionManager.rollback(status);\r\n      throw e.getTargetException();\r\n    }\r\n  }\r\n}\n'})})]})}function p(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}}}]);