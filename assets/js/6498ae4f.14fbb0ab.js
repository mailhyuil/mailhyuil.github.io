"use strict";(globalThis.webpackChunkmy_blog=globalThis.webpackChunkmy_blog||[]).push([[563802],{529087:(r,e,n)=>{n.d(e,{R:()=>s,x:()=>l});var a=n(596363);const o={},t=a.createContext(o);function s(r){const e=a.useContext(t);return a.useMemo(function(){return"function"==typeof r?r(e):{...e,...r}},[e,r])}function l(r){let e;return e=r.disableParentContext?"function"==typeof r.components?r.components(o):r.components||o:s(r.components),a.createElement(t.Provider,{value:e},r.children)}},838966:(r,e,n)=>{n.r(e),n.d(e,{assets:()=>i,contentTitle:()=>l,default:()=>u,frontMatter:()=>s,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"angular/angular error handling","title":"angular error handling","description":"error-massage.ts","source":"@site/docs/angular/angular error handling.md","sourceDirName":"angular","slug":"/angular/angular error handling","permalink":"/docs/angular/angular error handling","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"angular environment","permalink":"/docs/angular/angular environment"},"next":{"title":"angular error \ub124\ube44\uac8c\uc774\uc158 \ud6c4 \ud074\ub9ad\ud574\uc57c \ubdf0\uac00 \ubcc0\uacbd\ub418\ub294 \ud604\uc0c1","permalink":"/docs/angular/angular error \ub124\ube44\uac8c\uc774\uc158 \ud6c4 \ud074\ub9ad\ud574\uc57c \ubdf0\uac00 \uc5c5\ub370\uc774\ud2b8\ub418\ub294 \ud604\uc0c1"}}');var o=n(447259),t=n(529087);const s={},l="angular error handling",i={},d=[{value:"error-massage.ts",id:"error-massagets",level:2},{value:"user-friendly.error.ts",id:"user-friendlyerrorts",level:2},{value:"http-error-handler.ts",id:"http-error-handlerts",level:2},{value:"global-error-handler.ts",id:"global-error-handlerts",level:2},{value:"api-interceptor.ts",id:"api-interceptorts",level:2},{value:"app.config.ts",id:"appconfigts",level:2}];function c(r){const e={code:"code",h1:"h1",h2:"h2",header:"header",pre:"pre",...(0,t.R)(),...r.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"angular-error-handling",children:"angular error handling"})}),"\n",(0,o.jsx)(e.h2,{id:"error-massagets",children:"error-massage.ts"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-ts",children:'export const ErrorMessage: Record<number, string> = {\r\n  1001: "\uc720\uc800\uc758 \uc815\ubcf4\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc5b4\uc694 \ud83d\ude22",\r\n  1002: "\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \uc720\uc800\uc5d0\uc694 \ud83d\ude22",\r\n};\n'})}),"\n",(0,o.jsx)(e.h2,{id:"user-friendlyerrorts",children:"user-friendly.error.ts"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-ts",children:"export class UserFriendlyError extends Error {\r\n  constructor(message: string) {\r\n    super(message);\r\n  }\r\n}\n"})}),"\n",(0,o.jsx)(e.h2,{id:"http-error-handlerts",children:"http-error-handler.ts"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-ts",children:'import { HttpErrorResponse } from "@angular/common/http";\r\nimport { Injectable, inject } from "@angular/core";\r\nimport { Router } from "@angular/router";\r\nimport { ErrorMessage } from "./error-message";\r\nimport { UserFriendlyError } from "./user-friendly.error";\r\n\r\n@Injectable({\r\n  providedIn: "root",\r\n})\r\nexport class HttpErrorHandler {\r\n  router = inject(Router);\r\n  handleError(httpError: HttpErrorResponse) {\r\n    const status: number = httpError.status;\r\n    const error: any = httpError.error;\r\n    if (status === 401) {\r\n      this.handleUnauthorized();\r\n    }\r\n    if (status === 498) {\r\n      this.handleInvalidToken();\r\n    }\r\n    throw new UserFriendlyError(ErrorMessage[error.code]);\r\n  }\r\n\r\n  private async handleInvalidToken() {\r\n    // auth\ub97c clear\r\n    // refresh token\uc73c\ub85c access token\uc744 \uc694\uccad\r\n    // access token\uc744 \uc774\uc6a9\ud574 me\ub97c \uc694\uccad\r\n    // me\ub97c \ubc1b\uc544\uc11c auth store\uc5d0 \uc800\uc7a5\r\n    // \uc2e4\ud328\ud558\uba74 login \ud398\uc774\uc9c0\ub85c \uc774\ub3d9\r\n    return;\r\n  }\r\n\r\n  private async handleUnauthorized(): Promise<void> {\r\n    // auth\ub97c clear\r\n    // login \ud398\uc774\uc9c0\ub85c \uc774\ub3d9\r\n    return;\r\n  }\r\n}\n'})}),"\n",(0,o.jsx)(e.h2,{id:"global-error-handlerts",children:"global-error-handler.ts"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-ts",children:'import { ErrorHandler, Injectable } from "@angular/core";\r\nimport { UserFriendlyError } from "./user-friendly.error";\r\n\r\n@Injectable({\r\n  providedIn: "root",\r\n})\r\nexport class GlobalErrorHandler implements ErrorHandler {\r\n  handleError(error: any): void {\r\n    if (error instanceof UserFriendlyError) {\r\n      alert(error.message);\r\n    }\r\n  }\r\n}\n'})}),"\n",(0,o.jsx)(e.h2,{id:"api-interceptorts",children:"api-interceptor.ts"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-ts",children:"return next(apiReq).pipe(\r\n  catchError(error => {\r\n    if (error instanceof HttpErrorResponse) {\r\n      httpErrorHandler.handleError(error);\r\n    }\r\n    throw error;\r\n  }),\r\n);\n"})}),"\n",(0,o.jsx)(e.h2,{id:"appconfigts",children:"app.config.ts"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-ts",children:"{\r\n  provide: ErrorHandler,\r\n  useClass: GlobalErrorHandler,\r\n},\n"})})]})}function u(r={}){const{wrapper:e}={...(0,t.R)(),...r.components};return e?(0,o.jsx)(e,{...r,children:(0,o.jsx)(c,{...r})}):c(r)}}}]);