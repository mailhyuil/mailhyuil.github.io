"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["638481"],{980700:function(e,r,t){t.r(r),t.d(r,{frontMatter:()=>i,toc:()=>d,default:()=>a,metadata:()=>n,assets:()=>u,contentTitle:()=>l});var n=JSON.parse('{"id":"testing/testing nestjs","title":"nestjs test","description":"test","source":"@site/docs/testing/testing nestjs.md","sourceDirName":"testing","slug":"/testing/testing nestjs","permalink":"/docs/testing/testing nestjs","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"testing nestjs pipe","permalink":"/docs/testing/testing nestjs pipe"},"next":{"title":"testing prisma $transaction","permalink":"/docs/testing/testing prisma $transaction"}}'),s=t(447259),o=t(255511);let i={},l="nestjs test",u={},d=[{value:"test",id:"test",level:2}];function c(e){let r={code:"code",h1:"h1",h2:"h2",header:"header",pre:"pre",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"nestjs-test",children:"nestjs test"})}),"\n",(0,s.jsx)(r.h2,{id:"test",children:"test"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-ts",children:'import { Test, TestingModule } from "@nestjs/testing";\r\nimport { UserController } from "./user.controller";\r\nimport { UserService } from "./user.service";\r\nimport { AuthModule } from "../auth/auth.module";\r\nimport { SubscriptionModule } from "../subscription/subscription.module";\r\nimport { ProfileModule } from "../profile/profile.module";\r\nimport { PrismaModule } from "../../prisma/prisma.module";\r\n\r\ndescribe("UserController", () => {\r\n  // controller\r\n  let userController: UserController;\r\n  // service\r\n  let userService: UserService;\r\n  // module\r\n  let authModule: AuthModule;\r\n  let subscriptionModule: SubscriptionModule;\r\n  let profileModule: ProfileModule;\r\n  let prismaModule: PrismaModule;\r\n\r\n  beforeEach(async () => {\r\n    const moduleRef: TestingModule = await Test.createTestingModule({\r\n      imports: [AuthModule],\r\n      controllers: [UserController],\r\n      providers: [UserService],\r\n    });\r\n    overrideProvider(UserService).useClass(MockUserService);\r\n    overrideProvider(AuthService).useClass(MockAuthService);\r\n    overrideGuard(AuthGuard).useClass(MockAuthGuard).compile();\r\n\r\n    userController = moduleRef.get<UserController>(UserController);\r\n    userService = moduleRef.get<UserService>(UserService);\r\n    authModule = moduleRef.get<AuthModule>(AuthModule);\r\n  });\r\n\r\n  it("should be defined", () => {\r\n    expect(controller).toBeDefined();\r\n  });\r\n\r\n  describe("findAll", () => {\r\n    it("should return an array of users", async () => {\r\n      const result = [\r\n        { username: "sangbaek", password: "1234" },\r\n        { username: "hyuil", password: "1234" },\r\n      ];\r\n\r\n      jest.spyOn(userService, "findAll").mockImplementation(() => result);\r\n\r\n      expect(await userController.findAll()).toBe(result);\r\n    });\r\n  });\r\n});\n'})})]})}function a(e={}){let{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},255511:function(e,r,t){t.d(r,{R:()=>i,x:()=>l});var n=t(596363);let s={},o=n.createContext(s);function i(e){let r=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),n.createElement(o.Provider,{value:r},e.children)}}}]);