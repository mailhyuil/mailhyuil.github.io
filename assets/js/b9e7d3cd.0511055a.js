"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["818271"],{68115:function(e,t,r){r.r(t),r.d(t,{frontMatter:()=>a,toc:()=>d,default:()=>p,metadata:()=>n,assets:()=>i,contentTitle:()=>c});var n=JSON.parse('{"id":"nestjs/nest base decorator applyDecorators","title":"nest base decorator custom decorator \uAE30\uC874 \uB370\uC774\uD130 \uC218\uC815","description":"ClassDecorator, MethodDecorator\uB97C \uD569\uC131\uD560 \uC218 \uC788\uB294 \uD568\uC218","source":"@site/docs/nestjs/nest base decorator applyDecorators.md","sourceDirName":"nestjs","slug":"/nestjs/nest base decorator applyDecorators","permalink":"/docs/nestjs/nest base decorator applyDecorators","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"nest SetMetadata","permalink":"/docs/nestjs/nest base decorator SetMetadata"},"next":{"title":"nest decorators","permalink":"/docs/nestjs/nest base decorator built-in"}}'),o=r(447259),s=r(255511);let a={},c="nest base decorator custom decorator \uAE30\uC874 \uB370\uC774\uD130 \uC218\uC815",i={},d=[];function l(e){let t={blockquote:"blockquote",code:"code",h1:"h1",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.header,{children:(0,o.jsx)(t.h1,{id:"nest-base-decorator-custom-decorator-\uAE30\uC874-\uB370\uC774\uD130-\uC218\uC815",children:"nest base decorator custom decorator \uAE30\uC874 \uB370\uC774\uD130 \uC218\uC815"})}),"\n",(0,o.jsxs)(t.blockquote,{children:["\n",(0,o.jsx)(t.p,{children:"ClassDecorator, MethodDecorator\uB97C \uD569\uC131\uD560 \uC218 \uC788\uB294 \uD568\uC218"}),"\n"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-ts",children:'import { applyDecorators, Logger } from "@nestjs/common";\r\nimport { OnEvent, OnEventType } from "@nestjs/event-emitter";\r\nimport { OnEventOptions } from "@nestjs/event-emitter/dist/interfaces";\r\n\r\nfunction _OnSafeEvent() {\r\n  return function (target: any, key: string, descriptor: PropertyDescriptor) {\r\n    const originalMethod = descriptor.value;\r\n\r\n    const metaKeys = Reflect.getOwnMetadataKeys(descriptor.value);\r\n    const metadata = metaKeys.map(key => [key, Reflect.getMetadata(key, descriptor.value)]);\r\n\r\n    descriptor.value = async function (...args: any[]) {\r\n      try {\r\n        await originalMethod.call(this, ...args);\r\n      } catch (err) {\r\n        Logger.error(err, err.stack, "OnSafeEvent");\r\n      }\r\n    };\r\n\r\n    metadata.forEach(([k, v]) => Reflect.defineMetadata(k, v, descriptor.value));\r\n  };\r\n}\r\n\r\nexport function OnSafeEvent(event: OnEventType, options?: OnEventOptions | undefined) {\r\n  // OnEvent\uC744 _OnSafeEvent\uB85C \uAC10\uC2F8\uC11C \uB9AC\uD134\r\n  return applyDecorators(OnEvent(event, options), _OnSafeEvent());\r\n}\n'})})]})}function p(e={}){let{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},255511:function(e,t,r){r.d(t,{R:()=>a,x:()=>c});var n=r(596363);let o={},s=n.createContext(o);function a(e){let t=n.useContext(s);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),n.createElement(s.Provider,{value:t},e.children)}}}]);